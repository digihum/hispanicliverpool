/*! jQuery v1.11.0 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */

//# sourceMappingURL=jquery.min.map;
//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/*!
 * Bootstrap v3.1.1 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*
  backbone.paginator 2.0.0
  http://github.com/backbone-paginator/backbone.paginator

  Copyright (c) 2013 Jimmy Yuen Ho Wong and contributors
  Licensed under the MIT @license.
*/

/**
 * Backbone-relational.js 0.8.8
 * (c) 2011-2013 Paul Uithol and contributors (https://github.com/PaulUithol/Backbone-relational/graphs/contributors)
 *
 * Backbone-relational may be freely distributed under the MIT license; see the accompanying LICENSE.txt.
 * For details and documentation: https://github.com/PaulUithol/Backbone-relational.
 * Depends on Backbone (and thus on Underscore as well): https://github.com/documentcloud/backbone.
 *
 * Example:
 *
	Zoo = Backbone.RelationalModel.extend({
		relations: [ {
			type: Backbone.HasMany,
			key: 'animals',
			relatedModel: 'Animal',
			reverseRelation: {
				key: 'livesIn',
				includeInJSON: 'id'
				// 'relatedModel' is automatically set to 'Zoo'; the 'relationType' to 'HasOne'.
			}
		} ],

		toString: function() {
			return this.get( 'name' );
		}
	});

	Animal = Backbone.RelationalModel.extend({
		toString: function() {
			return this.get( 'species' );
		}
	});

	// Creating the zoo will give it a collection with one animal in it: the monkey.
	// The animal created after that has a relation `livesIn` that points to the zoo it's currently associated with.
	// If you instantiate (or fetch) the zebra later, it will automatically be added.

	var zoo = new Zoo({
		name: 'Artis',
		animals: [ { id: 'monkey-1', species: 'Chimp' }, 'lion-1', 'zebra-1' ]
	});

	var lion = new Animal( { id: 'lion-1', species: 'Lion' } ),
		monkey = zoo.get( 'animals' ).first(),
		sameZoo = lion.get( 'livesIn' );
 */

/*!
  backgrid 0.3.5
  http://github.com/wyuenho/backgrid

  Copyright (c) 2014 Jimmy Yuen Ho Wong and contributors <wyuenho@gmail.com>
  Licensed under the MIT license.
*/

/*
  backgrid
  http://github.com/wyuenho/backgrid

  Copyright (c) 2013 Jimmy Yuen Ho Wong and contributors
  Licensed under the MIT license.
*/

// Copyright 2009, 2010 Kristopher Michael Kowal
// https://github.com/kriskowal/es5-shim
// ES5 15.5.4.20
// http://es5.github.com/#x15.5.4.20

/*
  backgrid-paginator
  http://github.com/wyuenho/backgrid

  Copyright (c) 2013 Jimmy Yuen Ho Wong and contributors
  Licensed under the MIT @license.
*/

!function(e, t) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function(e) {
        if (!e.document) throw new Error("jQuery requires a window with a document");
        return t(e);
    } : t(e);
}("undefined" != typeof window ? window : this, function(e, t) {
    function n(e) {
        var t = e.length, n = ot.type(e);
        return "function" === n || ot.isWindow(e) ? !1 : 1 === e.nodeType && t ? !0 : "array" === n || 0 === t || "number" == typeof t && t > 0 && t - 1 in e;
    }
    function i(e, t, n) {
        if (ot.isFunction(t)) return ot.grep(e, function(e, i) {
            return !!t.call(e, i, e) !== n;
        });
        if (t.nodeType) return ot.grep(e, function(e) {
            return e === t !== n;
        });
        if ("string" == typeof t) {
            if (pt.test(t)) return ot.filter(t, e, n);
            t = ot.filter(t, e);
        }
        return ot.grep(e, function(e) {
            return ot.inArray(e, t) >= 0 !== n;
        });
    }
    function r(e, t) {
        do e = e[t]; while (e && 1 !== e.nodeType);
        return e;
    }
    function o(e) {
        var t = xt[e] = {};
        return ot.each(e.match(wt) || [], function(e, n) {
            t[n] = !0;
        }), t;
    }
    function s() {
        mt.addEventListener ? (mt.removeEventListener("DOMContentLoaded", a, !1), e.removeEventListener("load", a, !1)) : (mt.detachEvent("onreadystatechange", a), 
        e.detachEvent("onload", a));
    }
    function a() {
        (mt.addEventListener || "load" === event.type || "complete" === mt.readyState) && (s(), 
        ot.ready());
    }
    function l(e, t, n) {
        if (void 0 === n && 1 === e.nodeType) {
            var i = "data-" + t.replace(Et, "-$1").toLowerCase();
            if (n = e.getAttribute(i), "string" == typeof n) {
                try {
                    n = "true" === n ? !0 : "false" === n ? !1 : "null" === n ? null : +n + "" === n ? +n : _t.test(n) ? ot.parseJSON(n) : n;
                } catch (r) {}
                ot.data(e, t, n);
            } else n = void 0;
        }
        return n;
    }
    function c(e) {
        var t;
        for (t in e) if (("data" !== t || !ot.isEmptyObject(e[t])) && "toJSON" !== t) return !1;
        return !0;
    }
    function u(e, t, n, i) {
        if (ot.acceptData(e)) {
            var r, o, s = ot.expando, a = e.nodeType, l = a ? ot.cache : e, c = a ? e[s] : e[s] && s;
            if (c && l[c] && (i || l[c].data) || void 0 !== n || "string" != typeof t) return c || (c = a ? e[s] = Q.pop() || ot.guid++ : s), 
            l[c] || (l[c] = a ? {} : {
                toJSON: ot.noop
            }), ("object" == typeof t || "function" == typeof t) && (i ? l[c] = ot.extend(l[c], t) : l[c].data = ot.extend(l[c].data, t)), 
            o = l[c], i || (o.data || (o.data = {}), o = o.data), void 0 !== n && (o[ot.camelCase(t)] = n), 
            "string" == typeof t ? (r = o[t], null == r && (r = o[ot.camelCase(t)])) : r = o, 
            r;
        }
    }
    function d(e, t, n) {
        if (ot.acceptData(e)) {
            var i, r, o = e.nodeType, s = o ? ot.cache : e, a = o ? e[ot.expando] : ot.expando;
            if (s[a]) {
                if (t && (i = n ? s[a] : s[a].data)) {
                    ot.isArray(t) ? t = t.concat(ot.map(t, ot.camelCase)) : t in i ? t = [ t ] : (t = ot.camelCase(t), 
                    t = t in i ? [ t ] : t.split(" ")), r = t.length;
                    for (;r--; ) delete i[t[r]];
                    if (n ? !c(i) : !ot.isEmptyObject(i)) return;
                }
                (n || (delete s[a].data, c(s[a]))) && (o ? ot.cleanData([ e ], !0) : it.deleteExpando || s != s.window ? delete s[a] : s[a] = null);
            }
        }
    }
    function h() {
        return !0;
    }
    function p() {
        return !1;
    }
    function f() {
        try {
            return mt.activeElement;
        } catch (e) {}
    }
    function m(e) {
        var t = Ft.split("|"), n = e.createDocumentFragment();
        if (n.createElement) for (;t.length; ) n.createElement(t.pop());
        return n;
    }
    function g(e, t) {
        var n, i, r = 0, o = typeof e.getElementsByTagName !== Tt ? e.getElementsByTagName(t || "*") : typeof e.querySelectorAll !== Tt ? e.querySelectorAll(t || "*") : void 0;
        if (!o) for (o = [], n = e.childNodes || e; null != (i = n[r]); r++) !t || ot.nodeName(i, t) ? o.push(i) : ot.merge(o, g(i, t));
        return void 0 === t || t && ot.nodeName(e, t) ? ot.merge([ e ], o) : o;
    }
    function v(e) {
        Pt.test(e.type) && (e.defaultChecked = e.checked);
    }
    function y(e, t) {
        return ot.nodeName(e, "table") && ot.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e;
    }
    function b(e) {
        return e.type = (null !== ot.find.attr(e, "type")) + "/" + e.type, e;
    }
    function w(e) {
        var t = Qt.exec(e.type);
        return t ? e.type = t[1] : e.removeAttribute("type"), e;
    }
    function x(e, t) {
        for (var n, i = 0; null != (n = e[i]); i++) ot._data(n, "globalEval", !t || ot._data(t[i], "globalEval"));
    }
    function C(e, t) {
        if (1 === t.nodeType && ot.hasData(e)) {
            var n, i, r, o = ot._data(e), s = ot._data(t, o), a = o.events;
            if (a) {
                delete s.handle, s.events = {};
                for (n in a) for (i = 0, r = a[n].length; r > i; i++) ot.event.add(t, n, a[n][i]);
            }
            s.data && (s.data = ot.extend({}, s.data));
        }
    }
    function k(e, t) {
        var n, i, r;
        if (1 === t.nodeType) {
            if (n = t.nodeName.toLowerCase(), !it.noCloneEvent && t[ot.expando]) {
                r = ot._data(t);
                for (i in r.events) ot.removeEvent(t, i, r.handle);
                t.removeAttribute(ot.expando);
            }
            "script" === n && t.text !== e.text ? (b(t).text = e.text, w(t)) : "object" === n ? (t.parentNode && (t.outerHTML = e.outerHTML), 
            it.html5Clone && e.innerHTML && !ot.trim(t.innerHTML) && (t.innerHTML = e.innerHTML)) : "input" === n && Pt.test(e.type) ? (t.defaultChecked = t.checked = e.checked, 
            t.value !== e.value && (t.value = e.value)) : "option" === n ? t.defaultSelected = t.selected = e.defaultSelected : ("input" === n || "textarea" === n) && (t.defaultValue = e.defaultValue);
        }
    }
    function T(t, n) {
        var i = ot(n.createElement(t)).appendTo(n.body), r = e.getDefaultComputedStyle ? e.getDefaultComputedStyle(i[0]).display : ot.css(i[0], "display");
        return i.detach(), r;
    }
    function _(e) {
        var t = mt, n = en[e];
        return n || (n = T(e, t), "none" !== n && n || (Zt = (Zt || ot("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement), 
        t = (Zt[0].contentWindow || Zt[0].contentDocument).document, t.write(), t.close(), 
        n = T(e, t), Zt.detach()), en[e] = n), n;
    }
    function E(e, t) {
        return {
            get: function() {
                var n = e();
                return null != n ? n ? void delete this.get : (this.get = t).apply(this, arguments) : void 0;
            }
        };
    }
    function R(e, t) {
        if (t in e) return t;
        for (var n = t.charAt(0).toUpperCase() + t.slice(1), i = t, r = fn.length; r--; ) if (t = fn[r] + n, 
        t in e) return t;
        return i;
    }
    function S(e, t) {
        for (var n, i, r, o = [], s = 0, a = e.length; a > s; s++) i = e[s], i.style && (o[s] = ot._data(i, "olddisplay"), 
        n = i.style.display, t ? (o[s] || "none" !== n || (i.style.display = ""), "" === i.style.display && Nt(i) && (o[s] = ot._data(i, "olddisplay", _(i.nodeName)))) : o[s] || (r = Nt(i), 
        (n && "none" !== n || !r) && ot._data(i, "olddisplay", r ? n : ot.css(i, "display"))));
        for (s = 0; a > s; s++) i = e[s], i.style && (t && "none" !== i.style.display && "" !== i.style.display || (i.style.display = t ? o[s] || "" : "none"));
        return e;
    }
    function N(e, t, n) {
        var i = un.exec(t);
        return i ? Math.max(0, i[1] - (n || 0)) + (i[2] || "px") : t;
    }
    function M(e, t, n, i, r) {
        for (var o = n === (i ? "border" : "content") ? 4 : "width" === t ? 1 : 0, s = 0; 4 > o; o += 2) "margin" === n && (s += ot.css(e, n + St[o], !0, r)), 
        i ? ("content" === n && (s -= ot.css(e, "padding" + St[o], !0, r)), "margin" !== n && (s -= ot.css(e, "border" + St[o] + "Width", !0, r))) : (s += ot.css(e, "padding" + St[o], !0, r), 
        "padding" !== n && (s += ot.css(e, "border" + St[o] + "Width", !0, r)));
        return s;
    }
    function P(e, t, n) {
        var i = !0, r = "width" === t ? e.offsetWidth : e.offsetHeight, o = tn(e), s = it.boxSizing() && "border-box" === ot.css(e, "boxSizing", !1, o);
        if (0 >= r || null == r) {
            if (r = nn(e, t, o), (0 > r || null == r) && (r = e.style[t]), on.test(r)) return r;
            i = s && (it.boxSizingReliable() || r === e.style[t]), r = parseFloat(r) || 0;
        }
        return r + M(e, t, n || (s ? "border" : "content"), i, o) + "px";
    }
    function A(e, t, n, i, r) {
        return new A.prototype.init(e, t, n, i, r);
    }
    function D() {
        return setTimeout(function() {
            mn = void 0;
        }), mn = ot.now();
    }
    function $(e, t) {
        var n, i = {
            height: e
        }, r = 0;
        for (t = t ? 1 : 0; 4 > r; r += 2 - t) n = St[r], i["margin" + n] = i["padding" + n] = e;
        return t && (i.opacity = i.width = e), i;
    }
    function j(e, t, n) {
        for (var i, r = (xn[t] || []).concat(xn["*"]), o = 0, s = r.length; s > o; o++) if (i = r[o].call(n, t, e)) return i;
    }
    function O(e, t, n) {
        var i, r, o, s, a, l, c, u, d = this, h = {}, p = e.style, f = e.nodeType && Nt(e), m = ot._data(e, "fxshow");
        n.queue || (a = ot._queueHooks(e, "fx"), null == a.unqueued && (a.unqueued = 0, 
        l = a.empty.fire, a.empty.fire = function() {
            a.unqueued || l();
        }), a.unqueued++, d.always(function() {
            d.always(function() {
                a.unqueued--, ot.queue(e, "fx").length || a.empty.fire();
            });
        })), 1 === e.nodeType && ("height" in t || "width" in t) && (n.overflow = [ p.overflow, p.overflowX, p.overflowY ], 
        c = ot.css(e, "display"), u = _(e.nodeName), "none" === c && (c = u), "inline" === c && "none" === ot.css(e, "float") && (it.inlineBlockNeedsLayout && "inline" !== u ? p.zoom = 1 : p.display = "inline-block")), 
        n.overflow && (p.overflow = "hidden", it.shrinkWrapBlocks() || d.always(function() {
            p.overflow = n.overflow[0], p.overflowX = n.overflow[1], p.overflowY = n.overflow[2];
        }));
        for (i in t) if (r = t[i], vn.exec(r)) {
            if (delete t[i], o = o || "toggle" === r, r === (f ? "hide" : "show")) {
                if ("show" !== r || !m || void 0 === m[i]) continue;
                f = !0;
            }
            h[i] = m && m[i] || ot.style(e, i);
        }
        if (!ot.isEmptyObject(h)) {
            m ? "hidden" in m && (f = m.hidden) : m = ot._data(e, "fxshow", {}), o && (m.hidden = !f), 
            f ? ot(e).show() : d.done(function() {
                ot(e).hide();
            }), d.done(function() {
                var t;
                ot._removeData(e, "fxshow");
                for (t in h) ot.style(e, t, h[t]);
            });
            for (i in h) s = j(f ? m[i] : 0, i, d), i in m || (m[i] = s.start, f && (s.end = s.start, 
            s.start = "width" === i || "height" === i ? 1 : 0));
        }
    }
    function F(e, t) {
        var n, i, r, o, s;
        for (n in e) if (i = ot.camelCase(n), r = t[i], o = e[n], ot.isArray(o) && (r = o[1], 
        o = e[n] = o[0]), n !== i && (e[i] = o, delete e[n]), s = ot.cssHooks[i], s && "expand" in s) {
            o = s.expand(o), delete e[i];
            for (n in o) n in e || (e[n] = o[n], t[n] = r);
        } else t[i] = r;
    }
    function H(e, t, n) {
        var i, r, o = 0, s = wn.length, a = ot.Deferred().always(function() {
            delete l.elem;
        }), l = function() {
            if (r) return !1;
            for (var t = mn || D(), n = Math.max(0, c.startTime + c.duration - t), i = n / c.duration || 0, o = 1 - i, s = 0, l = c.tweens.length; l > s; s++) c.tweens[s].run(o);
            return a.notifyWith(e, [ c, o, n ]), 1 > o && l ? n : (a.resolveWith(e, [ c ]), 
            !1);
        }, c = a.promise({
            elem: e,
            props: ot.extend({}, t),
            opts: ot.extend(!0, {
                specialEasing: {}
            }, n),
            originalProperties: t,
            originalOptions: n,
            startTime: mn || D(),
            duration: n.duration,
            tweens: [],
            createTween: function(t, n) {
                var i = ot.Tween(e, c.opts, t, n, c.opts.specialEasing[t] || c.opts.easing);
                return c.tweens.push(i), i;
            },
            stop: function(t) {
                var n = 0, i = t ? c.tweens.length : 0;
                if (r) return this;
                for (r = !0; i > n; n++) c.tweens[n].run(1);
                return t ? a.resolveWith(e, [ c, t ]) : a.rejectWith(e, [ c, t ]), this;
            }
        }), u = c.props;
        for (F(u, c.opts.specialEasing); s > o; o++) if (i = wn[o].call(c, e, u, c.opts)) return i;
        return ot.map(u, j, c), ot.isFunction(c.opts.start) && c.opts.start.call(e, c), 
        ot.fx.timer(ot.extend(l, {
            elem: e,
            anim: c,
            queue: c.opts.queue
        })), c.progress(c.opts.progress).done(c.opts.done, c.opts.complete).fail(c.opts.fail).always(c.opts.always);
    }
    function L(e) {
        return function(t, n) {
            "string" != typeof t && (n = t, t = "*");
            var i, r = 0, o = t.toLowerCase().match(wt) || [];
            if (ot.isFunction(n)) for (;i = o[r++]; ) "+" === i.charAt(0) ? (i = i.slice(1) || "*", 
            (e[i] = e[i] || []).unshift(n)) : (e[i] = e[i] || []).push(n);
        };
    }
    function q(e, t, n, i) {
        function r(a) {
            var l;
            return o[a] = !0, ot.each(e[a] || [], function(e, a) {
                var c = a(t, n, i);
                return "string" != typeof c || s || o[c] ? s ? !(l = c) : void 0 : (t.dataTypes.unshift(c), 
                r(c), !1);
            }), l;
        }
        var o = {}, s = e === Wn;
        return r(t.dataTypes[0]) || !o["*"] && r("*");
    }
    function B(e, t) {
        var n, i, r = ot.ajaxSettings.flatOptions || {};
        for (i in t) void 0 !== t[i] && ((r[i] ? e : n || (n = {}))[i] = t[i]);
        return n && ot.extend(!0, e, n), e;
    }
    function I(e, t, n) {
        for (var i, r, o, s, a = e.contents, l = e.dataTypes; "*" === l[0]; ) l.shift(), 
        void 0 === r && (r = e.mimeType || t.getResponseHeader("Content-Type"));
        if (r) for (s in a) if (a[s] && a[s].test(r)) {
            l.unshift(s);
            break;
        }
        if (l[0] in n) o = l[0]; else {
            for (s in n) {
                if (!l[0] || e.converters[s + " " + l[0]]) {
                    o = s;
                    break;
                }
                i || (i = s);
            }
            o = o || i;
        }
        return o ? (o !== l[0] && l.unshift(o), n[o]) : void 0;
    }
    function z(e, t, n, i) {
        var r, o, s, a, l, c = {}, u = e.dataTypes.slice();
        if (u[1]) for (s in e.converters) c[s.toLowerCase()] = e.converters[s];
        for (o = u.shift(); o; ) if (e.responseFields[o] && (n[e.responseFields[o]] = t), 
        !l && i && e.dataFilter && (t = e.dataFilter(t, e.dataType)), l = o, o = u.shift()) if ("*" === o) o = l; else if ("*" !== l && l !== o) {
            if (s = c[l + " " + o] || c["* " + o], !s) for (r in c) if (a = r.split(" "), a[1] === o && (s = c[l + " " + a[0]] || c["* " + a[0]])) {
                s === !0 ? s = c[r] : c[r] !== !0 && (o = a[0], u.unshift(a[1]));
                break;
            }
            if (s !== !0) if (s && e["throws"]) t = s(t); else try {
                t = s(t);
            } catch (d) {
                return {
                    state: "parsererror",
                    error: s ? d : "No conversion from " + l + " to " + o
                };
            }
        }
        return {
            state: "success",
            data: t
        };
    }
    function U(e, t, n, i) {
        var r;
        if (ot.isArray(t)) ot.each(t, function(t, r) {
            n || Kn.test(e) ? i(e, r) : U(e + "[" + ("object" == typeof r ? t : "") + "]", r, n, i);
        }); else if (n || "object" !== ot.type(t)) i(e, t); else for (r in t) U(e + "[" + r + "]", t[r], n, i);
    }
    function W() {
        try {
            return new e.XMLHttpRequest();
        } catch (t) {}
    }
    function V() {
        try {
            return new e.ActiveXObject("Microsoft.XMLHTTP");
        } catch (t) {}
    }
    function X(e) {
        return ot.isWindow(e) ? e : 9 === e.nodeType ? e.defaultView || e.parentWindow : !1;
    }
    var Q = [], K = Q.slice, Y = Q.concat, J = Q.push, G = Q.indexOf, Z = {}, et = Z.toString, tt = Z.hasOwnProperty, nt = "".trim, it = {}, rt = "1.11.0", ot = function(e, t) {
        return new ot.fn.init(e, t);
    }, st = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, at = /^-ms-/, lt = /-([\da-z])/gi, ct = function(e, t) {
        return t.toUpperCase();
    };
    ot.fn = ot.prototype = {
        jquery: rt,
        constructor: ot,
        selector: "",
        length: 0,
        toArray: function() {
            return K.call(this);
        },
        get: function(e) {
            return null != e ? 0 > e ? this[e + this.length] : this[e] : K.call(this);
        },
        pushStack: function(e) {
            var t = ot.merge(this.constructor(), e);
            return t.prevObject = this, t.context = this.context, t;
        },
        each: function(e, t) {
            return ot.each(this, e, t);
        },
        map: function(e) {
            return this.pushStack(ot.map(this, function(t, n) {
                return e.call(t, n, t);
            }));
        },
        slice: function() {
            return this.pushStack(K.apply(this, arguments));
        },
        first: function() {
            return this.eq(0);
        },
        last: function() {
            return this.eq(-1);
        },
        eq: function(e) {
            var t = this.length, n = +e + (0 > e ? t : 0);
            return this.pushStack(n >= 0 && t > n ? [ this[n] ] : []);
        },
        end: function() {
            return this.prevObject || this.constructor(null);
        },
        push: J,
        sort: Q.sort,
        splice: Q.splice
    }, ot.extend = ot.fn.extend = function() {
        var e, t, n, i, r, o, s = arguments[0] || {}, a = 1, l = arguments.length, c = !1;
        for ("boolean" == typeof s && (c = s, s = arguments[a] || {}, a++), "object" == typeof s || ot.isFunction(s) || (s = {}), 
        a === l && (s = this, a--); l > a; a++) if (null != (r = arguments[a])) for (i in r) e = s[i], 
        n = r[i], s !== n && (c && n && (ot.isPlainObject(n) || (t = ot.isArray(n))) ? (t ? (t = !1, 
        o = e && ot.isArray(e) ? e : []) : o = e && ot.isPlainObject(e) ? e : {}, s[i] = ot.extend(c, o, n)) : void 0 !== n && (s[i] = n));
        return s;
    }, ot.extend({
        expando: "jQuery" + (rt + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function(e) {
            throw new Error(e);
        },
        noop: function() {},
        isFunction: function(e) {
            return "function" === ot.type(e);
        },
        isArray: Array.isArray || function(e) {
            return "array" === ot.type(e);
        },
        isWindow: function(e) {
            return null != e && e == e.window;
        },
        isNumeric: function(e) {
            return e - parseFloat(e) >= 0;
        },
        isEmptyObject: function(e) {
            var t;
            for (t in e) return !1;
            return !0;
        },
        isPlainObject: function(e) {
            var t;
            if (!e || "object" !== ot.type(e) || e.nodeType || ot.isWindow(e)) return !1;
            try {
                if (e.constructor && !tt.call(e, "constructor") && !tt.call(e.constructor.prototype, "isPrototypeOf")) return !1;
            } catch (n) {
                return !1;
            }
            if (it.ownLast) for (t in e) return tt.call(e, t);
            for (t in e) ;
            return void 0 === t || tt.call(e, t);
        },
        type: function(e) {
            return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? Z[et.call(e)] || "object" : typeof e;
        },
        globalEval: function(t) {
            t && ot.trim(t) && (e.execScript || function(t) {
                e.eval.call(e, t);
            })(t);
        },
        camelCase: function(e) {
            return e.replace(at, "ms-").replace(lt, ct);
        },
        nodeName: function(e, t) {
            return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase();
        },
        each: function(e, t, i) {
            var r, o = 0, s = e.length, a = n(e);
            if (i) {
                if (a) for (;s > o && (r = t.apply(e[o], i), r !== !1); o++) ; else for (o in e) if (r = t.apply(e[o], i), 
                r === !1) break;
            } else if (a) for (;s > o && (r = t.call(e[o], o, e[o]), r !== !1); o++) ; else for (o in e) if (r = t.call(e[o], o, e[o]), 
            r === !1) break;
            return e;
        },
        trim: nt && !nt.call("﻿ ") ? function(e) {
            return null == e ? "" : nt.call(e);
        } : function(e) {
            return null == e ? "" : (e + "").replace(st, "");
        },
        makeArray: function(e, t) {
            var i = t || [];
            return null != e && (n(Object(e)) ? ot.merge(i, "string" == typeof e ? [ e ] : e) : J.call(i, e)), 
            i;
        },
        inArray: function(e, t, n) {
            var i;
            if (t) {
                if (G) return G.call(t, e, n);
                for (i = t.length, n = n ? 0 > n ? Math.max(0, i + n) : n : 0; i > n; n++) if (n in t && t[n] === e) return n;
            }
            return -1;
        },
        merge: function(e, t) {
            for (var n = +t.length, i = 0, r = e.length; n > i; ) e[r++] = t[i++];
            if (n !== n) for (;void 0 !== t[i]; ) e[r++] = t[i++];
            return e.length = r, e;
        },
        grep: function(e, t, n) {
            for (var i, r = [], o = 0, s = e.length, a = !n; s > o; o++) i = !t(e[o], o), i !== a && r.push(e[o]);
            return r;
        },
        map: function(e, t, i) {
            var r, o = 0, s = e.length, a = n(e), l = [];
            if (a) for (;s > o; o++) r = t(e[o], o, i), null != r && l.push(r); else for (o in e) r = t(e[o], o, i), 
            null != r && l.push(r);
            return Y.apply([], l);
        },
        guid: 1,
        proxy: function(e, t) {
            var n, i, r;
            return "string" == typeof t && (r = e[t], t = e, e = r), ot.isFunction(e) ? (n = K.call(arguments, 2), 
            i = function() {
                return e.apply(t || this, n.concat(K.call(arguments)));
            }, i.guid = e.guid = e.guid || ot.guid++, i) : void 0;
        },
        now: function() {
            return +new Date();
        },
        support: it
    }), ot.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(e, t) {
        Z["[object " + t + "]"] = t.toLowerCase();
    });
    var ut = function(e) {
        function t(e, t, n, i) {
            var r, o, s, a, l, c, d, f, m, g;
            if ((t ? t.ownerDocument || t : q) !== A && P(t), t = t || A, n = n || [], !e || "string" != typeof e) return n;
            if (1 !== (a = t.nodeType) && 9 !== a) return [];
            if ($ && !i) {
                if (r = yt.exec(e)) if (s = r[1]) {
                    if (9 === a) {
                        if (o = t.getElementById(s), !o || !o.parentNode) return n;
                        if (o.id === s) return n.push(o), n;
                    } else if (t.ownerDocument && (o = t.ownerDocument.getElementById(s)) && H(t, o) && o.id === s) return n.push(o), 
                    n;
                } else {
                    if (r[2]) return Z.apply(n, t.getElementsByTagName(e)), n;
                    if ((s = r[3]) && k.getElementsByClassName && t.getElementsByClassName) return Z.apply(n, t.getElementsByClassName(s)), 
                    n;
                }
                if (k.qsa && (!j || !j.test(e))) {
                    if (f = d = L, m = t, g = 9 === a && e, 1 === a && "object" !== t.nodeName.toLowerCase()) {
                        for (c = h(e), (d = t.getAttribute("id")) ? f = d.replace(wt, "\\$&") : t.setAttribute("id", f), 
                        f = "[id='" + f + "'] ", l = c.length; l--; ) c[l] = f + p(c[l]);
                        m = bt.test(e) && u(t.parentNode) || t, g = c.join(",");
                    }
                    if (g) try {
                        return Z.apply(n, m.querySelectorAll(g)), n;
                    } catch (v) {} finally {
                        d || t.removeAttribute("id");
                    }
                }
            }
            return x(e.replace(lt, "$1"), t, n, i);
        }
        function n() {
            function e(n, i) {
                return t.push(n + " ") > T.cacheLength && delete e[t.shift()], e[n + " "] = i;
            }
            var t = [];
            return e;
        }
        function i(e) {
            return e[L] = !0, e;
        }
        function r(e) {
            var t = A.createElement("div");
            try {
                return !!e(t);
            } catch (n) {
                return !1;
            } finally {
                t.parentNode && t.parentNode.removeChild(t), t = null;
            }
        }
        function o(e, t) {
            for (var n = e.split("|"), i = e.length; i--; ) T.attrHandle[n[i]] = t;
        }
        function s(e, t) {
            var n = t && e, i = n && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || Q) - (~e.sourceIndex || Q);
            if (i) return i;
            if (n) for (;n = n.nextSibling; ) if (n === t) return -1;
            return e ? 1 : -1;
        }
        function a(e) {
            return function(t) {
                var n = t.nodeName.toLowerCase();
                return "input" === n && t.type === e;
            };
        }
        function l(e) {
            return function(t) {
                var n = t.nodeName.toLowerCase();
                return ("input" === n || "button" === n) && t.type === e;
            };
        }
        function c(e) {
            return i(function(t) {
                return t = +t, i(function(n, i) {
                    for (var r, o = e([], n.length, t), s = o.length; s--; ) n[r = o[s]] && (n[r] = !(i[r] = n[r]));
                });
            });
        }
        function u(e) {
            return e && typeof e.getElementsByTagName !== X && e;
        }
        function d() {}
        function h(e, n) {
            var i, r, o, s, a, l, c, u = U[e + " "];
            if (u) return n ? 0 : u.slice(0);
            for (a = e, l = [], c = T.preFilter; a; ) {
                (!i || (r = ct.exec(a))) && (r && (a = a.slice(r[0].length) || a), l.push(o = [])), 
                i = !1, (r = ut.exec(a)) && (i = r.shift(), o.push({
                    value: i,
                    type: r[0].replace(lt, " ")
                }), a = a.slice(i.length));
                for (s in T.filter) !(r = ft[s].exec(a)) || c[s] && !(r = c[s](r)) || (i = r.shift(), 
                o.push({
                    value: i,
                    type: s,
                    matches: r
                }), a = a.slice(i.length));
                if (!i) break;
            }
            return n ? a.length : a ? t.error(e) : U(e, l).slice(0);
        }
        function p(e) {
            for (var t = 0, n = e.length, i = ""; n > t; t++) i += e[t].value;
            return i;
        }
        function f(e, t, n) {
            var i = t.dir, r = n && "parentNode" === i, o = I++;
            return t.first ? function(t, n, o) {
                for (;t = t[i]; ) if (1 === t.nodeType || r) return e(t, n, o);
            } : function(t, n, s) {
                var a, l, c = [ B, o ];
                if (s) {
                    for (;t = t[i]; ) if ((1 === t.nodeType || r) && e(t, n, s)) return !0;
                } else for (;t = t[i]; ) if (1 === t.nodeType || r) {
                    if (l = t[L] || (t[L] = {}), (a = l[i]) && a[0] === B && a[1] === o) return c[2] = a[2];
                    if (l[i] = c, c[2] = e(t, n, s)) return !0;
                }
            };
        }
        function m(e) {
            return e.length > 1 ? function(t, n, i) {
                for (var r = e.length; r--; ) if (!e[r](t, n, i)) return !1;
                return !0;
            } : e[0];
        }
        function g(e, t, n, i, r) {
            for (var o, s = [], a = 0, l = e.length, c = null != t; l > a; a++) (o = e[a]) && (!n || n(o, i, r)) && (s.push(o), 
            c && t.push(a));
            return s;
        }
        function v(e, t, n, r, o, s) {
            return r && !r[L] && (r = v(r)), o && !o[L] && (o = v(o, s)), i(function(i, s, a, l) {
                var c, u, d, h = [], p = [], f = s.length, m = i || w(t || "*", a.nodeType ? [ a ] : a, []), v = !e || !i && t ? m : g(m, h, e, a, l), y = n ? o || (i ? e : f || r) ? [] : s : v;
                if (n && n(v, y, a, l), r) for (c = g(y, p), r(c, [], a, l), u = c.length; u--; ) (d = c[u]) && (y[p[u]] = !(v[p[u]] = d));
                if (i) {
                    if (o || e) {
                        if (o) {
                            for (c = [], u = y.length; u--; ) (d = y[u]) && c.push(v[u] = d);
                            o(null, y = [], c, l);
                        }
                        for (u = y.length; u--; ) (d = y[u]) && (c = o ? tt.call(i, d) : h[u]) > -1 && (i[c] = !(s[c] = d));
                    }
                } else y = g(y === s ? y.splice(f, y.length) : y), o ? o(null, s, y, l) : Z.apply(s, y);
            });
        }
        function y(e) {
            for (var t, n, i, r = e.length, o = T.relative[e[0].type], s = o || T.relative[" "], a = o ? 1 : 0, l = f(function(e) {
                return e === t;
            }, s, !0), c = f(function(e) {
                return tt.call(t, e) > -1;
            }, s, !0), u = [ function(e, n, i) {
                return !o && (i || n !== S) || ((t = n).nodeType ? l(e, n, i) : c(e, n, i));
            } ]; r > a; a++) if (n = T.relative[e[a].type]) u = [ f(m(u), n) ]; else {
                if (n = T.filter[e[a].type].apply(null, e[a].matches), n[L]) {
                    for (i = ++a; r > i && !T.relative[e[i].type]; i++) ;
                    return v(a > 1 && m(u), a > 1 && p(e.slice(0, a - 1).concat({
                        value: " " === e[a - 2].type ? "*" : ""
                    })).replace(lt, "$1"), n, i > a && y(e.slice(a, i)), r > i && y(e = e.slice(i)), r > i && p(e));
                }
                u.push(n);
            }
            return m(u);
        }
        function b(e, n) {
            var r = n.length > 0, o = e.length > 0, s = function(i, s, a, l, c) {
                var u, d, h, p = 0, f = "0", m = i && [], v = [], y = S, b = i || o && T.find.TAG("*", c), w = B += null == y ? 1 : Math.random() || .1, x = b.length;
                for (c && (S = s !== A && s); f !== x && null != (u = b[f]); f++) {
                    if (o && u) {
                        for (d = 0; h = e[d++]; ) if (h(u, s, a)) {
                            l.push(u);
                            break;
                        }
                        c && (B = w);
                    }
                    r && ((u = !h && u) && p--, i && m.push(u));
                }
                if (p += f, r && f !== p) {
                    for (d = 0; h = n[d++]; ) h(m, v, s, a);
                    if (i) {
                        if (p > 0) for (;f--; ) m[f] || v[f] || (v[f] = J.call(l));
                        v = g(v);
                    }
                    Z.apply(l, v), c && !i && v.length > 0 && p + n.length > 1 && t.uniqueSort(l);
                }
                return c && (B = w, S = y), m;
            };
            return r ? i(s) : s;
        }
        function w(e, n, i) {
            for (var r = 0, o = n.length; o > r; r++) t(e, n[r], i);
            return i;
        }
        function x(e, t, n, i) {
            var r, o, s, a, l, c = h(e);
            if (!i && 1 === c.length) {
                if (o = c[0] = c[0].slice(0), o.length > 2 && "ID" === (s = o[0]).type && k.getById && 9 === t.nodeType && $ && T.relative[o[1].type]) {
                    if (t = (T.find.ID(s.matches[0].replace(xt, Ct), t) || [])[0], !t) return n;
                    e = e.slice(o.shift().value.length);
                }
                for (r = ft.needsContext.test(e) ? 0 : o.length; r-- && (s = o[r], !T.relative[a = s.type]); ) if ((l = T.find[a]) && (i = l(s.matches[0].replace(xt, Ct), bt.test(o[0].type) && u(t.parentNode) || t))) {
                    if (o.splice(r, 1), e = i.length && p(o), !e) return Z.apply(n, i), n;
                    break;
                }
            }
            return R(e, c)(i, t, !$, n, bt.test(e) && u(t.parentNode) || t), n;
        }
        var C, k, T, _, E, R, S, N, M, P, A, D, $, j, O, F, H, L = "sizzle" + -new Date(), q = e.document, B = 0, I = 0, z = n(), U = n(), W = n(), V = function(e, t) {
            return e === t && (M = !0), 0;
        }, X = "undefined", Q = 1 << 31, K = {}.hasOwnProperty, Y = [], J = Y.pop, G = Y.push, Z = Y.push, et = Y.slice, tt = Y.indexOf || function(e) {
            for (var t = 0, n = this.length; n > t; t++) if (this[t] === e) return t;
            return -1;
        }, nt = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", it = "[\\x20\\t\\r\\n\\f]", rt = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", ot = rt.replace("w", "w#"), st = "\\[" + it + "*(" + rt + ")" + it + "*(?:([*^$|!~]?=)" + it + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + ot + ")|)|)" + it + "*\\]", at = ":(" + rt + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + st.replace(3, 8) + ")*)|.*)\\)|)", lt = new RegExp("^" + it + "+|((?:^|[^\\\\])(?:\\\\.)*)" + it + "+$", "g"), ct = new RegExp("^" + it + "*," + it + "*"), ut = new RegExp("^" + it + "*([>+~]|" + it + ")" + it + "*"), dt = new RegExp("=" + it + "*([^\\]'\"]*?)" + it + "*\\]", "g"), ht = new RegExp(at), pt = new RegExp("^" + ot + "$"), ft = {
            ID: new RegExp("^#(" + rt + ")"),
            CLASS: new RegExp("^\\.(" + rt + ")"),
            TAG: new RegExp("^(" + rt.replace("w", "w*") + ")"),
            ATTR: new RegExp("^" + st),
            PSEUDO: new RegExp("^" + at),
            CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + it + "*(even|odd|(([+-]|)(\\d*)n|)" + it + "*(?:([+-]|)" + it + "*(\\d+)|))" + it + "*\\)|)", "i"),
            bool: new RegExp("^(?:" + nt + ")$", "i"),
            needsContext: new RegExp("^" + it + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + it + "*((?:-\\d)?\\d*)" + it + "*\\)|)(?=[^-]|$)", "i")
        }, mt = /^(?:input|select|textarea|button)$/i, gt = /^h\d$/i, vt = /^[^{]+\{\s*\[native \w/, yt = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, bt = /[+~]/, wt = /'|\\/g, xt = new RegExp("\\\\([\\da-f]{1,6}" + it + "?|(" + it + ")|.)", "ig"), Ct = function(e, t, n) {
            var i = "0x" + t - 65536;
            return i !== i || n ? t : 0 > i ? String.fromCharCode(i + 65536) : String.fromCharCode(i >> 10 | 55296, 1023 & i | 56320);
        };
        try {
            Z.apply(Y = et.call(q.childNodes), q.childNodes), Y[q.childNodes.length].nodeType;
        } catch (kt) {
            Z = {
                apply: Y.length ? function(e, t) {
                    G.apply(e, et.call(t));
                } : function(e, t) {
                    for (var n = e.length, i = 0; e[n++] = t[i++]; ) ;
                    e.length = n - 1;
                }
            };
        }
        k = t.support = {}, E = t.isXML = function(e) {
            var t = e && (e.ownerDocument || e).documentElement;
            return t ? "HTML" !== t.nodeName : !1;
        }, P = t.setDocument = function(e) {
            var t, n = e ? e.ownerDocument || e : q, i = n.defaultView;
            return n !== A && 9 === n.nodeType && n.documentElement ? (A = n, D = n.documentElement, 
            $ = !E(n), i && i !== i.top && (i.addEventListener ? i.addEventListener("unload", function() {
                P();
            }, !1) : i.attachEvent && i.attachEvent("onunload", function() {
                P();
            })), k.attributes = r(function(e) {
                return e.className = "i", !e.getAttribute("className");
            }), k.getElementsByTagName = r(function(e) {
                return e.appendChild(n.createComment("")), !e.getElementsByTagName("*").length;
            }), k.getElementsByClassName = vt.test(n.getElementsByClassName) && r(function(e) {
                return e.innerHTML = "<div class='a'></div><div class='a i'></div>", e.firstChild.className = "i", 
                2 === e.getElementsByClassName("i").length;
            }), k.getById = r(function(e) {
                return D.appendChild(e).id = L, !n.getElementsByName || !n.getElementsByName(L).length;
            }), k.getById ? (T.find.ID = function(e, t) {
                if (typeof t.getElementById !== X && $) {
                    var n = t.getElementById(e);
                    return n && n.parentNode ? [ n ] : [];
                }
            }, T.filter.ID = function(e) {
                var t = e.replace(xt, Ct);
                return function(e) {
                    return e.getAttribute("id") === t;
                };
            }) : (delete T.find.ID, T.filter.ID = function(e) {
                var t = e.replace(xt, Ct);
                return function(e) {
                    var n = typeof e.getAttributeNode !== X && e.getAttributeNode("id");
                    return n && n.value === t;
                };
            }), T.find.TAG = k.getElementsByTagName ? function(e, t) {
                return typeof t.getElementsByTagName !== X ? t.getElementsByTagName(e) : void 0;
            } : function(e, t) {
                var n, i = [], r = 0, o = t.getElementsByTagName(e);
                if ("*" === e) {
                    for (;n = o[r++]; ) 1 === n.nodeType && i.push(n);
                    return i;
                }
                return o;
            }, T.find.CLASS = k.getElementsByClassName && function(e, t) {
                return typeof t.getElementsByClassName !== X && $ ? t.getElementsByClassName(e) : void 0;
            }, O = [], j = [], (k.qsa = vt.test(n.querySelectorAll)) && (r(function(e) {
                e.innerHTML = "<select t=''><option selected=''></option></select>", e.querySelectorAll("[t^='']").length && j.push("[*^$]=" + it + "*(?:''|\"\")"), 
                e.querySelectorAll("[selected]").length || j.push("\\[" + it + "*(?:value|" + nt + ")"), 
                e.querySelectorAll(":checked").length || j.push(":checked");
            }), r(function(e) {
                var t = n.createElement("input");
                t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && j.push("name" + it + "*[*^$|!~]?="), 
                e.querySelectorAll(":enabled").length || j.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), 
                j.push(",.*:");
            })), (k.matchesSelector = vt.test(F = D.webkitMatchesSelector || D.mozMatchesSelector || D.oMatchesSelector || D.msMatchesSelector)) && r(function(e) {
                k.disconnectedMatch = F.call(e, "div"), F.call(e, "[s!='']:x"), O.push("!=", at);
            }), j = j.length && new RegExp(j.join("|")), O = O.length && new RegExp(O.join("|")), 
            t = vt.test(D.compareDocumentPosition), H = t || vt.test(D.contains) ? function(e, t) {
                var n = 9 === e.nodeType ? e.documentElement : e, i = t && t.parentNode;
                return e === i || !(!i || 1 !== i.nodeType || !(n.contains ? n.contains(i) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(i)));
            } : function(e, t) {
                if (t) for (;t = t.parentNode; ) if (t === e) return !0;
                return !1;
            }, V = t ? function(e, t) {
                if (e === t) return M = !0, 0;
                var i = !e.compareDocumentPosition - !t.compareDocumentPosition;
                return i ? i : (i = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1, 
                1 & i || !k.sortDetached && t.compareDocumentPosition(e) === i ? e === n || e.ownerDocument === q && H(q, e) ? -1 : t === n || t.ownerDocument === q && H(q, t) ? 1 : N ? tt.call(N, e) - tt.call(N, t) : 0 : 4 & i ? -1 : 1);
            } : function(e, t) {
                if (e === t) return M = !0, 0;
                var i, r = 0, o = e.parentNode, a = t.parentNode, l = [ e ], c = [ t ];
                if (!o || !a) return e === n ? -1 : t === n ? 1 : o ? -1 : a ? 1 : N ? tt.call(N, e) - tt.call(N, t) : 0;
                if (o === a) return s(e, t);
                for (i = e; i = i.parentNode; ) l.unshift(i);
                for (i = t; i = i.parentNode; ) c.unshift(i);
                for (;l[r] === c[r]; ) r++;
                return r ? s(l[r], c[r]) : l[r] === q ? -1 : c[r] === q ? 1 : 0;
            }, n) : A;
        }, t.matches = function(e, n) {
            return t(e, null, null, n);
        }, t.matchesSelector = function(e, n) {
            if ((e.ownerDocument || e) !== A && P(e), n = n.replace(dt, "='$1']"), !(!k.matchesSelector || !$ || O && O.test(n) || j && j.test(n))) try {
                var i = F.call(e, n);
                if (i || k.disconnectedMatch || e.document && 11 !== e.document.nodeType) return i;
            } catch (r) {}
            return t(n, A, null, [ e ]).length > 0;
        }, t.contains = function(e, t) {
            return (e.ownerDocument || e) !== A && P(e), H(e, t);
        }, t.attr = function(e, t) {
            (e.ownerDocument || e) !== A && P(e);
            var n = T.attrHandle[t.toLowerCase()], i = n && K.call(T.attrHandle, t.toLowerCase()) ? n(e, t, !$) : void 0;
            return void 0 !== i ? i : k.attributes || !$ ? e.getAttribute(t) : (i = e.getAttributeNode(t)) && i.specified ? i.value : null;
        }, t.error = function(e) {
            throw new Error("Syntax error, unrecognized expression: " + e);
        }, t.uniqueSort = function(e) {
            var t, n = [], i = 0, r = 0;
            if (M = !k.detectDuplicates, N = !k.sortStable && e.slice(0), e.sort(V), M) {
                for (;t = e[r++]; ) t === e[r] && (i = n.push(r));
                for (;i--; ) e.splice(n[i], 1);
            }
            return N = null, e;
        }, _ = t.getText = function(e) {
            var t, n = "", i = 0, r = e.nodeType;
            if (r) {
                if (1 === r || 9 === r || 11 === r) {
                    if ("string" == typeof e.textContent) return e.textContent;
                    for (e = e.firstChild; e; e = e.nextSibling) n += _(e);
                } else if (3 === r || 4 === r) return e.nodeValue;
            } else for (;t = e[i++]; ) n += _(t);
            return n;
        }, T = t.selectors = {
            cacheLength: 50,
            createPseudo: i,
            match: ft,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(e) {
                    return e[1] = e[1].replace(xt, Ct), e[3] = (e[4] || e[5] || "").replace(xt, Ct), 
                    "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4);
                },
                CHILD: function(e) {
                    return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || t.error(e[0]), 
                    e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && t.error(e[0]), 
                    e;
                },
                PSEUDO: function(e) {
                    var t, n = !e[5] && e[2];
                    return ft.CHILD.test(e[0]) ? null : (e[3] && void 0 !== e[4] ? e[2] = e[4] : n && ht.test(n) && (t = h(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), 
                    e[2] = n.slice(0, t)), e.slice(0, 3));
                }
            },
            filter: {
                TAG: function(e) {
                    var t = e.replace(xt, Ct).toLowerCase();
                    return "*" === e ? function() {
                        return !0;
                    } : function(e) {
                        return e.nodeName && e.nodeName.toLowerCase() === t;
                    };
                },
                CLASS: function(e) {
                    var t = z[e + " "];
                    return t || (t = new RegExp("(^|" + it + ")" + e + "(" + it + "|$)")) && z(e, function(e) {
                        return t.test("string" == typeof e.className && e.className || typeof e.getAttribute !== X && e.getAttribute("class") || "");
                    });
                },
                ATTR: function(e, n, i) {
                    return function(r) {
                        var o = t.attr(r, e);
                        return null == o ? "!=" === n : n ? (o += "", "=" === n ? o === i : "!=" === n ? o !== i : "^=" === n ? i && 0 === o.indexOf(i) : "*=" === n ? i && o.indexOf(i) > -1 : "$=" === n ? i && o.slice(-i.length) === i : "~=" === n ? (" " + o + " ").indexOf(i) > -1 : "|=" === n ? o === i || o.slice(0, i.length + 1) === i + "-" : !1) : !0;
                    };
                },
                CHILD: function(e, t, n, i, r) {
                    var o = "nth" !== e.slice(0, 3), s = "last" !== e.slice(-4), a = "of-type" === t;
                    return 1 === i && 0 === r ? function(e) {
                        return !!e.parentNode;
                    } : function(t, n, l) {
                        var c, u, d, h, p, f, m = o !== s ? "nextSibling" : "previousSibling", g = t.parentNode, v = a && t.nodeName.toLowerCase(), y = !l && !a;
                        if (g) {
                            if (o) {
                                for (;m; ) {
                                    for (d = t; d = d[m]; ) if (a ? d.nodeName.toLowerCase() === v : 1 === d.nodeType) return !1;
                                    f = m = "only" === e && !f && "nextSibling";
                                }
                                return !0;
                            }
                            if (f = [ s ? g.firstChild : g.lastChild ], s && y) {
                                for (u = g[L] || (g[L] = {}), c = u[e] || [], p = c[0] === B && c[1], h = c[0] === B && c[2], 
                                d = p && g.childNodes[p]; d = ++p && d && d[m] || (h = p = 0) || f.pop(); ) if (1 === d.nodeType && ++h && d === t) {
                                    u[e] = [ B, p, h ];
                                    break;
                                }
                            } else if (y && (c = (t[L] || (t[L] = {}))[e]) && c[0] === B) h = c[1]; else for (;(d = ++p && d && d[m] || (h = p = 0) || f.pop()) && ((a ? d.nodeName.toLowerCase() !== v : 1 !== d.nodeType) || !++h || (y && ((d[L] || (d[L] = {}))[e] = [ B, h ]), 
                            d !== t)); ) ;
                            return h -= r, h === i || h % i === 0 && h / i >= 0;
                        }
                    };
                },
                PSEUDO: function(e, n) {
                    var r, o = T.pseudos[e] || T.setFilters[e.toLowerCase()] || t.error("unsupported pseudo: " + e);
                    return o[L] ? o(n) : o.length > 1 ? (r = [ e, e, "", n ], T.setFilters.hasOwnProperty(e.toLowerCase()) ? i(function(e, t) {
                        for (var i, r = o(e, n), s = r.length; s--; ) i = tt.call(e, r[s]), e[i] = !(t[i] = r[s]);
                    }) : function(e) {
                        return o(e, 0, r);
                    }) : o;
                }
            },
            pseudos: {
                not: i(function(e) {
                    var t = [], n = [], r = R(e.replace(lt, "$1"));
                    return r[L] ? i(function(e, t, n, i) {
                        for (var o, s = r(e, null, i, []), a = e.length; a--; ) (o = s[a]) && (e[a] = !(t[a] = o));
                    }) : function(e, i, o) {
                        return t[0] = e, r(t, null, o, n), !n.pop();
                    };
                }),
                has: i(function(e) {
                    return function(n) {
                        return t(e, n).length > 0;
                    };
                }),
                contains: i(function(e) {
                    return function(t) {
                        return (t.textContent || t.innerText || _(t)).indexOf(e) > -1;
                    };
                }),
                lang: i(function(e) {
                    return pt.test(e || "") || t.error("unsupported lang: " + e), e = e.replace(xt, Ct).toLowerCase(), 
                    function(t) {
                        var n;
                        do if (n = $ ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return n = n.toLowerCase(), 
                        n === e || 0 === n.indexOf(e + "-"); while ((t = t.parentNode) && 1 === t.nodeType);
                        return !1;
                    };
                }),
                target: function(t) {
                    var n = e.location && e.location.hash;
                    return n && n.slice(1) === t.id;
                },
                root: function(e) {
                    return e === D;
                },
                focus: function(e) {
                    return e === A.activeElement && (!A.hasFocus || A.hasFocus()) && !!(e.type || e.href || ~e.tabIndex);
                },
                enabled: function(e) {
                    return e.disabled === !1;
                },
                disabled: function(e) {
                    return e.disabled === !0;
                },
                checked: function(e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && !!e.checked || "option" === t && !!e.selected;
                },
                selected: function(e) {
                    return e.parentNode && e.parentNode.selectedIndex, e.selected === !0;
                },
                empty: function(e) {
                    for (e = e.firstChild; e; e = e.nextSibling) if (e.nodeType < 6) return !1;
                    return !0;
                },
                parent: function(e) {
                    return !T.pseudos.empty(e);
                },
                header: function(e) {
                    return gt.test(e.nodeName);
                },
                input: function(e) {
                    return mt.test(e.nodeName);
                },
                button: function(e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && "button" === e.type || "button" === t;
                },
                text: function(e) {
                    var t;
                    return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase());
                },
                first: c(function() {
                    return [ 0 ];
                }),
                last: c(function(e, t) {
                    return [ t - 1 ];
                }),
                eq: c(function(e, t, n) {
                    return [ 0 > n ? n + t : n ];
                }),
                even: c(function(e, t) {
                    for (var n = 0; t > n; n += 2) e.push(n);
                    return e;
                }),
                odd: c(function(e, t) {
                    for (var n = 1; t > n; n += 2) e.push(n);
                    return e;
                }),
                lt: c(function(e, t, n) {
                    for (var i = 0 > n ? n + t : n; --i >= 0; ) e.push(i);
                    return e;
                }),
                gt: c(function(e, t, n) {
                    for (var i = 0 > n ? n + t : n; ++i < t; ) e.push(i);
                    return e;
                })
            }
        }, T.pseudos.nth = T.pseudos.eq;
        for (C in {
            radio: !0,
            checkbox: !0,
            file: !0,
            password: !0,
            image: !0
        }) T.pseudos[C] = a(C);
        for (C in {
            submit: !0,
            reset: !0
        }) T.pseudos[C] = l(C);
        return d.prototype = T.filters = T.pseudos, T.setFilters = new d(), R = t.compile = function(e, t) {
            var n, i = [], r = [], o = W[e + " "];
            if (!o) {
                for (t || (t = h(e)), n = t.length; n--; ) o = y(t[n]), o[L] ? i.push(o) : r.push(o);
                o = W(e, b(r, i));
            }
            return o;
        }, k.sortStable = L.split("").sort(V).join("") === L, k.detectDuplicates = !!M, 
        P(), k.sortDetached = r(function(e) {
            return 1 & e.compareDocumentPosition(A.createElement("div"));
        }), r(function(e) {
            return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href");
        }) || o("type|href|height|width", function(e, t, n) {
            return n ? void 0 : e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2);
        }), k.attributes && r(function(e) {
            return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value");
        }) || o("value", function(e, t, n) {
            return n || "input" !== e.nodeName.toLowerCase() ? void 0 : e.defaultValue;
        }), r(function(e) {
            return null == e.getAttribute("disabled");
        }) || o(nt, function(e, t, n) {
            var i;
            return n ? void 0 : e[t] === !0 ? t.toLowerCase() : (i = e.getAttributeNode(t)) && i.specified ? i.value : null;
        }), t;
    }(e);
    ot.find = ut, ot.expr = ut.selectors, ot.expr[":"] = ot.expr.pseudos, ot.unique = ut.uniqueSort, 
    ot.text = ut.getText, ot.isXMLDoc = ut.isXML, ot.contains = ut.contains;
    var dt = ot.expr.match.needsContext, ht = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, pt = /^.[^:#\[\.,]*$/;
    ot.filter = function(e, t, n) {
        var i = t[0];
        return n && (e = ":not(" + e + ")"), 1 === t.length && 1 === i.nodeType ? ot.find.matchesSelector(i, e) ? [ i ] : [] : ot.find.matches(e, ot.grep(t, function(e) {
            return 1 === e.nodeType;
        }));
    }, ot.fn.extend({
        find: function(e) {
            var t, n = [], i = this, r = i.length;
            if ("string" != typeof e) return this.pushStack(ot(e).filter(function() {
                for (t = 0; r > t; t++) if (ot.contains(i[t], this)) return !0;
            }));
            for (t = 0; r > t; t++) ot.find(e, i[t], n);
            return n = this.pushStack(r > 1 ? ot.unique(n) : n), n.selector = this.selector ? this.selector + " " + e : e, 
            n;
        },
        filter: function(e) {
            return this.pushStack(i(this, e || [], !1));
        },
        not: function(e) {
            return this.pushStack(i(this, e || [], !0));
        },
        is: function(e) {
            return !!i(this, "string" == typeof e && dt.test(e) ? ot(e) : e || [], !1).length;
        }
    });
    var ft, mt = e.document, gt = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/, vt = ot.fn.init = function(e, t) {
        var n, i;
        if (!e) return this;
        if ("string" == typeof e) {
            if (n = "<" === e.charAt(0) && ">" === e.charAt(e.length - 1) && e.length >= 3 ? [ null, e, null ] : gt.exec(e), 
            !n || !n[1] && t) return !t || t.jquery ? (t || ft).find(e) : this.constructor(t).find(e);
            if (n[1]) {
                if (t = t instanceof ot ? t[0] : t, ot.merge(this, ot.parseHTML(n[1], t && t.nodeType ? t.ownerDocument || t : mt, !0)), 
                ht.test(n[1]) && ot.isPlainObject(t)) for (n in t) ot.isFunction(this[n]) ? this[n](t[n]) : this.attr(n, t[n]);
                return this;
            }
            if (i = mt.getElementById(n[2]), i && i.parentNode) {
                if (i.id !== n[2]) return ft.find(e);
                this.length = 1, this[0] = i;
            }
            return this.context = mt, this.selector = e, this;
        }
        return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : ot.isFunction(e) ? "undefined" != typeof ft.ready ? ft.ready(e) : e(ot) : (void 0 !== e.selector && (this.selector = e.selector, 
        this.context = e.context), ot.makeArray(e, this));
    };
    vt.prototype = ot.fn, ft = ot(mt);
    var yt = /^(?:parents|prev(?:Until|All))/, bt = {
        children: !0,
        contents: !0,
        next: !0,
        prev: !0
    };
    ot.extend({
        dir: function(e, t, n) {
            for (var i = [], r = e[t]; r && 9 !== r.nodeType && (void 0 === n || 1 !== r.nodeType || !ot(r).is(n)); ) 1 === r.nodeType && i.push(r), 
            r = r[t];
            return i;
        },
        sibling: function(e, t) {
            for (var n = []; e; e = e.nextSibling) 1 === e.nodeType && e !== t && n.push(e);
            return n;
        }
    }), ot.fn.extend({
        has: function(e) {
            var t, n = ot(e, this), i = n.length;
            return this.filter(function() {
                for (t = 0; i > t; t++) if (ot.contains(this, n[t])) return !0;
            });
        },
        closest: function(e, t) {
            for (var n, i = 0, r = this.length, o = [], s = dt.test(e) || "string" != typeof e ? ot(e, t || this.context) : 0; r > i; i++) for (n = this[i]; n && n !== t; n = n.parentNode) if (n.nodeType < 11 && (s ? s.index(n) > -1 : 1 === n.nodeType && ot.find.matchesSelector(n, e))) {
                o.push(n);
                break;
            }
            return this.pushStack(o.length > 1 ? ot.unique(o) : o);
        },
        index: function(e) {
            return e ? "string" == typeof e ? ot.inArray(this[0], ot(e)) : ot.inArray(e.jquery ? e[0] : e, this) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1;
        },
        add: function(e, t) {
            return this.pushStack(ot.unique(ot.merge(this.get(), ot(e, t))));
        },
        addBack: function(e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e));
        }
    }), ot.each({
        parent: function(e) {
            var t = e.parentNode;
            return t && 11 !== t.nodeType ? t : null;
        },
        parents: function(e) {
            return ot.dir(e, "parentNode");
        },
        parentsUntil: function(e, t, n) {
            return ot.dir(e, "parentNode", n);
        },
        next: function(e) {
            return r(e, "nextSibling");
        },
        prev: function(e) {
            return r(e, "previousSibling");
        },
        nextAll: function(e) {
            return ot.dir(e, "nextSibling");
        },
        prevAll: function(e) {
            return ot.dir(e, "previousSibling");
        },
        nextUntil: function(e, t, n) {
            return ot.dir(e, "nextSibling", n);
        },
        prevUntil: function(e, t, n) {
            return ot.dir(e, "previousSibling", n);
        },
        siblings: function(e) {
            return ot.sibling((e.parentNode || {}).firstChild, e);
        },
        children: function(e) {
            return ot.sibling(e.firstChild);
        },
        contents: function(e) {
            return ot.nodeName(e, "iframe") ? e.contentDocument || e.contentWindow.document : ot.merge([], e.childNodes);
        }
    }, function(e, t) {
        ot.fn[e] = function(n, i) {
            var r = ot.map(this, t, n);
            return "Until" !== e.slice(-5) && (i = n), i && "string" == typeof i && (r = ot.filter(i, r)), 
            this.length > 1 && (bt[e] || (r = ot.unique(r)), yt.test(e) && (r = r.reverse())), 
            this.pushStack(r);
        };
    });
    var wt = /\S+/g, xt = {};
    ot.Callbacks = function(e) {
        e = "string" == typeof e ? xt[e] || o(e) : ot.extend({}, e);
        var t, n, i, r, s, a, l = [], c = !e.once && [], u = function(o) {
            for (n = e.memory && o, i = !0, s = a || 0, a = 0, r = l.length, t = !0; l && r > s; s++) if (l[s].apply(o[0], o[1]) === !1 && e.stopOnFalse) {
                n = !1;
                break;
            }
            t = !1, l && (c ? c.length && u(c.shift()) : n ? l = [] : d.disable());
        }, d = {
            add: function() {
                if (l) {
                    var i = l.length;
                    !function o(t) {
                        ot.each(t, function(t, n) {
                            var i = ot.type(n);
                            "function" === i ? e.unique && d.has(n) || l.push(n) : n && n.length && "string" !== i && o(n);
                        });
                    }(arguments), t ? r = l.length : n && (a = i, u(n));
                }
                return this;
            },
            remove: function() {
                return l && ot.each(arguments, function(e, n) {
                    for (var i; (i = ot.inArray(n, l, i)) > -1; ) l.splice(i, 1), t && (r >= i && r--, 
                    s >= i && s--);
                }), this;
            },
            has: function(e) {
                return e ? ot.inArray(e, l) > -1 : !(!l || !l.length);
            },
            empty: function() {
                return l = [], r = 0, this;
            },
            disable: function() {
                return l = c = n = void 0, this;
            },
            disabled: function() {
                return !l;
            },
            lock: function() {
                return c = void 0, n || d.disable(), this;
            },
            locked: function() {
                return !c;
            },
            fireWith: function(e, n) {
                return !l || i && !c || (n = n || [], n = [ e, n.slice ? n.slice() : n ], t ? c.push(n) : u(n)), 
                this;
            },
            fire: function() {
                return d.fireWith(this, arguments), this;
            },
            fired: function() {
                return !!i;
            }
        };
        return d;
    }, ot.extend({
        Deferred: function(e) {
            var t = [ [ "resolve", "done", ot.Callbacks("once memory"), "resolved" ], [ "reject", "fail", ot.Callbacks("once memory"), "rejected" ], [ "notify", "progress", ot.Callbacks("memory") ] ], n = "pending", i = {
                state: function() {
                    return n;
                },
                always: function() {
                    return r.done(arguments).fail(arguments), this;
                },
                then: function() {
                    var e = arguments;
                    return ot.Deferred(function(n) {
                        ot.each(t, function(t, o) {
                            var s = ot.isFunction(e[t]) && e[t];
                            r[o[1]](function() {
                                var e = s && s.apply(this, arguments);
                                e && ot.isFunction(e.promise) ? e.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[o[0] + "With"](this === i ? n.promise() : this, s ? [ e ] : arguments);
                            });
                        }), e = null;
                    }).promise();
                },
                promise: function(e) {
                    return null != e ? ot.extend(e, i) : i;
                }
            }, r = {};
            return i.pipe = i.then, ot.each(t, function(e, o) {
                var s = o[2], a = o[3];
                i[o[1]] = s.add, a && s.add(function() {
                    n = a;
                }, t[1 ^ e][2].disable, t[2][2].lock), r[o[0]] = function() {
                    return r[o[0] + "With"](this === r ? i : this, arguments), this;
                }, r[o[0] + "With"] = s.fireWith;
            }), i.promise(r), e && e.call(r, r), r;
        },
        when: function(e) {
            var t, n, i, r = 0, o = K.call(arguments), s = o.length, a = 1 !== s || e && ot.isFunction(e.promise) ? s : 0, l = 1 === a ? e : ot.Deferred(), c = function(e, n, i) {
                return function(r) {
                    n[e] = this, i[e] = arguments.length > 1 ? K.call(arguments) : r, i === t ? l.notifyWith(n, i) : --a || l.resolveWith(n, i);
                };
            };
            if (s > 1) for (t = new Array(s), n = new Array(s), i = new Array(s); s > r; r++) o[r] && ot.isFunction(o[r].promise) ? o[r].promise().done(c(r, i, o)).fail(l.reject).progress(c(r, n, t)) : --a;
            return a || l.resolveWith(i, o), l.promise();
        }
    });
    var Ct;
    ot.fn.ready = function(e) {
        return ot.ready.promise().done(e), this;
    }, ot.extend({
        isReady: !1,
        readyWait: 1,
        holdReady: function(e) {
            e ? ot.readyWait++ : ot.ready(!0);
        },
        ready: function(e) {
            if (e === !0 ? !--ot.readyWait : !ot.isReady) {
                if (!mt.body) return setTimeout(ot.ready);
                ot.isReady = !0, e !== !0 && --ot.readyWait > 0 || (Ct.resolveWith(mt, [ ot ]), 
                ot.fn.trigger && ot(mt).trigger("ready").off("ready"));
            }
        }
    }), ot.ready.promise = function(t) {
        if (!Ct) if (Ct = ot.Deferred(), "complete" === mt.readyState) setTimeout(ot.ready); else if (mt.addEventListener) mt.addEventListener("DOMContentLoaded", a, !1), 
        e.addEventListener("load", a, !1); else {
            mt.attachEvent("onreadystatechange", a), e.attachEvent("onload", a);
            var n = !1;
            try {
                n = null == e.frameElement && mt.documentElement;
            } catch (i) {}
            n && n.doScroll && !function r() {
                if (!ot.isReady) {
                    try {
                        n.doScroll("left");
                    } catch (e) {
                        return setTimeout(r, 50);
                    }
                    s(), ot.ready();
                }
            }();
        }
        return Ct.promise(t);
    };
    var kt, Tt = "undefined";
    for (kt in ot(it)) break;
    it.ownLast = "0" !== kt, it.inlineBlockNeedsLayout = !1, ot(function() {
        var e, t, n = mt.getElementsByTagName("body")[0];
        n && (e = mt.createElement("div"), e.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px", 
        t = mt.createElement("div"), n.appendChild(e).appendChild(t), typeof t.style.zoom !== Tt && (t.style.cssText = "border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1", 
        (it.inlineBlockNeedsLayout = 3 === t.offsetWidth) && (n.style.zoom = 1)), n.removeChild(e), 
        e = t = null);
    }), function() {
        var e = mt.createElement("div");
        if (null == it.deleteExpando) {
            it.deleteExpando = !0;
            try {
                delete e.test;
            } catch (t) {
                it.deleteExpando = !1;
            }
        }
        e = null;
    }(), ot.acceptData = function(e) {
        var t = ot.noData[(e.nodeName + " ").toLowerCase()], n = +e.nodeType || 1;
        return 1 !== n && 9 !== n ? !1 : !t || t !== !0 && e.getAttribute("classid") === t;
    };
    var _t = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, Et = /([A-Z])/g;
    ot.extend({
        cache: {},
        noData: {
            "applet ": !0,
            "embed ": !0,
            "object ": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
        },
        hasData: function(e) {
            return e = e.nodeType ? ot.cache[e[ot.expando]] : e[ot.expando], !!e && !c(e);
        },
        data: function(e, t, n) {
            return u(e, t, n);
        },
        removeData: function(e, t) {
            return d(e, t);
        },
        _data: function(e, t, n) {
            return u(e, t, n, !0);
        },
        _removeData: function(e, t) {
            return d(e, t, !0);
        }
    }), ot.fn.extend({
        data: function(e, t) {
            var n, i, r, o = this[0], s = o && o.attributes;
            if (void 0 === e) {
                if (this.length && (r = ot.data(o), 1 === o.nodeType && !ot._data(o, "parsedAttrs"))) {
                    for (n = s.length; n--; ) i = s[n].name, 0 === i.indexOf("data-") && (i = ot.camelCase(i.slice(5)), 
                    l(o, i, r[i]));
                    ot._data(o, "parsedAttrs", !0);
                }
                return r;
            }
            return "object" == typeof e ? this.each(function() {
                ot.data(this, e);
            }) : arguments.length > 1 ? this.each(function() {
                ot.data(this, e, t);
            }) : o ? l(o, e, ot.data(o, e)) : void 0;
        },
        removeData: function(e) {
            return this.each(function() {
                ot.removeData(this, e);
            });
        }
    }), ot.extend({
        queue: function(e, t, n) {
            var i;
            return e ? (t = (t || "fx") + "queue", i = ot._data(e, t), n && (!i || ot.isArray(n) ? i = ot._data(e, t, ot.makeArray(n)) : i.push(n)), 
            i || []) : void 0;
        },
        dequeue: function(e, t) {
            t = t || "fx";
            var n = ot.queue(e, t), i = n.length, r = n.shift(), o = ot._queueHooks(e, t), s = function() {
                ot.dequeue(e, t);
            };
            "inprogress" === r && (r = n.shift(), i--), r && ("fx" === t && n.unshift("inprogress"), 
            delete o.stop, r.call(e, s, o)), !i && o && o.empty.fire();
        },
        _queueHooks: function(e, t) {
            var n = t + "queueHooks";
            return ot._data(e, n) || ot._data(e, n, {
                empty: ot.Callbacks("once memory").add(function() {
                    ot._removeData(e, t + "queue"), ot._removeData(e, n);
                })
            });
        }
    }), ot.fn.extend({
        queue: function(e, t) {
            var n = 2;
            return "string" != typeof e && (t = e, e = "fx", n--), arguments.length < n ? ot.queue(this[0], e) : void 0 === t ? this : this.each(function() {
                var n = ot.queue(this, e, t);
                ot._queueHooks(this, e), "fx" === e && "inprogress" !== n[0] && ot.dequeue(this, e);
            });
        },
        dequeue: function(e) {
            return this.each(function() {
                ot.dequeue(this, e);
            });
        },
        clearQueue: function(e) {
            return this.queue(e || "fx", []);
        },
        promise: function(e, t) {
            var n, i = 1, r = ot.Deferred(), o = this, s = this.length, a = function() {
                --i || r.resolveWith(o, [ o ]);
            };
            for ("string" != typeof e && (t = e, e = void 0), e = e || "fx"; s--; ) n = ot._data(o[s], e + "queueHooks"), 
            n && n.empty && (i++, n.empty.add(a));
            return a(), r.promise(t);
        }
    });
    var Rt = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, St = [ "Top", "Right", "Bottom", "Left" ], Nt = function(e, t) {
        return e = t || e, "none" === ot.css(e, "display") || !ot.contains(e.ownerDocument, e);
    }, Mt = ot.access = function(e, t, n, i, r, o, s) {
        var a = 0, l = e.length, c = null == n;
        if ("object" === ot.type(n)) {
            r = !0;
            for (a in n) ot.access(e, t, a, n[a], !0, o, s);
        } else if (void 0 !== i && (r = !0, ot.isFunction(i) || (s = !0), c && (s ? (t.call(e, i), 
        t = null) : (c = t, t = function(e, t, n) {
            return c.call(ot(e), n);
        })), t)) for (;l > a; a++) t(e[a], n, s ? i : i.call(e[a], a, t(e[a], n)));
        return r ? e : c ? t.call(e) : l ? t(e[0], n) : o;
    }, Pt = /^(?:checkbox|radio)$/i;
    !function() {
        var e = mt.createDocumentFragment(), t = mt.createElement("div"), n = mt.createElement("input");
        if (t.setAttribute("className", "t"), t.innerHTML = "  <link/><table></table><a href='/a'>a</a>", 
        it.leadingWhitespace = 3 === t.firstChild.nodeType, it.tbody = !t.getElementsByTagName("tbody").length, 
        it.htmlSerialize = !!t.getElementsByTagName("link").length, it.html5Clone = "<:nav></:nav>" !== mt.createElement("nav").cloneNode(!0).outerHTML, 
        n.type = "checkbox", n.checked = !0, e.appendChild(n), it.appendChecked = n.checked, 
        t.innerHTML = "<textarea>x</textarea>", it.noCloneChecked = !!t.cloneNode(!0).lastChild.defaultValue, 
        e.appendChild(t), t.innerHTML = "<input type='radio' checked='checked' name='t'/>", 
        it.checkClone = t.cloneNode(!0).cloneNode(!0).lastChild.checked, it.noCloneEvent = !0, 
        t.attachEvent && (t.attachEvent("onclick", function() {
            it.noCloneEvent = !1;
        }), t.cloneNode(!0).click()), null == it.deleteExpando) {
            it.deleteExpando = !0;
            try {
                delete t.test;
            } catch (i) {
                it.deleteExpando = !1;
            }
        }
        e = t = n = null;
    }(), function() {
        var t, n, i = mt.createElement("div");
        for (t in {
            submit: !0,
            change: !0,
            focusin: !0
        }) n = "on" + t, (it[t + "Bubbles"] = n in e) || (i.setAttribute(n, "t"), it[t + "Bubbles"] = i.attributes[n].expando === !1);
        i = null;
    }();
    var At = /^(?:input|select|textarea)$/i, Dt = /^key/, $t = /^(?:mouse|contextmenu)|click/, jt = /^(?:focusinfocus|focusoutblur)$/, Ot = /^([^.]*)(?:\.(.+)|)$/;
    ot.event = {
        global: {},
        add: function(e, t, n, i, r) {
            var o, s, a, l, c, u, d, h, p, f, m, g = ot._data(e);
            if (g) {
                for (n.handler && (l = n, n = l.handler, r = l.selector), n.guid || (n.guid = ot.guid++), 
                (s = g.events) || (s = g.events = {}), (u = g.handle) || (u = g.handle = function(e) {
                    return typeof ot === Tt || e && ot.event.triggered === e.type ? void 0 : ot.event.dispatch.apply(u.elem, arguments);
                }, u.elem = e), t = (t || "").match(wt) || [ "" ], a = t.length; a--; ) o = Ot.exec(t[a]) || [], 
                p = m = o[1], f = (o[2] || "").split(".").sort(), p && (c = ot.event.special[p] || {}, 
                p = (r ? c.delegateType : c.bindType) || p, c = ot.event.special[p] || {}, d = ot.extend({
                    type: p,
                    origType: m,
                    data: i,
                    handler: n,
                    guid: n.guid,
                    selector: r,
                    needsContext: r && ot.expr.match.needsContext.test(r),
                    namespace: f.join(".")
                }, l), (h = s[p]) || (h = s[p] = [], h.delegateCount = 0, c.setup && c.setup.call(e, i, f, u) !== !1 || (e.addEventListener ? e.addEventListener(p, u, !1) : e.attachEvent && e.attachEvent("on" + p, u))), 
                c.add && (c.add.call(e, d), d.handler.guid || (d.handler.guid = n.guid)), r ? h.splice(h.delegateCount++, 0, d) : h.push(d), 
                ot.event.global[p] = !0);
                e = null;
            }
        },
        remove: function(e, t, n, i, r) {
            var o, s, a, l, c, u, d, h, p, f, m, g = ot.hasData(e) && ot._data(e);
            if (g && (u = g.events)) {
                for (t = (t || "").match(wt) || [ "" ], c = t.length; c--; ) if (a = Ot.exec(t[c]) || [], 
                p = m = a[1], f = (a[2] || "").split(".").sort(), p) {
                    for (d = ot.event.special[p] || {}, p = (i ? d.delegateType : d.bindType) || p, 
                    h = u[p] || [], a = a[2] && new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)"), 
                    l = o = h.length; o--; ) s = h[o], !r && m !== s.origType || n && n.guid !== s.guid || a && !a.test(s.namespace) || i && i !== s.selector && ("**" !== i || !s.selector) || (h.splice(o, 1), 
                    s.selector && h.delegateCount--, d.remove && d.remove.call(e, s));
                    l && !h.length && (d.teardown && d.teardown.call(e, f, g.handle) !== !1 || ot.removeEvent(e, p, g.handle), 
                    delete u[p]);
                } else for (p in u) ot.event.remove(e, p + t[c], n, i, !0);
                ot.isEmptyObject(u) && (delete g.handle, ot._removeData(e, "events"));
            }
        },
        trigger: function(t, n, i, r) {
            var o, s, a, l, c, u, d, h = [ i || mt ], p = tt.call(t, "type") ? t.type : t, f = tt.call(t, "namespace") ? t.namespace.split(".") : [];
            if (a = u = i = i || mt, 3 !== i.nodeType && 8 !== i.nodeType && !jt.test(p + ot.event.triggered) && (p.indexOf(".") >= 0 && (f = p.split("."), 
            p = f.shift(), f.sort()), s = p.indexOf(":") < 0 && "on" + p, t = t[ot.expando] ? t : new ot.Event(p, "object" == typeof t && t), 
            t.isTrigger = r ? 2 : 3, t.namespace = f.join("."), t.namespace_re = t.namespace ? new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, 
            t.result = void 0, t.target || (t.target = i), n = null == n ? [ t ] : ot.makeArray(n, [ t ]), 
            c = ot.event.special[p] || {}, r || !c.trigger || c.trigger.apply(i, n) !== !1)) {
                if (!r && !c.noBubble && !ot.isWindow(i)) {
                    for (l = c.delegateType || p, jt.test(l + p) || (a = a.parentNode); a; a = a.parentNode) h.push(a), 
                    u = a;
                    u === (i.ownerDocument || mt) && h.push(u.defaultView || u.parentWindow || e);
                }
                for (d = 0; (a = h[d++]) && !t.isPropagationStopped(); ) t.type = d > 1 ? l : c.bindType || p, 
                o = (ot._data(a, "events") || {})[t.type] && ot._data(a, "handle"), o && o.apply(a, n), 
                o = s && a[s], o && o.apply && ot.acceptData(a) && (t.result = o.apply(a, n), t.result === !1 && t.preventDefault());
                if (t.type = p, !r && !t.isDefaultPrevented() && (!c._default || c._default.apply(h.pop(), n) === !1) && ot.acceptData(i) && s && i[p] && !ot.isWindow(i)) {
                    u = i[s], u && (i[s] = null), ot.event.triggered = p;
                    try {
                        i[p]();
                    } catch (m) {}
                    ot.event.triggered = void 0, u && (i[s] = u);
                }
                return t.result;
            }
        },
        dispatch: function(e) {
            e = ot.event.fix(e);
            var t, n, i, r, o, s = [], a = K.call(arguments), l = (ot._data(this, "events") || {})[e.type] || [], c = ot.event.special[e.type] || {};
            if (a[0] = e, e.delegateTarget = this, !c.preDispatch || c.preDispatch.call(this, e) !== !1) {
                for (s = ot.event.handlers.call(this, e, l), t = 0; (r = s[t++]) && !e.isPropagationStopped(); ) for (e.currentTarget = r.elem, 
                o = 0; (i = r.handlers[o++]) && !e.isImmediatePropagationStopped(); ) (!e.namespace_re || e.namespace_re.test(i.namespace)) && (e.handleObj = i, 
                e.data = i.data, n = ((ot.event.special[i.origType] || {}).handle || i.handler).apply(r.elem, a), 
                void 0 !== n && (e.result = n) === !1 && (e.preventDefault(), e.stopPropagation()));
                return c.postDispatch && c.postDispatch.call(this, e), e.result;
            }
        },
        handlers: function(e, t) {
            var n, i, r, o, s = [], a = t.delegateCount, l = e.target;
            if (a && l.nodeType && (!e.button || "click" !== e.type)) for (;l != this; l = l.parentNode || this) if (1 === l.nodeType && (l.disabled !== !0 || "click" !== e.type)) {
                for (r = [], o = 0; a > o; o++) i = t[o], n = i.selector + " ", void 0 === r[n] && (r[n] = i.needsContext ? ot(n, this).index(l) >= 0 : ot.find(n, this, null, [ l ]).length), 
                r[n] && r.push(i);
                r.length && s.push({
                    elem: l,
                    handlers: r
                });
            }
            return a < t.length && s.push({
                elem: this,
                handlers: t.slice(a)
            }), s;
        },
        fix: function(e) {
            if (e[ot.expando]) return e;
            var t, n, i, r = e.type, o = e, s = this.fixHooks[r];
            for (s || (this.fixHooks[r] = s = $t.test(r) ? this.mouseHooks : Dt.test(r) ? this.keyHooks : {}), 
            i = s.props ? this.props.concat(s.props) : this.props, e = new ot.Event(o), t = i.length; t--; ) n = i[t], 
            e[n] = o[n];
            return e.target || (e.target = o.srcElement || mt), 3 === e.target.nodeType && (e.target = e.target.parentNode), 
            e.metaKey = !!e.metaKey, s.filter ? s.filter(e, o) : e;
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(e, t) {
                return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), 
                e;
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(e, t) {
                var n, i, r, o = t.button, s = t.fromElement;
                return null == e.pageX && null != t.clientX && (i = e.target.ownerDocument || mt, 
                r = i.documentElement, n = i.body, e.pageX = t.clientX + (r && r.scrollLeft || n && n.scrollLeft || 0) - (r && r.clientLeft || n && n.clientLeft || 0), 
                e.pageY = t.clientY + (r && r.scrollTop || n && n.scrollTop || 0) - (r && r.clientTop || n && n.clientTop || 0)), 
                !e.relatedTarget && s && (e.relatedTarget = s === e.target ? t.toElement : s), e.which || void 0 === o || (e.which = 1 & o ? 1 : 2 & o ? 3 : 4 & o ? 2 : 0), 
                e;
            }
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function() {
                    if (this !== f() && this.focus) try {
                        return this.focus(), !1;
                    } catch (e) {}
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function() {
                    return this === f() && this.blur ? (this.blur(), !1) : void 0;
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function() {
                    return ot.nodeName(this, "input") && "checkbox" === this.type && this.click ? (this.click(), 
                    !1) : void 0;
                },
                _default: function(e) {
                    return ot.nodeName(e.target, "a");
                }
            },
            beforeunload: {
                postDispatch: function(e) {
                    void 0 !== e.result && (e.originalEvent.returnValue = e.result);
                }
            }
        },
        simulate: function(e, t, n, i) {
            var r = ot.extend(new ot.Event(), n, {
                type: e,
                isSimulated: !0,
                originalEvent: {}
            });
            i ? ot.event.trigger(r, null, t) : ot.event.dispatch.call(t, r), r.isDefaultPrevented() && n.preventDefault();
        }
    }, ot.removeEvent = mt.removeEventListener ? function(e, t, n) {
        e.removeEventListener && e.removeEventListener(t, n, !1);
    } : function(e, t, n) {
        var i = "on" + t;
        e.detachEvent && (typeof e[i] === Tt && (e[i] = null), e.detachEvent(i, n));
    }, ot.Event = function(e, t) {
        return this instanceof ot.Event ? (e && e.type ? (this.originalEvent = e, this.type = e.type, 
        this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && (e.returnValue === !1 || e.getPreventDefault && e.getPreventDefault()) ? h : p) : this.type = e, 
        t && ot.extend(this, t), this.timeStamp = e && e.timeStamp || ot.now(), void (this[ot.expando] = !0)) : new ot.Event(e, t);
    }, ot.Event.prototype = {
        isDefaultPrevented: p,
        isPropagationStopped: p,
        isImmediatePropagationStopped: p,
        preventDefault: function() {
            var e = this.originalEvent;
            this.isDefaultPrevented = h, e && (e.preventDefault ? e.preventDefault() : e.returnValue = !1);
        },
        stopPropagation: function() {
            var e = this.originalEvent;
            this.isPropagationStopped = h, e && (e.stopPropagation && e.stopPropagation(), e.cancelBubble = !0);
        },
        stopImmediatePropagation: function() {
            this.isImmediatePropagationStopped = h, this.stopPropagation();
        }
    }, ot.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout"
    }, function(e, t) {
        ot.event.special[e] = {
            delegateType: t,
            bindType: t,
            handle: function(e) {
                var n, i = this, r = e.relatedTarget, o = e.handleObj;
                return (!r || r !== i && !ot.contains(i, r)) && (e.type = o.origType, n = o.handler.apply(this, arguments), 
                e.type = t), n;
            }
        };
    }), it.submitBubbles || (ot.event.special.submit = {
        setup: function() {
            return ot.nodeName(this, "form") ? !1 : void ot.event.add(this, "click._submit keypress._submit", function(e) {
                var t = e.target, n = ot.nodeName(t, "input") || ot.nodeName(t, "button") ? t.form : void 0;
                n && !ot._data(n, "submitBubbles") && (ot.event.add(n, "submit._submit", function(e) {
                    e._submit_bubble = !0;
                }), ot._data(n, "submitBubbles", !0));
            });
        },
        postDispatch: function(e) {
            e._submit_bubble && (delete e._submit_bubble, this.parentNode && !e.isTrigger && ot.event.simulate("submit", this.parentNode, e, !0));
        },
        teardown: function() {
            return ot.nodeName(this, "form") ? !1 : void ot.event.remove(this, "._submit");
        }
    }), it.changeBubbles || (ot.event.special.change = {
        setup: function() {
            return At.test(this.nodeName) ? (("checkbox" === this.type || "radio" === this.type) && (ot.event.add(this, "propertychange._change", function(e) {
                "checked" === e.originalEvent.propertyName && (this._just_changed = !0);
            }), ot.event.add(this, "click._change", function(e) {
                this._just_changed && !e.isTrigger && (this._just_changed = !1), ot.event.simulate("change", this, e, !0);
            })), !1) : void ot.event.add(this, "beforeactivate._change", function(e) {
                var t = e.target;
                At.test(t.nodeName) && !ot._data(t, "changeBubbles") && (ot.event.add(t, "change._change", function(e) {
                    !this.parentNode || e.isSimulated || e.isTrigger || ot.event.simulate("change", this.parentNode, e, !0);
                }), ot._data(t, "changeBubbles", !0));
            });
        },
        handle: function(e) {
            var t = e.target;
            return this !== t || e.isSimulated || e.isTrigger || "radio" !== t.type && "checkbox" !== t.type ? e.handleObj.handler.apply(this, arguments) : void 0;
        },
        teardown: function() {
            return ot.event.remove(this, "._change"), !At.test(this.nodeName);
        }
    }), it.focusinBubbles || ot.each({
        focus: "focusin",
        blur: "focusout"
    }, function(e, t) {
        var n = function(e) {
            ot.event.simulate(t, e.target, ot.event.fix(e), !0);
        };
        ot.event.special[t] = {
            setup: function() {
                var i = this.ownerDocument || this, r = ot._data(i, t);
                r || i.addEventListener(e, n, !0), ot._data(i, t, (r || 0) + 1);
            },
            teardown: function() {
                var i = this.ownerDocument || this, r = ot._data(i, t) - 1;
                r ? ot._data(i, t, r) : (i.removeEventListener(e, n, !0), ot._removeData(i, t));
            }
        };
    }), ot.fn.extend({
        on: function(e, t, n, i, r) {
            var o, s;
            if ("object" == typeof e) {
                "string" != typeof t && (n = n || t, t = void 0);
                for (o in e) this.on(o, t, n, e[o], r);
                return this;
            }
            if (null == n && null == i ? (i = t, n = t = void 0) : null == i && ("string" == typeof t ? (i = n, 
            n = void 0) : (i = n, n = t, t = void 0)), i === !1) i = p; else if (!i) return this;
            return 1 === r && (s = i, i = function(e) {
                return ot().off(e), s.apply(this, arguments);
            }, i.guid = s.guid || (s.guid = ot.guid++)), this.each(function() {
                ot.event.add(this, e, i, n, t);
            });
        },
        one: function(e, t, n, i) {
            return this.on(e, t, n, i, 1);
        },
        off: function(e, t, n) {
            var i, r;
            if (e && e.preventDefault && e.handleObj) return i = e.handleObj, ot(e.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler), 
            this;
            if ("object" == typeof e) {
                for (r in e) this.off(r, t, e[r]);
                return this;
            }
            return (t === !1 || "function" == typeof t) && (n = t, t = void 0), n === !1 && (n = p), 
            this.each(function() {
                ot.event.remove(this, e, n, t);
            });
        },
        trigger: function(e, t) {
            return this.each(function() {
                ot.event.trigger(e, t, this);
            });
        },
        triggerHandler: function(e, t) {
            var n = this[0];
            return n ? ot.event.trigger(e, t, n, !0) : void 0;
        }
    });
    var Ft = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video", Ht = / jQuery\d+="(?:null|\d+)"/g, Lt = new RegExp("<(?:" + Ft + ")[\\s/>]", "i"), qt = /^\s+/, Bt = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, It = /<([\w:]+)/, zt = /<tbody/i, Ut = /<|&#?\w+;/, Wt = /<(?:script|style|link)/i, Vt = /checked\s*(?:[^=]|=\s*.checked.)/i, Xt = /^$|\/(?:java|ecma)script/i, Qt = /^true\/(.*)/, Kt = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, Yt = {
        option: [ 1, "<select multiple='multiple'>", "</select>" ],
        legend: [ 1, "<fieldset>", "</fieldset>" ],
        area: [ 1, "<map>", "</map>" ],
        param: [ 1, "<object>", "</object>" ],
        thead: [ 1, "<table>", "</table>" ],
        tr: [ 2, "<table><tbody>", "</tbody></table>" ],
        col: [ 2, "<table><tbody></tbody><colgroup>", "</colgroup></table>" ],
        td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],
        _default: it.htmlSerialize ? [ 0, "", "" ] : [ 1, "X<div>", "</div>" ]
    }, Jt = m(mt), Gt = Jt.appendChild(mt.createElement("div"));
    Yt.optgroup = Yt.option, Yt.tbody = Yt.tfoot = Yt.colgroup = Yt.caption = Yt.thead, 
    Yt.th = Yt.td, ot.extend({
        clone: function(e, t, n) {
            var i, r, o, s, a, l = ot.contains(e.ownerDocument, e);
            if (it.html5Clone || ot.isXMLDoc(e) || !Lt.test("<" + e.nodeName + ">") ? o = e.cloneNode(!0) : (Gt.innerHTML = e.outerHTML, 
            Gt.removeChild(o = Gt.firstChild)), !(it.noCloneEvent && it.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || ot.isXMLDoc(e))) for (i = g(o), 
            a = g(e), s = 0; null != (r = a[s]); ++s) i[s] && k(r, i[s]);
            if (t) if (n) for (a = a || g(e), i = i || g(o), s = 0; null != (r = a[s]); s++) C(r, i[s]); else C(e, o);
            return i = g(o, "script"), i.length > 0 && x(i, !l && g(e, "script")), i = a = r = null, 
            o;
        },
        buildFragment: function(e, t, n, i) {
            for (var r, o, s, a, l, c, u, d = e.length, h = m(t), p = [], f = 0; d > f; f++) if (o = e[f], 
            o || 0 === o) if ("object" === ot.type(o)) ot.merge(p, o.nodeType ? [ o ] : o); else if (Ut.test(o)) {
                for (a = a || h.appendChild(t.createElement("div")), l = (It.exec(o) || [ "", "" ])[1].toLowerCase(), 
                u = Yt[l] || Yt._default, a.innerHTML = u[1] + o.replace(Bt, "<$1></$2>") + u[2], 
                r = u[0]; r--; ) a = a.lastChild;
                if (!it.leadingWhitespace && qt.test(o) && p.push(t.createTextNode(qt.exec(o)[0])), 
                !it.tbody) for (o = "table" !== l || zt.test(o) ? "<table>" !== u[1] || zt.test(o) ? 0 : a : a.firstChild, 
                r = o && o.childNodes.length; r--; ) ot.nodeName(c = o.childNodes[r], "tbody") && !c.childNodes.length && o.removeChild(c);
                for (ot.merge(p, a.childNodes), a.textContent = ""; a.firstChild; ) a.removeChild(a.firstChild);
                a = h.lastChild;
            } else p.push(t.createTextNode(o));
            for (a && h.removeChild(a), it.appendChecked || ot.grep(g(p, "input"), v), f = 0; o = p[f++]; ) if ((!i || -1 === ot.inArray(o, i)) && (s = ot.contains(o.ownerDocument, o), 
            a = g(h.appendChild(o), "script"), s && x(a), n)) for (r = 0; o = a[r++]; ) Xt.test(o.type || "") && n.push(o);
            return a = null, h;
        },
        cleanData: function(e, t) {
            for (var n, i, r, o, s = 0, a = ot.expando, l = ot.cache, c = it.deleteExpando, u = ot.event.special; null != (n = e[s]); s++) if ((t || ot.acceptData(n)) && (r = n[a], 
            o = r && l[r])) {
                if (o.events) for (i in o.events) u[i] ? ot.event.remove(n, i) : ot.removeEvent(n, i, o.handle);
                l[r] && (delete l[r], c ? delete n[a] : typeof n.removeAttribute !== Tt ? n.removeAttribute(a) : n[a] = null, 
                Q.push(r));
            }
        }
    }), ot.fn.extend({
        text: function(e) {
            return Mt(this, function(e) {
                return void 0 === e ? ot.text(this) : this.empty().append((this[0] && this[0].ownerDocument || mt).createTextNode(e));
            }, null, e, arguments.length);
        },
        append: function() {
            return this.domManip(arguments, function(e) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = y(this, e);
                    t.appendChild(e);
                }
            });
        },
        prepend: function() {
            return this.domManip(arguments, function(e) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = y(this, e);
                    t.insertBefore(e, t.firstChild);
                }
            });
        },
        before: function() {
            return this.domManip(arguments, function(e) {
                this.parentNode && this.parentNode.insertBefore(e, this);
            });
        },
        after: function() {
            return this.domManip(arguments, function(e) {
                this.parentNode && this.parentNode.insertBefore(e, this.nextSibling);
            });
        },
        remove: function(e, t) {
            for (var n, i = e ? ot.filter(e, this) : this, r = 0; null != (n = i[r]); r++) t || 1 !== n.nodeType || ot.cleanData(g(n)), 
            n.parentNode && (t && ot.contains(n.ownerDocument, n) && x(g(n, "script")), n.parentNode.removeChild(n));
            return this;
        },
        empty: function() {
            for (var e, t = 0; null != (e = this[t]); t++) {
                for (1 === e.nodeType && ot.cleanData(g(e, !1)); e.firstChild; ) e.removeChild(e.firstChild);
                e.options && ot.nodeName(e, "select") && (e.options.length = 0);
            }
            return this;
        },
        clone: function(e, t) {
            return e = null == e ? !1 : e, t = null == t ? e : t, this.map(function() {
                return ot.clone(this, e, t);
            });
        },
        html: function(e) {
            return Mt(this, function(e) {
                var t = this[0] || {}, n = 0, i = this.length;
                if (void 0 === e) return 1 === t.nodeType ? t.innerHTML.replace(Ht, "") : void 0;
                if (!("string" != typeof e || Wt.test(e) || !it.htmlSerialize && Lt.test(e) || !it.leadingWhitespace && qt.test(e) || Yt[(It.exec(e) || [ "", "" ])[1].toLowerCase()])) {
                    e = e.replace(Bt, "<$1></$2>");
                    try {
                        for (;i > n; n++) t = this[n] || {}, 1 === t.nodeType && (ot.cleanData(g(t, !1)), 
                        t.innerHTML = e);
                        t = 0;
                    } catch (r) {}
                }
                t && this.empty().append(e);
            }, null, e, arguments.length);
        },
        replaceWith: function() {
            var e = arguments[0];
            return this.domManip(arguments, function(t) {
                e = this.parentNode, ot.cleanData(g(this)), e && e.replaceChild(t, this);
            }), e && (e.length || e.nodeType) ? this : this.remove();
        },
        detach: function(e) {
            return this.remove(e, !0);
        },
        domManip: function(e, t) {
            e = Y.apply([], e);
            var n, i, r, o, s, a, l = 0, c = this.length, u = this, d = c - 1, h = e[0], p = ot.isFunction(h);
            if (p || c > 1 && "string" == typeof h && !it.checkClone && Vt.test(h)) return this.each(function(n) {
                var i = u.eq(n);
                p && (e[0] = h.call(this, n, i.html())), i.domManip(e, t);
            });
            if (c && (a = ot.buildFragment(e, this[0].ownerDocument, !1, this), n = a.firstChild, 
            1 === a.childNodes.length && (a = n), n)) {
                for (o = ot.map(g(a, "script"), b), r = o.length; c > l; l++) i = a, l !== d && (i = ot.clone(i, !0, !0), 
                r && ot.merge(o, g(i, "script"))), t.call(this[l], i, l);
                if (r) for (s = o[o.length - 1].ownerDocument, ot.map(o, w), l = 0; r > l; l++) i = o[l], 
                Xt.test(i.type || "") && !ot._data(i, "globalEval") && ot.contains(s, i) && (i.src ? ot._evalUrl && ot._evalUrl(i.src) : ot.globalEval((i.text || i.textContent || i.innerHTML || "").replace(Kt, "")));
                a = n = null;
            }
            return this;
        }
    }), ot.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(e, t) {
        ot.fn[e] = function(e) {
            for (var n, i = 0, r = [], o = ot(e), s = o.length - 1; s >= i; i++) n = i === s ? this : this.clone(!0), 
            ot(o[i])[t](n), J.apply(r, n.get());
            return this.pushStack(r);
        };
    });
    var Zt, en = {};
    !function() {
        var e, t, n = mt.createElement("div"), i = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";
        n.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", 
        e = n.getElementsByTagName("a")[0], e.style.cssText = "float:left;opacity:.5", it.opacity = /^0.5/.test(e.style.opacity), 
        it.cssFloat = !!e.style.cssFloat, n.style.backgroundClip = "content-box", n.cloneNode(!0).style.backgroundClip = "", 
        it.clearCloneStyle = "content-box" === n.style.backgroundClip, e = n = null, it.shrinkWrapBlocks = function() {
            var e, n, r, o;
            if (null == t) {
                if (e = mt.getElementsByTagName("body")[0], !e) return;
                o = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px", n = mt.createElement("div"), 
                r = mt.createElement("div"), e.appendChild(n).appendChild(r), t = !1, typeof r.style.zoom !== Tt && (r.style.cssText = i + ";width:1px;padding:1px;zoom:1", 
                r.innerHTML = "<div></div>", r.firstChild.style.width = "5px", t = 3 !== r.offsetWidth), 
                e.removeChild(n), e = n = r = null;
            }
            return t;
        };
    }();
    var tn, nn, rn = /^margin/, on = new RegExp("^(" + Rt + ")(?!px)[a-z%]+$", "i"), sn = /^(top|right|bottom|left)$/;
    e.getComputedStyle ? (tn = function(e) {
        return e.ownerDocument.defaultView.getComputedStyle(e, null);
    }, nn = function(e, t, n) {
        var i, r, o, s, a = e.style;
        return n = n || tn(e), s = n ? n.getPropertyValue(t) || n[t] : void 0, n && ("" !== s || ot.contains(e.ownerDocument, e) || (s = ot.style(e, t)), 
        on.test(s) && rn.test(t) && (i = a.width, r = a.minWidth, o = a.maxWidth, a.minWidth = a.maxWidth = a.width = s, 
        s = n.width, a.width = i, a.minWidth = r, a.maxWidth = o)), void 0 === s ? s : s + "";
    }) : mt.documentElement.currentStyle && (tn = function(e) {
        return e.currentStyle;
    }, nn = function(e, t, n) {
        var i, r, o, s, a = e.style;
        return n = n || tn(e), s = n ? n[t] : void 0, null == s && a && a[t] && (s = a[t]), 
        on.test(s) && !sn.test(t) && (i = a.left, r = e.runtimeStyle, o = r && r.left, o && (r.left = e.currentStyle.left), 
        a.left = "fontSize" === t ? "1em" : s, s = a.pixelLeft + "px", a.left = i, o && (r.left = o)), 
        void 0 === s ? s : s + "" || "auto";
    }), !function() {
        function t() {
            var t, n, i = mt.getElementsByTagName("body")[0];
            i && (t = mt.createElement("div"), n = mt.createElement("div"), t.style.cssText = c, 
            i.appendChild(t).appendChild(n), n.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%", 
            ot.swap(i, null != i.style.zoom ? {
                zoom: 1
            } : {}, function() {
                r = 4 === n.offsetWidth;
            }), o = !0, s = !1, a = !0, e.getComputedStyle && (s = "1%" !== (e.getComputedStyle(n, null) || {}).top, 
            o = "4px" === (e.getComputedStyle(n, null) || {
                width: "4px"
            }).width), i.removeChild(t), n = i = null);
        }
        var n, i, r, o, s, a, l = mt.createElement("div"), c = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px", u = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";
        l.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", 
        n = l.getElementsByTagName("a")[0], n.style.cssText = "float:left;opacity:.5", it.opacity = /^0.5/.test(n.style.opacity), 
        it.cssFloat = !!n.style.cssFloat, l.style.backgroundClip = "content-box", l.cloneNode(!0).style.backgroundClip = "", 
        it.clearCloneStyle = "content-box" === l.style.backgroundClip, n = l = null, ot.extend(it, {
            reliableHiddenOffsets: function() {
                if (null != i) return i;
                var e, t, n, r = mt.createElement("div"), o = mt.getElementsByTagName("body")[0];
                return o ? (r.setAttribute("className", "t"), r.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", 
                e = mt.createElement("div"), e.style.cssText = c, o.appendChild(e).appendChild(r), 
                r.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", t = r.getElementsByTagName("td"), 
                t[0].style.cssText = "padding:0;margin:0;border:0;display:none", n = 0 === t[0].offsetHeight, 
                t[0].style.display = "", t[1].style.display = "none", i = n && 0 === t[0].offsetHeight, 
                o.removeChild(e), r = o = null, i) : void 0;
            },
            boxSizing: function() {
                return null == r && t(), r;
            },
            boxSizingReliable: function() {
                return null == o && t(), o;
            },
            pixelPosition: function() {
                return null == s && t(), s;
            },
            reliableMarginRight: function() {
                var t, n, i, r;
                if (null == a && e.getComputedStyle) {
                    if (t = mt.getElementsByTagName("body")[0], !t) return;
                    n = mt.createElement("div"), i = mt.createElement("div"), n.style.cssText = c, t.appendChild(n).appendChild(i), 
                    r = i.appendChild(mt.createElement("div")), r.style.cssText = i.style.cssText = u, 
                    r.style.marginRight = r.style.width = "0", i.style.width = "1px", a = !parseFloat((e.getComputedStyle(r, null) || {}).marginRight), 
                    t.removeChild(n);
                }
                return a;
            }
        });
    }(), ot.swap = function(e, t, n, i) {
        var r, o, s = {};
        for (o in t) s[o] = e.style[o], e.style[o] = t[o];
        r = n.apply(e, i || []);
        for (o in t) e.style[o] = s[o];
        return r;
    };
    var an = /alpha\([^)]*\)/i, ln = /opacity\s*=\s*([^)]*)/, cn = /^(none|table(?!-c[ea]).+)/, un = new RegExp("^(" + Rt + ")(.*)$", "i"), dn = new RegExp("^([+-])=(" + Rt + ")", "i"), hn = {
        position: "absolute",
        visibility: "hidden",
        display: "block"
    }, pn = {
        letterSpacing: 0,
        fontWeight: 400
    }, fn = [ "Webkit", "O", "Moz", "ms" ];
    ot.extend({
        cssHooks: {
            opacity: {
                get: function(e, t) {
                    if (t) {
                        var n = nn(e, "opacity");
                        return "" === n ? "1" : n;
                    }
                }
            }
        },
        cssNumber: {
            columnCount: !0,
            fillOpacity: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": it.cssFloat ? "cssFloat" : "styleFloat"
        },
        style: function(e, t, n, i) {
            if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                var r, o, s, a = ot.camelCase(t), l = e.style;
                if (t = ot.cssProps[a] || (ot.cssProps[a] = R(l, a)), s = ot.cssHooks[t] || ot.cssHooks[a], 
                void 0 === n) return s && "get" in s && void 0 !== (r = s.get(e, !1, i)) ? r : l[t];
                if (o = typeof n, "string" === o && (r = dn.exec(n)) && (n = (r[1] + 1) * r[2] + parseFloat(ot.css(e, t)), 
                o = "number"), null != n && n === n && ("number" !== o || ot.cssNumber[a] || (n += "px"), 
                it.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (l[t] = "inherit"), 
                !(s && "set" in s && void 0 === (n = s.set(e, n, i))))) try {
                    l[t] = "", l[t] = n;
                } catch (c) {}
            }
        },
        css: function(e, t, n, i) {
            var r, o, s, a = ot.camelCase(t);
            return t = ot.cssProps[a] || (ot.cssProps[a] = R(e.style, a)), s = ot.cssHooks[t] || ot.cssHooks[a], 
            s && "get" in s && (o = s.get(e, !0, n)), void 0 === o && (o = nn(e, t, i)), "normal" === o && t in pn && (o = pn[t]), 
            "" === n || n ? (r = parseFloat(o), n === !0 || ot.isNumeric(r) ? r || 0 : o) : o;
        }
    }), ot.each([ "height", "width" ], function(e, t) {
        ot.cssHooks[t] = {
            get: function(e, n, i) {
                return n ? 0 === e.offsetWidth && cn.test(ot.css(e, "display")) ? ot.swap(e, hn, function() {
                    return P(e, t, i);
                }) : P(e, t, i) : void 0;
            },
            set: function(e, n, i) {
                var r = i && tn(e);
                return N(e, n, i ? M(e, t, i, it.boxSizing() && "border-box" === ot.css(e, "boxSizing", !1, r), r) : 0);
            }
        };
    }), it.opacity || (ot.cssHooks.opacity = {
        get: function(e, t) {
            return ln.test((t && e.currentStyle ? e.currentStyle.filter : e.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : t ? "1" : "";
        },
        set: function(e, t) {
            var n = e.style, i = e.currentStyle, r = ot.isNumeric(t) ? "alpha(opacity=" + 100 * t + ")" : "", o = i && i.filter || n.filter || "";
            n.zoom = 1, (t >= 1 || "" === t) && "" === ot.trim(o.replace(an, "")) && n.removeAttribute && (n.removeAttribute("filter"), 
            "" === t || i && !i.filter) || (n.filter = an.test(o) ? o.replace(an, r) : o + " " + r);
        }
    }), ot.cssHooks.marginRight = E(it.reliableMarginRight, function(e, t) {
        return t ? ot.swap(e, {
            display: "inline-block"
        }, nn, [ e, "marginRight" ]) : void 0;
    }), ot.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(e, t) {
        ot.cssHooks[e + t] = {
            expand: function(n) {
                for (var i = 0, r = {}, o = "string" == typeof n ? n.split(" ") : [ n ]; 4 > i; i++) r[e + St[i] + t] = o[i] || o[i - 2] || o[0];
                return r;
            }
        }, rn.test(e) || (ot.cssHooks[e + t].set = N);
    }), ot.fn.extend({
        css: function(e, t) {
            return Mt(this, function(e, t, n) {
                var i, r, o = {}, s = 0;
                if (ot.isArray(t)) {
                    for (i = tn(e), r = t.length; r > s; s++) o[t[s]] = ot.css(e, t[s], !1, i);
                    return o;
                }
                return void 0 !== n ? ot.style(e, t, n) : ot.css(e, t);
            }, e, t, arguments.length > 1);
        },
        show: function() {
            return S(this, !0);
        },
        hide: function() {
            return S(this);
        },
        toggle: function(e) {
            return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function() {
                Nt(this) ? ot(this).show() : ot(this).hide();
            });
        }
    }), ot.Tween = A, A.prototype = {
        constructor: A,
        init: function(e, t, n, i, r, o) {
            this.elem = e, this.prop = n, this.easing = r || "swing", this.options = t, this.start = this.now = this.cur(), 
            this.end = i, this.unit = o || (ot.cssNumber[n] ? "" : "px");
        },
        cur: function() {
            var e = A.propHooks[this.prop];
            return e && e.get ? e.get(this) : A.propHooks._default.get(this);
        },
        run: function(e) {
            var t, n = A.propHooks[this.prop];
            return this.pos = t = this.options.duration ? ot.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : e, 
            this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), 
            n && n.set ? n.set(this) : A.propHooks._default.set(this), this;
        }
    }, A.prototype.init.prototype = A.prototype, A.propHooks = {
        _default: {
            get: function(e) {
                var t;
                return null == e.elem[e.prop] || e.elem.style && null != e.elem.style[e.prop] ? (t = ot.css(e.elem, e.prop, ""), 
                t && "auto" !== t ? t : 0) : e.elem[e.prop];
            },
            set: function(e) {
                ot.fx.step[e.prop] ? ot.fx.step[e.prop](e) : e.elem.style && (null != e.elem.style[ot.cssProps[e.prop]] || ot.cssHooks[e.prop]) ? ot.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now;
            }
        }
    }, A.propHooks.scrollTop = A.propHooks.scrollLeft = {
        set: function(e) {
            e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now);
        }
    }, ot.easing = {
        linear: function(e) {
            return e;
        },
        swing: function(e) {
            return .5 - Math.cos(e * Math.PI) / 2;
        }
    }, ot.fx = A.prototype.init, ot.fx.step = {};
    var mn, gn, vn = /^(?:toggle|show|hide)$/, yn = new RegExp("^(?:([+-])=|)(" + Rt + ")([a-z%]*)$", "i"), bn = /queueHooks$/, wn = [ O ], xn = {
        "*": [ function(e, t) {
            var n = this.createTween(e, t), i = n.cur(), r = yn.exec(t), o = r && r[3] || (ot.cssNumber[e] ? "" : "px"), s = (ot.cssNumber[e] || "px" !== o && +i) && yn.exec(ot.css(n.elem, e)), a = 1, l = 20;
            if (s && s[3] !== o) {
                o = o || s[3], r = r || [], s = +i || 1;
                do a = a || ".5", s /= a, ot.style(n.elem, e, s + o); while (a !== (a = n.cur() / i) && 1 !== a && --l);
            }
            return r && (s = n.start = +s || +i || 0, n.unit = o, n.end = r[1] ? s + (r[1] + 1) * r[2] : +r[2]), 
            n;
        } ]
    };
    ot.Animation = ot.extend(H, {
        tweener: function(e, t) {
            ot.isFunction(e) ? (t = e, e = [ "*" ]) : e = e.split(" ");
            for (var n, i = 0, r = e.length; r > i; i++) n = e[i], xn[n] = xn[n] || [], xn[n].unshift(t);
        },
        prefilter: function(e, t) {
            t ? wn.unshift(e) : wn.push(e);
        }
    }), ot.speed = function(e, t, n) {
        var i = e && "object" == typeof e ? ot.extend({}, e) : {
            complete: n || !n && t || ot.isFunction(e) && e,
            duration: e,
            easing: n && t || t && !ot.isFunction(t) && t
        };
        return i.duration = ot.fx.off ? 0 : "number" == typeof i.duration ? i.duration : i.duration in ot.fx.speeds ? ot.fx.speeds[i.duration] : ot.fx.speeds._default, 
        (null == i.queue || i.queue === !0) && (i.queue = "fx"), i.old = i.complete, i.complete = function() {
            ot.isFunction(i.old) && i.old.call(this), i.queue && ot.dequeue(this, i.queue);
        }, i;
    }, ot.fn.extend({
        fadeTo: function(e, t, n, i) {
            return this.filter(Nt).css("opacity", 0).show().end().animate({
                opacity: t
            }, e, n, i);
        },
        animate: function(e, t, n, i) {
            var r = ot.isEmptyObject(e), o = ot.speed(t, n, i), s = function() {
                var t = H(this, ot.extend({}, e), o);
                (r || ot._data(this, "finish")) && t.stop(!0);
            };
            return s.finish = s, r || o.queue === !1 ? this.each(s) : this.queue(o.queue, s);
        },
        stop: function(e, t, n) {
            var i = function(e) {
                var t = e.stop;
                delete e.stop, t(n);
            };
            return "string" != typeof e && (n = t, t = e, e = void 0), t && e !== !1 && this.queue(e || "fx", []), 
            this.each(function() {
                var t = !0, r = null != e && e + "queueHooks", o = ot.timers, s = ot._data(this);
                if (r) s[r] && s[r].stop && i(s[r]); else for (r in s) s[r] && s[r].stop && bn.test(r) && i(s[r]);
                for (r = o.length; r--; ) o[r].elem !== this || null != e && o[r].queue !== e || (o[r].anim.stop(n), 
                t = !1, o.splice(r, 1));
                (t || !n) && ot.dequeue(this, e);
            });
        },
        finish: function(e) {
            return e !== !1 && (e = e || "fx"), this.each(function() {
                var t, n = ot._data(this), i = n[e + "queue"], r = n[e + "queueHooks"], o = ot.timers, s = i ? i.length : 0;
                for (n.finish = !0, ot.queue(this, e, []), r && r.stop && r.stop.call(this, !0), 
                t = o.length; t--; ) o[t].elem === this && o[t].queue === e && (o[t].anim.stop(!0), 
                o.splice(t, 1));
                for (t = 0; s > t; t++) i[t] && i[t].finish && i[t].finish.call(this);
                delete n.finish;
            });
        }
    }), ot.each([ "toggle", "show", "hide" ], function(e, t) {
        var n = ot.fn[t];
        ot.fn[t] = function(e, i, r) {
            return null == e || "boolean" == typeof e ? n.apply(this, arguments) : this.animate($(t, !0), e, i, r);
        };
    }), ot.each({
        slideDown: $("show"),
        slideUp: $("hide"),
        slideToggle: $("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, function(e, t) {
        ot.fn[e] = function(e, n, i) {
            return this.animate(t, e, n, i);
        };
    }), ot.timers = [], ot.fx.tick = function() {
        var e, t = ot.timers, n = 0;
        for (mn = ot.now(); n < t.length; n++) e = t[n], e() || t[n] !== e || t.splice(n--, 1);
        t.length || ot.fx.stop(), mn = void 0;
    }, ot.fx.timer = function(e) {
        ot.timers.push(e), e() ? ot.fx.start() : ot.timers.pop();
    }, ot.fx.interval = 13, ot.fx.start = function() {
        gn || (gn = setInterval(ot.fx.tick, ot.fx.interval));
    }, ot.fx.stop = function() {
        clearInterval(gn), gn = null;
    }, ot.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    }, ot.fn.delay = function(e, t) {
        return e = ot.fx ? ot.fx.speeds[e] || e : e, t = t || "fx", this.queue(t, function(t, n) {
            var i = setTimeout(t, e);
            n.stop = function() {
                clearTimeout(i);
            };
        });
    }, function() {
        var e, t, n, i, r = mt.createElement("div");
        r.setAttribute("className", "t"), r.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", 
        e = r.getElementsByTagName("a")[0], n = mt.createElement("select"), i = n.appendChild(mt.createElement("option")), 
        t = r.getElementsByTagName("input")[0], e.style.cssText = "top:1px", it.getSetAttribute = "t" !== r.className, 
        it.style = /top/.test(e.getAttribute("style")), it.hrefNormalized = "/a" === e.getAttribute("href"), 
        it.checkOn = !!t.value, it.optSelected = i.selected, it.enctype = !!mt.createElement("form").enctype, 
        n.disabled = !0, it.optDisabled = !i.disabled, t = mt.createElement("input"), t.setAttribute("value", ""), 
        it.input = "" === t.getAttribute("value"), t.value = "t", t.setAttribute("type", "radio"), 
        it.radioValue = "t" === t.value, e = t = n = i = r = null;
    }();
    var Cn = /\r/g;
    ot.fn.extend({
        val: function(e) {
            var t, n, i, r = this[0];
            return arguments.length ? (i = ot.isFunction(e), this.each(function(n) {
                var r;
                1 === this.nodeType && (r = i ? e.call(this, n, ot(this).val()) : e, null == r ? r = "" : "number" == typeof r ? r += "" : ot.isArray(r) && (r = ot.map(r, function(e) {
                    return null == e ? "" : e + "";
                })), t = ot.valHooks[this.type] || ot.valHooks[this.nodeName.toLowerCase()], t && "set" in t && void 0 !== t.set(this, r, "value") || (this.value = r));
            })) : r ? (t = ot.valHooks[r.type] || ot.valHooks[r.nodeName.toLowerCase()], t && "get" in t && void 0 !== (n = t.get(r, "value")) ? n : (n = r.value, 
            "string" == typeof n ? n.replace(Cn, "") : null == n ? "" : n)) : void 0;
        }
    }), ot.extend({
        valHooks: {
            option: {
                get: function(e) {
                    var t = ot.find.attr(e, "value");
                    return null != t ? t : ot.text(e);
                }
            },
            select: {
                get: function(e) {
                    for (var t, n, i = e.options, r = e.selectedIndex, o = "select-one" === e.type || 0 > r, s = o ? null : [], a = o ? r + 1 : i.length, l = 0 > r ? a : o ? r : 0; a > l; l++) if (n = i[l], 
                    !(!n.selected && l !== r || (it.optDisabled ? n.disabled : null !== n.getAttribute("disabled")) || n.parentNode.disabled && ot.nodeName(n.parentNode, "optgroup"))) {
                        if (t = ot(n).val(), o) return t;
                        s.push(t);
                    }
                    return s;
                },
                set: function(e, t) {
                    for (var n, i, r = e.options, o = ot.makeArray(t), s = r.length; s--; ) if (i = r[s], 
                    ot.inArray(ot.valHooks.option.get(i), o) >= 0) try {
                        i.selected = n = !0;
                    } catch (a) {
                        i.scrollHeight;
                    } else i.selected = !1;
                    return n || (e.selectedIndex = -1), r;
                }
            }
        }
    }), ot.each([ "radio", "checkbox" ], function() {
        ot.valHooks[this] = {
            set: function(e, t) {
                return ot.isArray(t) ? e.checked = ot.inArray(ot(e).val(), t) >= 0 : void 0;
            }
        }, it.checkOn || (ot.valHooks[this].get = function(e) {
            return null === e.getAttribute("value") ? "on" : e.value;
        });
    });
    var kn, Tn, _n = ot.expr.attrHandle, En = /^(?:checked|selected)$/i, Rn = it.getSetAttribute, Sn = it.input;
    ot.fn.extend({
        attr: function(e, t) {
            return Mt(this, ot.attr, e, t, arguments.length > 1);
        },
        removeAttr: function(e) {
            return this.each(function() {
                ot.removeAttr(this, e);
            });
        }
    }), ot.extend({
        attr: function(e, t, n) {
            var i, r, o = e.nodeType;
            return e && 3 !== o && 8 !== o && 2 !== o ? typeof e.getAttribute === Tt ? ot.prop(e, t, n) : (1 === o && ot.isXMLDoc(e) || (t = t.toLowerCase(), 
            i = ot.attrHooks[t] || (ot.expr.match.bool.test(t) ? Tn : kn)), void 0 === n ? i && "get" in i && null !== (r = i.get(e, t)) ? r : (r = ot.find.attr(e, t), 
            null == r ? void 0 : r) : null !== n ? i && "set" in i && void 0 !== (r = i.set(e, n, t)) ? r : (e.setAttribute(t, n + ""), 
            n) : void ot.removeAttr(e, t)) : void 0;
        },
        removeAttr: function(e, t) {
            var n, i, r = 0, o = t && t.match(wt);
            if (o && 1 === e.nodeType) for (;n = o[r++]; ) i = ot.propFix[n] || n, ot.expr.match.bool.test(n) ? Sn && Rn || !En.test(n) ? e[i] = !1 : e[ot.camelCase("default-" + n)] = e[i] = !1 : ot.attr(e, n, ""), 
            e.removeAttribute(Rn ? n : i);
        },
        attrHooks: {
            type: {
                set: function(e, t) {
                    if (!it.radioValue && "radio" === t && ot.nodeName(e, "input")) {
                        var n = e.value;
                        return e.setAttribute("type", t), n && (e.value = n), t;
                    }
                }
            }
        }
    }), Tn = {
        set: function(e, t, n) {
            return t === !1 ? ot.removeAttr(e, n) : Sn && Rn || !En.test(n) ? e.setAttribute(!Rn && ot.propFix[n] || n, n) : e[ot.camelCase("default-" + n)] = e[n] = !0, 
            n;
        }
    }, ot.each(ot.expr.match.bool.source.match(/\w+/g), function(e, t) {
        var n = _n[t] || ot.find.attr;
        _n[t] = Sn && Rn || !En.test(t) ? function(e, t, i) {
            var r, o;
            return i || (o = _n[t], _n[t] = r, r = null != n(e, t, i) ? t.toLowerCase() : null, 
            _n[t] = o), r;
        } : function(e, t, n) {
            return n ? void 0 : e[ot.camelCase("default-" + t)] ? t.toLowerCase() : null;
        };
    }), Sn && Rn || (ot.attrHooks.value = {
        set: function(e, t, n) {
            return ot.nodeName(e, "input") ? void (e.defaultValue = t) : kn && kn.set(e, t, n);
        }
    }), Rn || (kn = {
        set: function(e, t, n) {
            var i = e.getAttributeNode(n);
            return i || e.setAttributeNode(i = e.ownerDocument.createAttribute(n)), i.value = t += "", 
            "value" === n || t === e.getAttribute(n) ? t : void 0;
        }
    }, _n.id = _n.name = _n.coords = function(e, t, n) {
        var i;
        return n ? void 0 : (i = e.getAttributeNode(t)) && "" !== i.value ? i.value : null;
    }, ot.valHooks.button = {
        get: function(e, t) {
            var n = e.getAttributeNode(t);
            return n && n.specified ? n.value : void 0;
        },
        set: kn.set
    }, ot.attrHooks.contenteditable = {
        set: function(e, t, n) {
            kn.set(e, "" === t ? !1 : t, n);
        }
    }, ot.each([ "width", "height" ], function(e, t) {
        ot.attrHooks[t] = {
            set: function(e, n) {
                return "" === n ? (e.setAttribute(t, "auto"), n) : void 0;
            }
        };
    })), it.style || (ot.attrHooks.style = {
        get: function(e) {
            return e.style.cssText || void 0;
        },
        set: function(e, t) {
            return e.style.cssText = t + "";
        }
    });
    var Nn = /^(?:input|select|textarea|button|object)$/i, Mn = /^(?:a|area)$/i;
    ot.fn.extend({
        prop: function(e, t) {
            return Mt(this, ot.prop, e, t, arguments.length > 1);
        },
        removeProp: function(e) {
            return e = ot.propFix[e] || e, this.each(function() {
                try {
                    this[e] = void 0, delete this[e];
                } catch (t) {}
            });
        }
    }), ot.extend({
        propFix: {
            "for": "htmlFor",
            "class": "className"
        },
        prop: function(e, t, n) {
            var i, r, o, s = e.nodeType;
            return e && 3 !== s && 8 !== s && 2 !== s ? (o = 1 !== s || !ot.isXMLDoc(e), o && (t = ot.propFix[t] || t, 
            r = ot.propHooks[t]), void 0 !== n ? r && "set" in r && void 0 !== (i = r.set(e, n, t)) ? i : e[t] = n : r && "get" in r && null !== (i = r.get(e, t)) ? i : e[t]) : void 0;
        },
        propHooks: {
            tabIndex: {
                get: function(e) {
                    var t = ot.find.attr(e, "tabindex");
                    return t ? parseInt(t, 10) : Nn.test(e.nodeName) || Mn.test(e.nodeName) && e.href ? 0 : -1;
                }
            }
        }
    }), it.hrefNormalized || ot.each([ "href", "src" ], function(e, t) {
        ot.propHooks[t] = {
            get: function(e) {
                return e.getAttribute(t, 4);
            }
        };
    }), it.optSelected || (ot.propHooks.selected = {
        get: function(e) {
            var t = e.parentNode;
            return t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex), null;
        }
    }), ot.each([ "tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable" ], function() {
        ot.propFix[this.toLowerCase()] = this;
    }), it.enctype || (ot.propFix.enctype = "encoding");
    var Pn = /[\t\r\n\f]/g;
    ot.fn.extend({
        addClass: function(e) {
            var t, n, i, r, o, s, a = 0, l = this.length, c = "string" == typeof e && e;
            if (ot.isFunction(e)) return this.each(function(t) {
                ot(this).addClass(e.call(this, t, this.className));
            });
            if (c) for (t = (e || "").match(wt) || []; l > a; a++) if (n = this[a], i = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(Pn, " ") : " ")) {
                for (o = 0; r = t[o++]; ) i.indexOf(" " + r + " ") < 0 && (i += r + " ");
                s = ot.trim(i), n.className !== s && (n.className = s);
            }
            return this;
        },
        removeClass: function(e) {
            var t, n, i, r, o, s, a = 0, l = this.length, c = 0 === arguments.length || "string" == typeof e && e;
            if (ot.isFunction(e)) return this.each(function(t) {
                ot(this).removeClass(e.call(this, t, this.className));
            });
            if (c) for (t = (e || "").match(wt) || []; l > a; a++) if (n = this[a], i = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(Pn, " ") : "")) {
                for (o = 0; r = t[o++]; ) for (;i.indexOf(" " + r + " ") >= 0; ) i = i.replace(" " + r + " ", " ");
                s = e ? ot.trim(i) : "", n.className !== s && (n.className = s);
            }
            return this;
        },
        toggleClass: function(e, t) {
            var n = typeof e;
            return "boolean" == typeof t && "string" === n ? t ? this.addClass(e) : this.removeClass(e) : this.each(ot.isFunction(e) ? function(n) {
                ot(this).toggleClass(e.call(this, n, this.className, t), t);
            } : function() {
                if ("string" === n) for (var t, i = 0, r = ot(this), o = e.match(wt) || []; t = o[i++]; ) r.hasClass(t) ? r.removeClass(t) : r.addClass(t); else (n === Tt || "boolean" === n) && (this.className && ot._data(this, "__className__", this.className), 
                this.className = this.className || e === !1 ? "" : ot._data(this, "__className__") || "");
            });
        },
        hasClass: function(e) {
            for (var t = " " + e + " ", n = 0, i = this.length; i > n; n++) if (1 === this[n].nodeType && (" " + this[n].className + " ").replace(Pn, " ").indexOf(t) >= 0) return !0;
            return !1;
        }
    }), ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(e, t) {
        ot.fn[t] = function(e, n) {
            return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t);
        };
    }), ot.fn.extend({
        hover: function(e, t) {
            return this.mouseenter(e).mouseleave(t || e);
        },
        bind: function(e, t, n) {
            return this.on(e, null, t, n);
        },
        unbind: function(e, t) {
            return this.off(e, null, t);
        },
        delegate: function(e, t, n, i) {
            return this.on(t, e, n, i);
        },
        undelegate: function(e, t, n) {
            return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n);
        }
    });
    var An = ot.now(), Dn = /\?/, $n = /(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
    ot.parseJSON = function(t) {
        if (e.JSON && e.JSON.parse) return e.JSON.parse(t + "");
        var n, i = null, r = ot.trim(t + "");
        return r && !ot.trim(r.replace($n, function(e, t, r, o) {
            return n && t && (i = 0), 0 === i ? e : (n = r || t, i += !o - !r, "");
        })) ? Function("return " + r)() : ot.error("Invalid JSON: " + t);
    }, ot.parseXML = function(t) {
        var n, i;
        if (!t || "string" != typeof t) return null;
        try {
            e.DOMParser ? (i = new DOMParser(), n = i.parseFromString(t, "text/xml")) : (n = new ActiveXObject("Microsoft.XMLDOM"), 
            n.async = "false", n.loadXML(t));
        } catch (r) {
            n = void 0;
        }
        return n && n.documentElement && !n.getElementsByTagName("parsererror").length || ot.error("Invalid XML: " + t), 
        n;
    };
    var jn, On, Fn = /#.*$/, Hn = /([?&])_=[^&]*/, Ln = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm, qn = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/, Bn = /^(?:GET|HEAD)$/, In = /^\/\//, zn = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/, Un = {}, Wn = {}, Vn = "*/".concat("*");
    try {
        On = location.href;
    } catch (Xn) {
        On = mt.createElement("a"), On.href = "", On = On.href;
    }
    jn = zn.exec(On.toLowerCase()) || [], ot.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: On,
            type: "GET",
            isLocal: qn.test(jn[1]),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": Vn,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": ot.parseJSON,
                "text xml": ot.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function(e, t) {
            return t ? B(B(e, ot.ajaxSettings), t) : B(ot.ajaxSettings, e);
        },
        ajaxPrefilter: L(Un),
        ajaxTransport: L(Wn),
        ajax: function(e, t) {
            function n(e, t, n, i) {
                var r, u, v, y, w, C = t;
                2 !== b && (b = 2, a && clearTimeout(a), c = void 0, s = i || "", x.readyState = e > 0 ? 4 : 0, 
                r = e >= 200 && 300 > e || 304 === e, n && (y = I(d, x, n)), y = z(d, y, x, r), 
                r ? (d.ifModified && (w = x.getResponseHeader("Last-Modified"), w && (ot.lastModified[o] = w), 
                w = x.getResponseHeader("etag"), w && (ot.etag[o] = w)), 204 === e || "HEAD" === d.type ? C = "nocontent" : 304 === e ? C = "notmodified" : (C = y.state, 
                u = y.data, v = y.error, r = !v)) : (v = C, (e || !C) && (C = "error", 0 > e && (e = 0))), 
                x.status = e, x.statusText = (t || C) + "", r ? f.resolveWith(h, [ u, C, x ]) : f.rejectWith(h, [ x, C, v ]), 
                x.statusCode(g), g = void 0, l && p.trigger(r ? "ajaxSuccess" : "ajaxError", [ x, d, r ? u : v ]), 
                m.fireWith(h, [ x, C ]), l && (p.trigger("ajaxComplete", [ x, d ]), --ot.active || ot.event.trigger("ajaxStop")));
            }
            "object" == typeof e && (t = e, e = void 0), t = t || {};
            var i, r, o, s, a, l, c, u, d = ot.ajaxSetup({}, t), h = d.context || d, p = d.context && (h.nodeType || h.jquery) ? ot(h) : ot.event, f = ot.Deferred(), m = ot.Callbacks("once memory"), g = d.statusCode || {}, v = {}, y = {}, b = 0, w = "canceled", x = {
                readyState: 0,
                getResponseHeader: function(e) {
                    var t;
                    if (2 === b) {
                        if (!u) for (u = {}; t = Ln.exec(s); ) u[t[1].toLowerCase()] = t[2];
                        t = u[e.toLowerCase()];
                    }
                    return null == t ? null : t;
                },
                getAllResponseHeaders: function() {
                    return 2 === b ? s : null;
                },
                setRequestHeader: function(e, t) {
                    var n = e.toLowerCase();
                    return b || (e = y[n] = y[n] || e, v[e] = t), this;
                },
                overrideMimeType: function(e) {
                    return b || (d.mimeType = e), this;
                },
                statusCode: function(e) {
                    var t;
                    if (e) if (2 > b) for (t in e) g[t] = [ g[t], e[t] ]; else x.always(e[x.status]);
                    return this;
                },
                abort: function(e) {
                    var t = e || w;
                    return c && c.abort(t), n(0, t), this;
                }
            };
            if (f.promise(x).complete = m.add, x.success = x.done, x.error = x.fail, d.url = ((e || d.url || On) + "").replace(Fn, "").replace(In, jn[1] + "//"), 
            d.type = t.method || t.type || d.method || d.type, d.dataTypes = ot.trim(d.dataType || "*").toLowerCase().match(wt) || [ "" ], 
            null == d.crossDomain && (i = zn.exec(d.url.toLowerCase()), d.crossDomain = !(!i || i[1] === jn[1] && i[2] === jn[2] && (i[3] || ("http:" === i[1] ? "80" : "443")) === (jn[3] || ("http:" === jn[1] ? "80" : "443")))), 
            d.data && d.processData && "string" != typeof d.data && (d.data = ot.param(d.data, d.traditional)), 
            q(Un, d, t, x), 2 === b) return x;
            l = d.global, l && 0 === ot.active++ && ot.event.trigger("ajaxStart"), d.type = d.type.toUpperCase(), 
            d.hasContent = !Bn.test(d.type), o = d.url, d.hasContent || (d.data && (o = d.url += (Dn.test(o) ? "&" : "?") + d.data, 
            delete d.data), d.cache === !1 && (d.url = Hn.test(o) ? o.replace(Hn, "$1_=" + An++) : o + (Dn.test(o) ? "&" : "?") + "_=" + An++)), 
            d.ifModified && (ot.lastModified[o] && x.setRequestHeader("If-Modified-Since", ot.lastModified[o]), 
            ot.etag[o] && x.setRequestHeader("If-None-Match", ot.etag[o])), (d.data && d.hasContent && d.contentType !== !1 || t.contentType) && x.setRequestHeader("Content-Type", d.contentType), 
            x.setRequestHeader("Accept", d.dataTypes[0] && d.accepts[d.dataTypes[0]] ? d.accepts[d.dataTypes[0]] + ("*" !== d.dataTypes[0] ? ", " + Vn + "; q=0.01" : "") : d.accepts["*"]);
            for (r in d.headers) x.setRequestHeader(r, d.headers[r]);
            if (d.beforeSend && (d.beforeSend.call(h, x, d) === !1 || 2 === b)) return x.abort();
            w = "abort";
            for (r in {
                success: 1,
                error: 1,
                complete: 1
            }) x[r](d[r]);
            if (c = q(Wn, d, t, x)) {
                x.readyState = 1, l && p.trigger("ajaxSend", [ x, d ]), d.async && d.timeout > 0 && (a = setTimeout(function() {
                    x.abort("timeout");
                }, d.timeout));
                try {
                    b = 1, c.send(v, n);
                } catch (C) {
                    if (!(2 > b)) throw C;
                    n(-1, C);
                }
            } else n(-1, "No Transport");
            return x;
        },
        getJSON: function(e, t, n) {
            return ot.get(e, t, n, "json");
        },
        getScript: function(e, t) {
            return ot.get(e, void 0, t, "script");
        }
    }), ot.each([ "get", "post" ], function(e, t) {
        ot[t] = function(e, n, i, r) {
            return ot.isFunction(n) && (r = r || i, i = n, n = void 0), ot.ajax({
                url: e,
                type: t,
                dataType: r,
                data: n,
                success: i
            });
        };
    }), ot.each([ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function(e, t) {
        ot.fn[t] = function(e) {
            return this.on(t, e);
        };
    }), ot._evalUrl = function(e) {
        return ot.ajax({
            url: e,
            type: "GET",
            dataType: "script",
            async: !1,
            global: !1,
            "throws": !0
        });
    }, ot.fn.extend({
        wrapAll: function(e) {
            if (ot.isFunction(e)) return this.each(function(t) {
                ot(this).wrapAll(e.call(this, t));
            });
            if (this[0]) {
                var t = ot(e, this[0].ownerDocument).eq(0).clone(!0);
                this[0].parentNode && t.insertBefore(this[0]), t.map(function() {
                    for (var e = this; e.firstChild && 1 === e.firstChild.nodeType; ) e = e.firstChild;
                    return e;
                }).append(this);
            }
            return this;
        },
        wrapInner: function(e) {
            return this.each(ot.isFunction(e) ? function(t) {
                ot(this).wrapInner(e.call(this, t));
            } : function() {
                var t = ot(this), n = t.contents();
                n.length ? n.wrapAll(e) : t.append(e);
            });
        },
        wrap: function(e) {
            var t = ot.isFunction(e);
            return this.each(function(n) {
                ot(this).wrapAll(t ? e.call(this, n) : e);
            });
        },
        unwrap: function() {
            return this.parent().each(function() {
                ot.nodeName(this, "body") || ot(this).replaceWith(this.childNodes);
            }).end();
        }
    }), ot.expr.filters.hidden = function(e) {
        return e.offsetWidth <= 0 && e.offsetHeight <= 0 || !it.reliableHiddenOffsets() && "none" === (e.style && e.style.display || ot.css(e, "display"));
    }, ot.expr.filters.visible = function(e) {
        return !ot.expr.filters.hidden(e);
    };
    var Qn = /%20/g, Kn = /\[\]$/, Yn = /\r?\n/g, Jn = /^(?:submit|button|image|reset|file)$/i, Gn = /^(?:input|select|textarea|keygen)/i;
    ot.param = function(e, t) {
        var n, i = [], r = function(e, t) {
            t = ot.isFunction(t) ? t() : null == t ? "" : t, i[i.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t);
        };
        if (void 0 === t && (t = ot.ajaxSettings && ot.ajaxSettings.traditional), ot.isArray(e) || e.jquery && !ot.isPlainObject(e)) ot.each(e, function() {
            r(this.name, this.value);
        }); else for (n in e) U(n, e[n], t, r);
        return i.join("&").replace(Qn, "+");
    }, ot.fn.extend({
        serialize: function() {
            return ot.param(this.serializeArray());
        },
        serializeArray: function() {
            return this.map(function() {
                var e = ot.prop(this, "elements");
                return e ? ot.makeArray(e) : this;
            }).filter(function() {
                var e = this.type;
                return this.name && !ot(this).is(":disabled") && Gn.test(this.nodeName) && !Jn.test(e) && (this.checked || !Pt.test(e));
            }).map(function(e, t) {
                var n = ot(this).val();
                return null == n ? null : ot.isArray(n) ? ot.map(n, function(e) {
                    return {
                        name: t.name,
                        value: e.replace(Yn, "\r\n")
                    };
                }) : {
                    name: t.name,
                    value: n.replace(Yn, "\r\n")
                };
            }).get();
        }
    }), ot.ajaxSettings.xhr = void 0 !== e.ActiveXObject ? function() {
        return !this.isLocal && /^(get|post|head|put|delete|options)$/i.test(this.type) && W() || V();
    } : W;
    var Zn = 0, ei = {}, ti = ot.ajaxSettings.xhr();
    e.ActiveXObject && ot(e).on("unload", function() {
        for (var e in ei) ei[e](void 0, !0);
    }), it.cors = !!ti && "withCredentials" in ti, ti = it.ajax = !!ti, ti && ot.ajaxTransport(function(e) {
        if (!e.crossDomain || it.cors) {
            var t;
            return {
                send: function(n, i) {
                    var r, o = e.xhr(), s = ++Zn;
                    if (o.open(e.type, e.url, e.async, e.username, e.password), e.xhrFields) for (r in e.xhrFields) o[r] = e.xhrFields[r];
                    e.mimeType && o.overrideMimeType && o.overrideMimeType(e.mimeType), e.crossDomain || n["X-Requested-With"] || (n["X-Requested-With"] = "XMLHttpRequest");
                    for (r in n) void 0 !== n[r] && o.setRequestHeader(r, n[r] + "");
                    o.send(e.hasContent && e.data || null), t = function(n, r) {
                        var a, l, c;
                        if (t && (r || 4 === o.readyState)) if (delete ei[s], t = void 0, o.onreadystatechange = ot.noop, 
                        r) 4 !== o.readyState && o.abort(); else {
                            c = {}, a = o.status, "string" == typeof o.responseText && (c.text = o.responseText);
                            try {
                                l = o.statusText;
                            } catch (u) {
                                l = "";
                            }
                            a || !e.isLocal || e.crossDomain ? 1223 === a && (a = 204) : a = c.text ? 200 : 404;
                        }
                        c && i(a, l, c, o.getAllResponseHeaders());
                    }, e.async ? 4 === o.readyState ? setTimeout(t) : o.onreadystatechange = ei[s] = t : t();
                },
                abort: function() {
                    t && t(void 0, !0);
                }
            };
        }
    }), ot.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /(?:java|ecma)script/
        },
        converters: {
            "text script": function(e) {
                return ot.globalEval(e), e;
            }
        }
    }), ot.ajaxPrefilter("script", function(e) {
        void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET", e.global = !1);
    }), ot.ajaxTransport("script", function(e) {
        if (e.crossDomain) {
            var t, n = mt.head || ot("head")[0] || mt.documentElement;
            return {
                send: function(i, r) {
                    t = mt.createElement("script"), t.async = !0, e.scriptCharset && (t.charset = e.scriptCharset), 
                    t.src = e.url, t.onload = t.onreadystatechange = function(e, n) {
                        (n || !t.readyState || /loaded|complete/.test(t.readyState)) && (t.onload = t.onreadystatechange = null, 
                        t.parentNode && t.parentNode.removeChild(t), t = null, n || r(200, "success"));
                    }, n.insertBefore(t, n.firstChild);
                },
                abort: function() {
                    t && t.onload(void 0, !0);
                }
            };
        }
    });
    var ni = [], ii = /(=)\?(?=&|$)|\?\?/;
    ot.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var e = ni.pop() || ot.expando + "_" + An++;
            return this[e] = !0, e;
        }
    }), ot.ajaxPrefilter("json jsonp", function(t, n, i) {
        var r, o, s, a = t.jsonp !== !1 && (ii.test(t.url) ? "url" : "string" == typeof t.data && !(t.contentType || "").indexOf("application/x-www-form-urlencoded") && ii.test(t.data) && "data");
        return a || "jsonp" === t.dataTypes[0] ? (r = t.jsonpCallback = ot.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback, 
        a ? t[a] = t[a].replace(ii, "$1" + r) : t.jsonp !== !1 && (t.url += (Dn.test(t.url) ? "&" : "?") + t.jsonp + "=" + r), 
        t.converters["script json"] = function() {
            return s || ot.error(r + " was not called"), s[0];
        }, t.dataTypes[0] = "json", o = e[r], e[r] = function() {
            s = arguments;
        }, i.always(function() {
            e[r] = o, t[r] && (t.jsonpCallback = n.jsonpCallback, ni.push(r)), s && ot.isFunction(o) && o(s[0]), 
            s = o = void 0;
        }), "script") : void 0;
    }), ot.parseHTML = function(e, t, n) {
        if (!e || "string" != typeof e) return null;
        "boolean" == typeof t && (n = t, t = !1), t = t || mt;
        var i = ht.exec(e), r = !n && [];
        return i ? [ t.createElement(i[1]) ] : (i = ot.buildFragment([ e ], t, r), r && r.length && ot(r).remove(), 
        ot.merge([], i.childNodes));
    };
    var ri = ot.fn.load;
    ot.fn.load = function(e, t, n) {
        if ("string" != typeof e && ri) return ri.apply(this, arguments);
        var i, r, o, s = this, a = e.indexOf(" ");
        return a >= 0 && (i = e.slice(a, e.length), e = e.slice(0, a)), ot.isFunction(t) ? (n = t, 
        t = void 0) : t && "object" == typeof t && (o = "POST"), s.length > 0 && ot.ajax({
            url: e,
            type: o,
            dataType: "html",
            data: t
        }).done(function(e) {
            r = arguments, s.html(i ? ot("<div>").append(ot.parseHTML(e)).find(i) : e);
        }).complete(n && function(e, t) {
            s.each(n, r || [ e.responseText, t, e ]);
        }), this;
    }, ot.expr.filters.animated = function(e) {
        return ot.grep(ot.timers, function(t) {
            return e === t.elem;
        }).length;
    };
    var oi = e.document.documentElement;
    ot.offset = {
        setOffset: function(e, t, n) {
            var i, r, o, s, a, l, c, u = ot.css(e, "position"), d = ot(e), h = {};
            "static" === u && (e.style.position = "relative"), a = d.offset(), o = ot.css(e, "top"), 
            l = ot.css(e, "left"), c = ("absolute" === u || "fixed" === u) && ot.inArray("auto", [ o, l ]) > -1, 
            c ? (i = d.position(), s = i.top, r = i.left) : (s = parseFloat(o) || 0, r = parseFloat(l) || 0), 
            ot.isFunction(t) && (t = t.call(e, n, a)), null != t.top && (h.top = t.top - a.top + s), 
            null != t.left && (h.left = t.left - a.left + r), "using" in t ? t.using.call(e, h) : d.css(h);
        }
    }, ot.fn.extend({
        offset: function(e) {
            if (arguments.length) return void 0 === e ? this : this.each(function(t) {
                ot.offset.setOffset(this, e, t);
            });
            var t, n, i = {
                top: 0,
                left: 0
            }, r = this[0], o = r && r.ownerDocument;
            return o ? (t = o.documentElement, ot.contains(t, r) ? (typeof r.getBoundingClientRect !== Tt && (i = r.getBoundingClientRect()), 
            n = X(o), {
                top: i.top + (n.pageYOffset || t.scrollTop) - (t.clientTop || 0),
                left: i.left + (n.pageXOffset || t.scrollLeft) - (t.clientLeft || 0)
            }) : i) : void 0;
        },
        position: function() {
            if (this[0]) {
                var e, t, n = {
                    top: 0,
                    left: 0
                }, i = this[0];
                return "fixed" === ot.css(i, "position") ? t = i.getBoundingClientRect() : (e = this.offsetParent(), 
                t = this.offset(), ot.nodeName(e[0], "html") || (n = e.offset()), n.top += ot.css(e[0], "borderTopWidth", !0), 
                n.left += ot.css(e[0], "borderLeftWidth", !0)), {
                    top: t.top - n.top - ot.css(i, "marginTop", !0),
                    left: t.left - n.left - ot.css(i, "marginLeft", !0)
                };
            }
        },
        offsetParent: function() {
            return this.map(function() {
                for (var e = this.offsetParent || oi; e && !ot.nodeName(e, "html") && "static" === ot.css(e, "position"); ) e = e.offsetParent;
                return e || oi;
            });
        }
    }), ot.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(e, t) {
        var n = /Y/.test(t);
        ot.fn[e] = function(i) {
            return Mt(this, function(e, i, r) {
                var o = X(e);
                return void 0 === r ? o ? t in o ? o[t] : o.document.documentElement[i] : e[i] : void (o ? o.scrollTo(n ? ot(o).scrollLeft() : r, n ? r : ot(o).scrollTop()) : e[i] = r);
            }, e, i, arguments.length, null);
        };
    }), ot.each([ "top", "left" ], function(e, t) {
        ot.cssHooks[t] = E(it.pixelPosition, function(e, n) {
            return n ? (n = nn(e, t), on.test(n) ? ot(e).position()[t] + "px" : n) : void 0;
        });
    }), ot.each({
        Height: "height",
        Width: "width"
    }, function(e, t) {
        ot.each({
            padding: "inner" + e,
            content: t,
            "": "outer" + e
        }, function(n, i) {
            ot.fn[i] = function(i, r) {
                var o = arguments.length && (n || "boolean" != typeof i), s = n || (i === !0 || r === !0 ? "margin" : "border");
                return Mt(this, function(t, n, i) {
                    var r;
                    return ot.isWindow(t) ? t.document.documentElement["client" + e] : 9 === t.nodeType ? (r = t.documentElement, 
                    Math.max(t.body["scroll" + e], r["scroll" + e], t.body["offset" + e], r["offset" + e], r["client" + e])) : void 0 === i ? ot.css(t, n, s) : ot.style(t, n, i, s);
                }, t, o ? i : void 0, o, null);
            };
        });
    }), ot.fn.size = function() {
        return this.length;
    }, ot.fn.andSelf = ot.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function() {
        return ot;
    });
    var si = e.jQuery, ai = e.$;
    return ot.noConflict = function(t) {
        return e.$ === ot && (e.$ = ai), t && e.jQuery === ot && (e.jQuery = si), ot;
    }, typeof t === Tt && (e.jQuery = e.$ = ot), ot;
}), function() {
    var e = this, t = e._, n = {}, i = Array.prototype, r = Object.prototype, o = Function.prototype, s = i.push, a = i.slice, l = i.concat, c = r.toString, u = r.hasOwnProperty, d = i.forEach, h = i.map, p = i.reduce, f = i.reduceRight, m = i.filter, g = i.every, v = i.some, y = i.indexOf, b = i.lastIndexOf, w = Array.isArray, x = Object.keys, C = o.bind, k = function(e) {
        return e instanceof k ? e : this instanceof k ? void (this._wrapped = e) : new k(e);
    };
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = k), 
    exports._ = k) : e._ = k, k.VERSION = "1.6.0";
    var T = k.each = k.forEach = function(e, t, i) {
        if (null == e) return e;
        if (d && e.forEach === d) e.forEach(t, i); else if (e.length === +e.length) {
            for (var r = 0, o = e.length; o > r; r++) if (t.call(i, e[r], r, e) === n) return;
        } else for (var s = k.keys(e), r = 0, o = s.length; o > r; r++) if (t.call(i, e[s[r]], s[r], e) === n) return;
        return e;
    };
    k.map = k.collect = function(e, t, n) {
        var i = [];
        return null == e ? i : h && e.map === h ? e.map(t, n) : (T(e, function(e, r, o) {
            i.push(t.call(n, e, r, o));
        }), i);
    };
    var _ = "Reduce of empty array with no initial value";
    k.reduce = k.foldl = k.inject = function(e, t, n, i) {
        var r = arguments.length > 2;
        if (null == e && (e = []), p && e.reduce === p) return i && (t = k.bind(t, i)), 
        r ? e.reduce(t, n) : e.reduce(t);
        if (T(e, function(e, o, s) {
            r ? n = t.call(i, n, e, o, s) : (n = e, r = !0);
        }), !r) throw new TypeError(_);
        return n;
    }, k.reduceRight = k.foldr = function(e, t, n, i) {
        var r = arguments.length > 2;
        if (null == e && (e = []), f && e.reduceRight === f) return i && (t = k.bind(t, i)), 
        r ? e.reduceRight(t, n) : e.reduceRight(t);
        var o = e.length;
        if (o !== +o) {
            var s = k.keys(e);
            o = s.length;
        }
        if (T(e, function(a, l, c) {
            l = s ? s[--o] : --o, r ? n = t.call(i, n, e[l], l, c) : (n = e[l], r = !0);
        }), !r) throw new TypeError(_);
        return n;
    }, k.find = k.detect = function(e, t, n) {
        var i;
        return E(e, function(e, r, o) {
            return t.call(n, e, r, o) ? (i = e, !0) : void 0;
        }), i;
    }, k.filter = k.select = function(e, t, n) {
        var i = [];
        return null == e ? i : m && e.filter === m ? e.filter(t, n) : (T(e, function(e, r, o) {
            t.call(n, e, r, o) && i.push(e);
        }), i);
    }, k.reject = function(e, t, n) {
        return k.filter(e, function(e, i, r) {
            return !t.call(n, e, i, r);
        }, n);
    }, k.every = k.all = function(e, t, i) {
        t || (t = k.identity);
        var r = !0;
        return null == e ? r : g && e.every === g ? e.every(t, i) : (T(e, function(e, o, s) {
            return (r = r && t.call(i, e, o, s)) ? void 0 : n;
        }), !!r);
    };
    var E = k.some = k.any = function(e, t, i) {
        t || (t = k.identity);
        var r = !1;
        return null == e ? r : v && e.some === v ? e.some(t, i) : (T(e, function(e, o, s) {
            return r || (r = t.call(i, e, o, s)) ? n : void 0;
        }), !!r);
    };
    k.contains = k.include = function(e, t) {
        return null == e ? !1 : y && e.indexOf === y ? -1 != e.indexOf(t) : E(e, function(e) {
            return e === t;
        });
    }, k.invoke = function(e, t) {
        var n = a.call(arguments, 2), i = k.isFunction(t);
        return k.map(e, function(e) {
            return (i ? t : e[t]).apply(e, n);
        });
    }, k.pluck = function(e, t) {
        return k.map(e, k.property(t));
    }, k.where = function(e, t) {
        return k.filter(e, k.matches(t));
    }, k.findWhere = function(e, t) {
        return k.find(e, k.matches(t));
    }, k.max = function(e, t, n) {
        if (!t && k.isArray(e) && e[0] === +e[0] && e.length < 65535) return Math.max.apply(Math, e);
        var i = -1 / 0, r = -1 / 0;
        return T(e, function(e, o, s) {
            var a = t ? t.call(n, e, o, s) : e;
            a > r && (i = e, r = a);
        }), i;
    }, k.min = function(e, t, n) {
        if (!t && k.isArray(e) && e[0] === +e[0] && e.length < 65535) return Math.min.apply(Math, e);
        var i = 1 / 0, r = 1 / 0;
        return T(e, function(e, o, s) {
            var a = t ? t.call(n, e, o, s) : e;
            r > a && (i = e, r = a);
        }), i;
    }, k.shuffle = function(e) {
        var t, n = 0, i = [];
        return T(e, function(e) {
            t = k.random(n++), i[n - 1] = i[t], i[t] = e;
        }), i;
    }, k.sample = function(e, t, n) {
        return null == t || n ? (e.length !== +e.length && (e = k.values(e)), e[k.random(e.length - 1)]) : k.shuffle(e).slice(0, Math.max(0, t));
    };
    var R = function(e) {
        return null == e ? k.identity : k.isFunction(e) ? e : k.property(e);
    };
    k.sortBy = function(e, t, n) {
        return t = R(t), k.pluck(k.map(e, function(e, i, r) {
            return {
                value: e,
                index: i,
                criteria: t.call(n, e, i, r)
            };
        }).sort(function(e, t) {
            var n = e.criteria, i = t.criteria;
            if (n !== i) {
                if (n > i || void 0 === n) return 1;
                if (i > n || void 0 === i) return -1;
            }
            return e.index - t.index;
        }), "value");
    };
    var S = function(e) {
        return function(t, n, i) {
            var r = {};
            return n = R(n), T(t, function(o, s) {
                var a = n.call(i, o, s, t);
                e(r, a, o);
            }), r;
        };
    };
    k.groupBy = S(function(e, t, n) {
        k.has(e, t) ? e[t].push(n) : e[t] = [ n ];
    }), k.indexBy = S(function(e, t, n) {
        e[t] = n;
    }), k.countBy = S(function(e, t) {
        k.has(e, t) ? e[t]++ : e[t] = 1;
    }), k.sortedIndex = function(e, t, n, i) {
        n = R(n);
        for (var r = n.call(i, t), o = 0, s = e.length; s > o; ) {
            var a = o + s >>> 1;
            n.call(i, e[a]) < r ? o = a + 1 : s = a;
        }
        return o;
    }, k.toArray = function(e) {
        return e ? k.isArray(e) ? a.call(e) : e.length === +e.length ? k.map(e, k.identity) : k.values(e) : [];
    }, k.size = function(e) {
        return null == e ? 0 : e.length === +e.length ? e.length : k.keys(e).length;
    }, k.first = k.head = k.take = function(e, t, n) {
        return null == e ? void 0 : null == t || n ? e[0] : 0 > t ? [] : a.call(e, 0, t);
    }, k.initial = function(e, t, n) {
        return a.call(e, 0, e.length - (null == t || n ? 1 : t));
    }, k.last = function(e, t, n) {
        return null == e ? void 0 : null == t || n ? e[e.length - 1] : a.call(e, Math.max(e.length - t, 0));
    }, k.rest = k.tail = k.drop = function(e, t, n) {
        return a.call(e, null == t || n ? 1 : t);
    }, k.compact = function(e) {
        return k.filter(e, k.identity);
    };
    var N = function(e, t, n) {
        return t && k.every(e, k.isArray) ? l.apply(n, e) : (T(e, function(e) {
            k.isArray(e) || k.isArguments(e) ? t ? s.apply(n, e) : N(e, t, n) : n.push(e);
        }), n);
    };
    k.flatten = function(e, t) {
        return N(e, t, []);
    }, k.without = function(e) {
        return k.difference(e, a.call(arguments, 1));
    }, k.partition = function(e, t) {
        var n = [], i = [];
        return T(e, function(e) {
            (t(e) ? n : i).push(e);
        }), [ n, i ];
    }, k.uniq = k.unique = function(e, t, n, i) {
        k.isFunction(t) && (i = n, n = t, t = !1);
        var r = n ? k.map(e, n, i) : e, o = [], s = [];
        return T(r, function(n, i) {
            (t ? i && s[s.length - 1] === n : k.contains(s, n)) || (s.push(n), o.push(e[i]));
        }), o;
    }, k.union = function() {
        return k.uniq(k.flatten(arguments, !0));
    }, k.intersection = function(e) {
        var t = a.call(arguments, 1);
        return k.filter(k.uniq(e), function(e) {
            return k.every(t, function(t) {
                return k.contains(t, e);
            });
        });
    }, k.difference = function(e) {
        var t = l.apply(i, a.call(arguments, 1));
        return k.filter(e, function(e) {
            return !k.contains(t, e);
        });
    }, k.zip = function() {
        for (var e = k.max(k.pluck(arguments, "length").concat(0)), t = new Array(e), n = 0; e > n; n++) t[n] = k.pluck(arguments, "" + n);
        return t;
    }, k.object = function(e, t) {
        if (null == e) return {};
        for (var n = {}, i = 0, r = e.length; r > i; i++) t ? n[e[i]] = t[i] : n[e[i][0]] = e[i][1];
        return n;
    }, k.indexOf = function(e, t, n) {
        if (null == e) return -1;
        var i = 0, r = e.length;
        if (n) {
            if ("number" != typeof n) return i = k.sortedIndex(e, t), e[i] === t ? i : -1;
            i = 0 > n ? Math.max(0, r + n) : n;
        }
        if (y && e.indexOf === y) return e.indexOf(t, n);
        for (;r > i; i++) if (e[i] === t) return i;
        return -1;
    }, k.lastIndexOf = function(e, t, n) {
        if (null == e) return -1;
        var i = null != n;
        if (b && e.lastIndexOf === b) return i ? e.lastIndexOf(t, n) : e.lastIndexOf(t);
        for (var r = i ? n : e.length; r--; ) if (e[r] === t) return r;
        return -1;
    }, k.range = function(e, t, n) {
        arguments.length <= 1 && (t = e || 0, e = 0), n = arguments[2] || 1;
        for (var i = Math.max(Math.ceil((t - e) / n), 0), r = 0, o = new Array(i); i > r; ) o[r++] = e, 
        e += n;
        return o;
    };
    var M = function() {};
    k.bind = function(e, t) {
        var n, i;
        if (C && e.bind === C) return C.apply(e, a.call(arguments, 1));
        if (!k.isFunction(e)) throw new TypeError();
        return n = a.call(arguments, 2), i = function() {
            if (!(this instanceof i)) return e.apply(t, n.concat(a.call(arguments)));
            M.prototype = e.prototype;
            var r = new M();
            M.prototype = null;
            var o = e.apply(r, n.concat(a.call(arguments)));
            return Object(o) === o ? o : r;
        };
    }, k.partial = function(e) {
        var t = a.call(arguments, 1);
        return function() {
            for (var n = 0, i = t.slice(), r = 0, o = i.length; o > r; r++) i[r] === k && (i[r] = arguments[n++]);
            for (;n < arguments.length; ) i.push(arguments[n++]);
            return e.apply(this, i);
        };
    }, k.bindAll = function(e) {
        var t = a.call(arguments, 1);
        if (0 === t.length) throw new Error("bindAll must be passed function names");
        return T(t, function(t) {
            e[t] = k.bind(e[t], e);
        }), e;
    }, k.memoize = function(e, t) {
        var n = {};
        return t || (t = k.identity), function() {
            var i = t.apply(this, arguments);
            return k.has(n, i) ? n[i] : n[i] = e.apply(this, arguments);
        };
    }, k.delay = function(e, t) {
        var n = a.call(arguments, 2);
        return setTimeout(function() {
            return e.apply(null, n);
        }, t);
    }, k.defer = function(e) {
        return k.delay.apply(k, [ e, 1 ].concat(a.call(arguments, 1)));
    }, k.throttle = function(e, t, n) {
        var i, r, o, s = null, a = 0;
        n || (n = {});
        var l = function() {
            a = n.leading === !1 ? 0 : k.now(), s = null, o = e.apply(i, r), i = r = null;
        };
        return function() {
            var c = k.now();
            a || n.leading !== !1 || (a = c);
            var u = t - (c - a);
            return i = this, r = arguments, 0 >= u ? (clearTimeout(s), s = null, a = c, o = e.apply(i, r), 
            i = r = null) : s || n.trailing === !1 || (s = setTimeout(l, u)), o;
        };
    }, k.debounce = function(e, t, n) {
        var i, r, o, s, a, l = function() {
            var c = k.now() - s;
            t > c ? i = setTimeout(l, t - c) : (i = null, n || (a = e.apply(o, r), o = r = null));
        };
        return function() {
            o = this, r = arguments, s = k.now();
            var c = n && !i;
            return i || (i = setTimeout(l, t)), c && (a = e.apply(o, r), o = r = null), a;
        };
    }, k.once = function(e) {
        var t, n = !1;
        return function() {
            return n ? t : (n = !0, t = e.apply(this, arguments), e = null, t);
        };
    }, k.wrap = function(e, t) {
        return k.partial(t, e);
    }, k.compose = function() {
        var e = arguments;
        return function() {
            for (var t = arguments, n = e.length - 1; n >= 0; n--) t = [ e[n].apply(this, t) ];
            return t[0];
        };
    }, k.after = function(e, t) {
        return function() {
            return --e < 1 ? t.apply(this, arguments) : void 0;
        };
    }, k.keys = function(e) {
        if (!k.isObject(e)) return [];
        if (x) return x(e);
        var t = [];
        for (var n in e) k.has(e, n) && t.push(n);
        return t;
    }, k.values = function(e) {
        for (var t = k.keys(e), n = t.length, i = new Array(n), r = 0; n > r; r++) i[r] = e[t[r]];
        return i;
    }, k.pairs = function(e) {
        for (var t = k.keys(e), n = t.length, i = new Array(n), r = 0; n > r; r++) i[r] = [ t[r], e[t[r]] ];
        return i;
    }, k.invert = function(e) {
        for (var t = {}, n = k.keys(e), i = 0, r = n.length; r > i; i++) t[e[n[i]]] = n[i];
        return t;
    }, k.functions = k.methods = function(e) {
        var t = [];
        for (var n in e) k.isFunction(e[n]) && t.push(n);
        return t.sort();
    }, k.extend = function(e) {
        return T(a.call(arguments, 1), function(t) {
            if (t) for (var n in t) e[n] = t[n];
        }), e;
    }, k.pick = function(e) {
        var t = {}, n = l.apply(i, a.call(arguments, 1));
        return T(n, function(n) {
            n in e && (t[n] = e[n]);
        }), t;
    }, k.omit = function(e) {
        var t = {}, n = l.apply(i, a.call(arguments, 1));
        for (var r in e) k.contains(n, r) || (t[r] = e[r]);
        return t;
    }, k.defaults = function(e) {
        return T(a.call(arguments, 1), function(t) {
            if (t) for (var n in t) void 0 === e[n] && (e[n] = t[n]);
        }), e;
    }, k.clone = function(e) {
        return k.isObject(e) ? k.isArray(e) ? e.slice() : k.extend({}, e) : e;
    }, k.tap = function(e, t) {
        return t(e), e;
    };
    var P = function(e, t, n, i) {
        if (e === t) return 0 !== e || 1 / e == 1 / t;
        if (null == e || null == t) return e === t;
        e instanceof k && (e = e._wrapped), t instanceof k && (t = t._wrapped);
        var r = c.call(e);
        if (r != c.call(t)) return !1;
        switch (r) {
          case "[object String]":
            return e == String(t);

          case "[object Number]":
            return e != +e ? t != +t : 0 == e ? 1 / e == 1 / t : e == +t;

          case "[object Date]":
          case "[object Boolean]":
            return +e == +t;

          case "[object RegExp]":
            return e.source == t.source && e.global == t.global && e.multiline == t.multiline && e.ignoreCase == t.ignoreCase;
        }
        if ("object" != typeof e || "object" != typeof t) return !1;
        for (var o = n.length; o--; ) if (n[o] == e) return i[o] == t;
        var s = e.constructor, a = t.constructor;
        if (s !== a && !(k.isFunction(s) && s instanceof s && k.isFunction(a) && a instanceof a) && "constructor" in e && "constructor" in t) return !1;
        n.push(e), i.push(t);
        var l = 0, u = !0;
        if ("[object Array]" == r) {
            if (l = e.length, u = l == t.length) for (;l-- && (u = P(e[l], t[l], n, i)); ) ;
        } else {
            for (var d in e) if (k.has(e, d) && (l++, !(u = k.has(t, d) && P(e[d], t[d], n, i)))) break;
            if (u) {
                for (d in t) if (k.has(t, d) && !l--) break;
                u = !l;
            }
        }
        return n.pop(), i.pop(), u;
    };
    k.isEqual = function(e, t) {
        return P(e, t, [], []);
    }, k.isEmpty = function(e) {
        if (null == e) return !0;
        if (k.isArray(e) || k.isString(e)) return 0 === e.length;
        for (var t in e) if (k.has(e, t)) return !1;
        return !0;
    }, k.isElement = function(e) {
        return !(!e || 1 !== e.nodeType);
    }, k.isArray = w || function(e) {
        return "[object Array]" == c.call(e);
    }, k.isObject = function(e) {
        return e === Object(e);
    }, T([ "Arguments", "Function", "String", "Number", "Date", "RegExp" ], function(e) {
        k["is" + e] = function(t) {
            return c.call(t) == "[object " + e + "]";
        };
    }), k.isArguments(arguments) || (k.isArguments = function(e) {
        return !(!e || !k.has(e, "callee"));
    }), "function" != typeof /./ && (k.isFunction = function(e) {
        return "function" == typeof e;
    }), k.isFinite = function(e) {
        return isFinite(e) && !isNaN(parseFloat(e));
    }, k.isNaN = function(e) {
        return k.isNumber(e) && e != +e;
    }, k.isBoolean = function(e) {
        return e === !0 || e === !1 || "[object Boolean]" == c.call(e);
    }, k.isNull = function(e) {
        return null === e;
    }, k.isUndefined = function(e) {
        return void 0 === e;
    }, k.has = function(e, t) {
        return u.call(e, t);
    }, k.noConflict = function() {
        return e._ = t, this;
    }, k.identity = function(e) {
        return e;
    }, k.constant = function(e) {
        return function() {
            return e;
        };
    }, k.property = function(e) {
        return function(t) {
            return t[e];
        };
    }, k.matches = function(e) {
        return function(t) {
            if (t === e) return !0;
            for (var n in e) if (e[n] !== t[n]) return !1;
            return !0;
        };
    }, k.times = function(e, t, n) {
        for (var i = Array(Math.max(0, e)), r = 0; e > r; r++) i[r] = t.call(n, r);
        return i;
    }, k.random = function(e, t) {
        return null == t && (t = e, e = 0), e + Math.floor(Math.random() * (t - e + 1));
    }, k.now = Date.now || function() {
        return new Date().getTime();
    };
    var A = {
        escape: {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#x27;"
        }
    };
    A.unescape = k.invert(A.escape);
    var D = {
        escape: new RegExp("[" + k.keys(A.escape).join("") + "]", "g"),
        unescape: new RegExp("(" + k.keys(A.unescape).join("|") + ")", "g")
    };
    k.each([ "escape", "unescape" ], function(e) {
        k[e] = function(t) {
            return null == t ? "" : ("" + t).replace(D[e], function(t) {
                return A[e][t];
            });
        };
    }), k.result = function(e, t) {
        if (null == e) return void 0;
        var n = e[t];
        return k.isFunction(n) ? n.call(e) : n;
    }, k.mixin = function(e) {
        T(k.functions(e), function(t) {
            var n = k[t] = e[t];
            k.prototype[t] = function() {
                var e = [ this._wrapped ];
                return s.apply(e, arguments), H.call(this, n.apply(k, e));
            };
        });
    };
    var $ = 0;
    k.uniqueId = function(e) {
        var t = ++$ + "";
        return e ? e + t : t;
    }, k.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
    };
    var j = /(.)^/, O = {
        "'": "'",
        "\\": "\\",
        "\r": "r",
        "\n": "n",
        "	": "t",
        "\u2028": "u2028",
        "\u2029": "u2029"
    }, F = /\\|'|\r|\n|\t|\u2028|\u2029/g;
    k.template = function(e, t, n) {
        var i;
        n = k.defaults({}, n, k.templateSettings);
        var r = new RegExp([ (n.escape || j).source, (n.interpolate || j).source, (n.evaluate || j).source ].join("|") + "|$", "g"), o = 0, s = "__p+='";
        e.replace(r, function(t, n, i, r, a) {
            return s += e.slice(o, a).replace(F, function(e) {
                return "\\" + O[e];
            }), n && (s += "'+\n((__t=(" + n + "))==null?'':_.escape(__t))+\n'"), i && (s += "'+\n((__t=(" + i + "))==null?'':__t)+\n'"), 
            r && (s += "';\n" + r + "\n__p+='"), o = a + t.length, t;
        }), s += "';\n", n.variable || (s = "with(obj||{}){\n" + s + "}\n"), s = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + s + "return __p;\n";
        try {
            i = new Function(n.variable || "obj", "_", s);
        } catch (a) {
            throw a.source = s, a;
        }
        if (t) return i(t, k);
        var l = function(e) {
            return i.call(this, e, k);
        };
        return l.source = "function(" + (n.variable || "obj") + "){\n" + s + "}", l;
    }, k.chain = function(e) {
        return k(e).chain();
    };
    var H = function(e) {
        return this._chain ? k(e).chain() : e;
    };
    k.mixin(k), T([ "pop", "push", "reverse", "shift", "sort", "splice", "unshift" ], function(e) {
        var t = i[e];
        k.prototype[e] = function() {
            var n = this._wrapped;
            return t.apply(n, arguments), "shift" != e && "splice" != e || 0 !== n.length || delete n[0], 
            H.call(this, n);
        };
    }), T([ "concat", "join", "slice" ], function(e) {
        var t = i[e];
        k.prototype[e] = function() {
            return H.call(this, t.apply(this._wrapped, arguments));
        };
    }), k.extend(k.prototype, {
        chain: function() {
            return this._chain = !0, this;
        },
        value: function() {
            return this._wrapped;
        }
    }), "function" == typeof define && define.amd && define("underscore", [], function() {
        return k;
    });
}.call(this), function(e, t) {
    if ("function" == typeof define && define.amd) define("backbone", [ "underscore", "jquery", "exports" ], function(n, i, r) {
        e.Backbone = t(e, r, n, i);
    }); else if ("undefined" != typeof exports) {
        var n = require("underscore");
        t(e, exports, n);
    } else e.Backbone = t(e, {}, e._, e.jQuery || e.Zepto || e.ender || e.$);
}(this, function(e, t, n, i) {
    {
        var r = e.Backbone, o = [], s = (o.push, o.slice);
        o.splice;
    }
    t.VERSION = "1.1.2", t.$ = i, t.noConflict = function() {
        return e.Backbone = r, this;
    }, t.emulateHTTP = !1, t.emulateJSON = !1;
    var a = t.Events = {
        on: function(e, t, n) {
            if (!c(this, "on", e, [ t, n ]) || !t) return this;
            this._events || (this._events = {});
            var i = this._events[e] || (this._events[e] = []);
            return i.push({
                callback: t,
                context: n,
                ctx: n || this
            }), this;
        },
        once: function(e, t, i) {
            if (!c(this, "once", e, [ t, i ]) || !t) return this;
            var r = this, o = n.once(function() {
                r.off(e, o), t.apply(this, arguments);
            });
            return o._callback = t, this.on(e, o, i);
        },
        off: function(e, t, i) {
            var r, o, s, a, l, u, d, h;
            if (!this._events || !c(this, "off", e, [ t, i ])) return this;
            if (!e && !t && !i) return this._events = void 0, this;
            for (a = e ? [ e ] : n.keys(this._events), l = 0, u = a.length; u > l; l++) if (e = a[l], 
            s = this._events[e]) {
                if (this._events[e] = r = [], t || i) for (d = 0, h = s.length; h > d; d++) o = s[d], 
                (t && t !== o.callback && t !== o.callback._callback || i && i !== o.context) && r.push(o);
                r.length || delete this._events[e];
            }
            return this;
        },
        trigger: function(e) {
            if (!this._events) return this;
            var t = s.call(arguments, 1);
            if (!c(this, "trigger", e, t)) return this;
            var n = this._events[e], i = this._events.all;
            return n && u(n, t), i && u(i, arguments), this;
        },
        stopListening: function(e, t, i) {
            var r = this._listeningTo;
            if (!r) return this;
            var o = !t && !i;
            i || "object" != typeof t || (i = this), e && ((r = {})[e._listenId] = e);
            for (var s in r) e = r[s], e.off(t, i, this), (o || n.isEmpty(e._events)) && delete this._listeningTo[s];
            return this;
        }
    }, l = /\s+/, c = function(e, t, n, i) {
        if (!n) return !0;
        if ("object" == typeof n) {
            for (var r in n) e[t].apply(e, [ r, n[r] ].concat(i));
            return !1;
        }
        if (l.test(n)) {
            for (var o = n.split(l), s = 0, a = o.length; a > s; s++) e[t].apply(e, [ o[s] ].concat(i));
            return !1;
        }
        return !0;
    }, u = function(e, t) {
        var n, i = -1, r = e.length, o = t[0], s = t[1], a = t[2];
        switch (t.length) {
          case 0:
            for (;++i < r; ) (n = e[i]).callback.call(n.ctx);
            return;

          case 1:
            for (;++i < r; ) (n = e[i]).callback.call(n.ctx, o);
            return;

          case 2:
            for (;++i < r; ) (n = e[i]).callback.call(n.ctx, o, s);
            return;

          case 3:
            for (;++i < r; ) (n = e[i]).callback.call(n.ctx, o, s, a);
            return;

          default:
            for (;++i < r; ) (n = e[i]).callback.apply(n.ctx, t);
            return;
        }
    }, d = {
        listenTo: "on",
        listenToOnce: "once"
    };
    n.each(d, function(e, t) {
        a[t] = function(t, i, r) {
            var o = this._listeningTo || (this._listeningTo = {}), s = t._listenId || (t._listenId = n.uniqueId("l"));
            return o[s] = t, r || "object" != typeof i || (r = this), t[e](i, r, this), this;
        };
    }), a.bind = a.on, a.unbind = a.off, n.extend(t, a);
    var h = t.Model = function(e, t) {
        var i = e || {};
        t || (t = {}), this.cid = n.uniqueId("c"), this.attributes = {}, t.collection && (this.collection = t.collection), 
        t.parse && (i = this.parse(i, t) || {}), i = n.defaults({}, i, n.result(this, "defaults")), 
        this.set(i, t), this.changed = {}, this.initialize.apply(this, arguments);
    };
    n.extend(h.prototype, a, {
        changed: null,
        validationError: null,
        idAttribute: "id",
        initialize: function() {},
        toJSON: function() {
            return n.clone(this.attributes);
        },
        sync: function() {
            return t.sync.apply(this, arguments);
        },
        get: function(e) {
            return this.attributes[e];
        },
        escape: function(e) {
            return n.escape(this.get(e));
        },
        has: function(e) {
            return null != this.get(e);
        },
        set: function(e, t, i) {
            var r, o, s, a, l, c, u, d;
            if (null == e) return this;
            if ("object" == typeof e ? (o = e, i = t) : (o = {})[e] = t, i || (i = {}), !this._validate(o, i)) return !1;
            s = i.unset, l = i.silent, a = [], c = this._changing, this._changing = !0, c || (this._previousAttributes = n.clone(this.attributes), 
            this.changed = {}), d = this.attributes, u = this._previousAttributes, this.idAttribute in o && (this.id = o[this.idAttribute]);
            for (r in o) t = o[r], n.isEqual(d[r], t) || a.push(r), n.isEqual(u[r], t) ? delete this.changed[r] : this.changed[r] = t, 
            s ? delete d[r] : d[r] = t;
            if (!l) {
                a.length && (this._pending = i);
                for (var h = 0, p = a.length; p > h; h++) this.trigger("change:" + a[h], this, d[a[h]], i);
            }
            if (c) return this;
            if (!l) for (;this._pending; ) i = this._pending, this._pending = !1, this.trigger("change", this, i);
            return this._pending = !1, this._changing = !1, this;
        },
        unset: function(e, t) {
            return this.set(e, void 0, n.extend({}, t, {
                unset: !0
            }));
        },
        clear: function(e) {
            var t = {};
            for (var i in this.attributes) t[i] = void 0;
            return this.set(t, n.extend({}, e, {
                unset: !0
            }));
        },
        hasChanged: function(e) {
            return null == e ? !n.isEmpty(this.changed) : n.has(this.changed, e);
        },
        changedAttributes: function(e) {
            if (!e) return this.hasChanged() ? n.clone(this.changed) : !1;
            var t, i = !1, r = this._changing ? this._previousAttributes : this.attributes;
            for (var o in e) n.isEqual(r[o], t = e[o]) || ((i || (i = {}))[o] = t);
            return i;
        },
        previous: function(e) {
            return null != e && this._previousAttributes ? this._previousAttributes[e] : null;
        },
        previousAttributes: function() {
            return n.clone(this._previousAttributes);
        },
        fetch: function(e) {
            e = e ? n.clone(e) : {}, void 0 === e.parse && (e.parse = !0);
            var t = this, i = e.success;
            return e.success = function(n) {
                return t.set(t.parse(n, e), e) ? (i && i(t, n, e), void t.trigger("sync", t, n, e)) : !1;
            }, F(this, e), this.sync("read", this, e);
        },
        save: function(e, t, i) {
            var r, o, s, a = this.attributes;
            if (null == e || "object" == typeof e ? (r = e, i = t) : (r = {})[e] = t, i = n.extend({
                validate: !0
            }, i), r && !i.wait) {
                if (!this.set(r, i)) return !1;
            } else if (!this._validate(r, i)) return !1;
            r && i.wait && (this.attributes = n.extend({}, a, r)), void 0 === i.parse && (i.parse = !0);
            var l = this, c = i.success;
            return i.success = function(e) {
                l.attributes = a;
                var t = l.parse(e, i);
                return i.wait && (t = n.extend(r || {}, t)), n.isObject(t) && !l.set(t, i) ? !1 : (c && c(l, e, i), 
                void l.trigger("sync", l, e, i));
            }, F(this, i), o = this.isNew() ? "create" : i.patch ? "patch" : "update", "patch" === o && (i.attrs = r), 
            s = this.sync(o, this, i), r && i.wait && (this.attributes = a), s;
        },
        destroy: function(e) {
            e = e ? n.clone(e) : {};
            var t = this, i = e.success, r = function() {
                t.trigger("destroy", t, t.collection, e);
            };
            if (e.success = function(n) {
                (e.wait || t.isNew()) && r(), i && i(t, n, e), t.isNew() || t.trigger("sync", t, n, e);
            }, this.isNew()) return e.success(), !1;
            F(this, e);
            var o = this.sync("delete", this, e);
            return e.wait || r(), o;
        },
        url: function() {
            var e = n.result(this, "urlRoot") || n.result(this.collection, "url") || O();
            return this.isNew() ? e : e.replace(/([^\/])$/, "$1/") + encodeURIComponent(this.id);
        },
        parse: function(e) {
            return e;
        },
        clone: function() {
            return new this.constructor(this.attributes);
        },
        isNew: function() {
            return !this.has(this.idAttribute);
        },
        isValid: function(e) {
            return this._validate({}, n.extend(e || {}, {
                validate: !0
            }));
        },
        _validate: function(e, t) {
            if (!t.validate || !this.validate) return !0;
            e = n.extend({}, this.attributes, e);
            var i = this.validationError = this.validate(e, t) || null;
            return i ? (this.trigger("invalid", this, i, n.extend(t, {
                validationError: i
            })), !1) : !0;
        }
    });
    var p = [ "keys", "values", "pairs", "invert", "pick", "omit" ];
    n.each(p, function(e) {
        h.prototype[e] = function() {
            var t = s.call(arguments);
            return t.unshift(this.attributes), n[e].apply(n, t);
        };
    });
    var f = t.Collection = function(e, t) {
        t || (t = {}), t.model && (this.model = t.model), void 0 !== t.comparator && (this.comparator = t.comparator), 
        this._reset(), this.initialize.apply(this, arguments), e && this.reset(e, n.extend({
            silent: !0
        }, t));
    }, m = {
        add: !0,
        remove: !0,
        merge: !0
    }, g = {
        add: !0,
        remove: !1
    };
    n.extend(f.prototype, a, {
        model: h,
        initialize: function() {},
        toJSON: function(e) {
            return this.map(function(t) {
                return t.toJSON(e);
            });
        },
        sync: function() {
            return t.sync.apply(this, arguments);
        },
        add: function(e, t) {
            return this.set(e, n.extend({
                merge: !1
            }, t, g));
        },
        remove: function(e, t) {
            var i = !n.isArray(e);
            e = i ? [ e ] : n.clone(e), t || (t = {});
            var r, o, s, a;
            for (r = 0, o = e.length; o > r; r++) a = e[r] = this.get(e[r]), a && (delete this._byId[a.id], 
            delete this._byId[a.cid], s = this.indexOf(a), this.models.splice(s, 1), this.length--, 
            t.silent || (t.index = s, a.trigger("remove", a, this, t)), this._removeReference(a, t));
            return i ? e[0] : e;
        },
        set: function(e, t) {
            t = n.defaults({}, t, m), t.parse && (e = this.parse(e, t));
            var i = !n.isArray(e);
            e = i ? e ? [ e ] : [] : n.clone(e);
            var r, o, s, a, l, c, u, d = t.at, p = this.model, f = this.comparator && null == d && t.sort !== !1, g = n.isString(this.comparator) ? this.comparator : null, v = [], y = [], b = {}, w = t.add, x = t.merge, C = t.remove, k = !f && w && C ? [] : !1;
            for (r = 0, o = e.length; o > r; r++) {
                if (l = e[r] || {}, s = l instanceof h ? a = l : l[p.prototype.idAttribute || "id"], 
                c = this.get(s)) C && (b[c.cid] = !0), x && (l = l === a ? a.attributes : l, t.parse && (l = c.parse(l, t)), 
                c.set(l, t), f && !u && c.hasChanged(g) && (u = !0)), e[r] = c; else if (w) {
                    if (a = e[r] = this._prepareModel(l, t), !a) continue;
                    v.push(a), this._addReference(a, t);
                }
                a = c || a, !k || !a.isNew() && b[a.id] || k.push(a), b[a.id] = !0;
            }
            if (C) {
                for (r = 0, o = this.length; o > r; ++r) b[(a = this.models[r]).cid] || y.push(a);
                y.length && this.remove(y, t);
            }
            if (v.length || k && k.length) if (f && (u = !0), this.length += v.length, null != d) for (r = 0, 
            o = v.length; o > r; r++) this.models.splice(d + r, 0, v[r]); else {
                k && (this.models.length = 0);
                var T = k || v;
                for (r = 0, o = T.length; o > r; r++) this.models.push(T[r]);
            }
            if (u && this.sort({
                silent: !0
            }), !t.silent) {
                for (r = 0, o = v.length; o > r; r++) (a = v[r]).trigger("add", a, this, t);
                (u || k && k.length) && this.trigger("sort", this, t);
            }
            return i ? e[0] : e;
        },
        reset: function(e, t) {
            t || (t = {});
            for (var i = 0, r = this.models.length; r > i; i++) this._removeReference(this.models[i], t);
            return t.previousModels = this.models, this._reset(), e = this.add(e, n.extend({
                silent: !0
            }, t)), t.silent || this.trigger("reset", this, t), e;
        },
        push: function(e, t) {
            return this.add(e, n.extend({
                at: this.length
            }, t));
        },
        pop: function(e) {
            var t = this.at(this.length - 1);
            return this.remove(t, e), t;
        },
        unshift: function(e, t) {
            return this.add(e, n.extend({
                at: 0
            }, t));
        },
        shift: function(e) {
            var t = this.at(0);
            return this.remove(t, e), t;
        },
        slice: function() {
            return s.apply(this.models, arguments);
        },
        get: function(e) {
            return null == e ? void 0 : this._byId[e] || this._byId[e.id] || this._byId[e.cid];
        },
        at: function(e) {
            return this.models[e];
        },
        where: function(e, t) {
            return n.isEmpty(e) ? t ? void 0 : [] : this[t ? "find" : "filter"](function(t) {
                for (var n in e) if (e[n] !== t.get(n)) return !1;
                return !0;
            });
        },
        findWhere: function(e) {
            return this.where(e, !0);
        },
        sort: function(e) {
            if (!this.comparator) throw new Error("Cannot sort a set without a comparator");
            return e || (e = {}), n.isString(this.comparator) || 1 === this.comparator.length ? this.models = this.sortBy(this.comparator, this) : this.models.sort(n.bind(this.comparator, this)), 
            e.silent || this.trigger("sort", this, e), this;
        },
        pluck: function(e) {
            return n.invoke(this.models, "get", e);
        },
        fetch: function(e) {
            e = e ? n.clone(e) : {}, void 0 === e.parse && (e.parse = !0);
            var t = e.success, i = this;
            return e.success = function(n) {
                var r = e.reset ? "reset" : "set";
                i[r](n, e), t && t(i, n, e), i.trigger("sync", i, n, e);
            }, F(this, e), this.sync("read", this, e);
        },
        create: function(e, t) {
            if (t = t ? n.clone(t) : {}, !(e = this._prepareModel(e, t))) return !1;
            t.wait || this.add(e, t);
            var i = this, r = t.success;
            return t.success = function(e, n) {
                t.wait && i.add(e, t), r && r(e, n, t);
            }, e.save(null, t), e;
        },
        parse: function(e) {
            return e;
        },
        clone: function() {
            return new this.constructor(this.models);
        },
        _reset: function() {
            this.length = 0, this.models = [], this._byId = {};
        },
        _prepareModel: function(e, t) {
            if (e instanceof h) return e;
            t = t ? n.clone(t) : {}, t.collection = this;
            var i = new this.model(e, t);
            return i.validationError ? (this.trigger("invalid", this, i.validationError, t), 
            !1) : i;
        },
        _addReference: function(e) {
            this._byId[e.cid] = e, null != e.id && (this._byId[e.id] = e), e.collection || (e.collection = this), 
            e.on("all", this._onModelEvent, this);
        },
        _removeReference: function(e) {
            this === e.collection && delete e.collection, e.off("all", this._onModelEvent, this);
        },
        _onModelEvent: function(e, t, n, i) {
            ("add" !== e && "remove" !== e || n === this) && ("destroy" === e && this.remove(t, i), 
            t && e === "change:" + t.idAttribute && (delete this._byId[t.previous(t.idAttribute)], 
            null != t.id && (this._byId[t.id] = t)), this.trigger.apply(this, arguments));
        }
    });
    var v = [ "forEach", "each", "map", "collect", "reduce", "foldl", "inject", "reduceRight", "foldr", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "max", "min", "toArray", "size", "first", "head", "take", "initial", "rest", "tail", "drop", "last", "without", "difference", "indexOf", "shuffle", "lastIndexOf", "isEmpty", "chain", "sample" ];
    n.each(v, function(e) {
        f.prototype[e] = function() {
            var t = s.call(arguments);
            return t.unshift(this.models), n[e].apply(n, t);
        };
    });
    var y = [ "groupBy", "countBy", "sortBy", "indexBy" ];
    n.each(y, function(e) {
        f.prototype[e] = function(t, i) {
            var r = n.isFunction(t) ? t : function(e) {
                return e.get(t);
            };
            return n[e](this.models, r, i);
        };
    });
    var b = t.View = function(e) {
        this.cid = n.uniqueId("view"), e || (e = {}), n.extend(this, n.pick(e, x)), this._ensureElement(), 
        this.initialize.apply(this, arguments), this.delegateEvents();
    }, w = /^(\S+)\s*(.*)$/, x = [ "model", "collection", "el", "id", "attributes", "className", "tagName", "events" ];
    n.extend(b.prototype, a, {
        tagName: "div",
        $: function(e) {
            return this.$el.find(e);
        },
        initialize: function() {},
        render: function() {
            return this;
        },
        remove: function() {
            return this.$el.remove(), this.stopListening(), this;
        },
        setElement: function(e, n) {
            return this.$el && this.undelegateEvents(), this.$el = e instanceof t.$ ? e : t.$(e), 
            this.el = this.$el[0], n !== !1 && this.delegateEvents(), this;
        },
        delegateEvents: function(e) {
            if (!e && !(e = n.result(this, "events"))) return this;
            this.undelegateEvents();
            for (var t in e) {
                var i = e[t];
                if (n.isFunction(i) || (i = this[e[t]]), i) {
                    var r = t.match(w), o = r[1], s = r[2];
                    i = n.bind(i, this), o += ".delegateEvents" + this.cid, "" === s ? this.$el.on(o, i) : this.$el.on(o, s, i);
                }
            }
            return this;
        },
        undelegateEvents: function() {
            return this.$el.off(".delegateEvents" + this.cid), this;
        },
        _ensureElement: function() {
            if (this.el) this.setElement(n.result(this, "el"), !1); else {
                var e = n.extend({}, n.result(this, "attributes"));
                this.id && (e.id = n.result(this, "id")), this.className && (e["class"] = n.result(this, "className"));
                var i = t.$("<" + n.result(this, "tagName") + ">").attr(e);
                this.setElement(i, !1);
            }
        }
    }), t.sync = function(e, i, r) {
        var o = k[e];
        n.defaults(r || (r = {}), {
            emulateHTTP: t.emulateHTTP,
            emulateJSON: t.emulateJSON
        });
        var s = {
            type: o,
            dataType: "json"
        };
        if (r.url || (s.url = n.result(i, "url") || O()), null != r.data || !i || "create" !== e && "update" !== e && "patch" !== e || (s.contentType = "application/json", 
        s.data = JSON.stringify(r.attrs || i.toJSON(r))), r.emulateJSON && (s.contentType = "application/x-www-form-urlencoded", 
        s.data = s.data ? {
            model: s.data
        } : {}), r.emulateHTTP && ("PUT" === o || "DELETE" === o || "PATCH" === o)) {
            s.type = "POST", r.emulateJSON && (s.data._method = o);
            var a = r.beforeSend;
            r.beforeSend = function(e) {
                return e.setRequestHeader("X-HTTP-Method-Override", o), a ? a.apply(this, arguments) : void 0;
            };
        }
        "GET" === s.type || r.emulateJSON || (s.processData = !1), "PATCH" === s.type && C && (s.xhr = function() {
            return new ActiveXObject("Microsoft.XMLHTTP");
        });
        var l = r.xhr = t.ajax(n.extend(s, r));
        return i.trigger("request", i, l, r), l;
    };
    var C = !("undefined" == typeof window || !window.ActiveXObject || window.XMLHttpRequest && new XMLHttpRequest().dispatchEvent), k = {
        create: "POST",
        update: "PUT",
        patch: "PATCH",
        "delete": "DELETE",
        read: "GET"
    };
    t.ajax = function() {
        return t.$.ajax.apply(t.$, arguments);
    };
    var T = t.Router = function(e) {
        e || (e = {}), e.routes && (this.routes = e.routes), this._bindRoutes(), this.initialize.apply(this, arguments);
    }, _ = /\((.*?)\)/g, E = /(\(\?)?:\w+/g, R = /\*\w+/g, S = /[\-{}\[\]+?.,\\\^$|#\s]/g;
    n.extend(T.prototype, a, {
        initialize: function() {},
        route: function(e, i, r) {
            n.isRegExp(e) || (e = this._routeToRegExp(e)), n.isFunction(i) && (r = i, i = ""), 
            r || (r = this[i]);
            var o = this;
            return t.history.route(e, function(n) {
                var s = o._extractParameters(e, n);
                o.execute(r, s), o.trigger.apply(o, [ "route:" + i ].concat(s)), o.trigger("route", i, s), 
                t.history.trigger("route", o, i, s);
            }), this;
        },
        execute: function(e, t) {
            e && e.apply(this, t);
        },
        navigate: function(e, n) {
            return t.history.navigate(e, n), this;
        },
        _bindRoutes: function() {
            if (this.routes) {
                this.routes = n.result(this, "routes");
                for (var e, t = n.keys(this.routes); null != (e = t.pop()); ) this.route(e, this.routes[e]);
            }
        },
        _routeToRegExp: function(e) {
            return e = e.replace(S, "\\$&").replace(_, "(?:$1)?").replace(E, function(e, t) {
                return t ? e : "([^/?]+)";
            }).replace(R, "([^?]*?)"), new RegExp("^" + e + "(?:\\?([\\s\\S]*))?$");
        },
        _extractParameters: function(e, t) {
            var i = e.exec(t).slice(1);
            return n.map(i, function(e, t) {
                return t === i.length - 1 ? e || null : e ? decodeURIComponent(e) : null;
            });
        }
    });
    var N = t.History = function() {
        this.handlers = [], n.bindAll(this, "checkUrl"), "undefined" != typeof window && (this.location = window.location, 
        this.history = window.history);
    }, M = /^[#\/]|\s+$/g, P = /^\/+|\/+$/g, A = /msie [\w.]+/, D = /\/$/, $ = /#.*$/;
    N.started = !1, n.extend(N.prototype, a, {
        interval: 50,
        atRoot: function() {
            return this.location.pathname.replace(/[^\/]$/, "$&/") === this.root;
        },
        getHash: function(e) {
            var t = (e || this).location.href.match(/#(.*)$/);
            return t ? t[1] : "";
        },
        getFragment: function(e, t) {
            if (null == e) if (this._hasPushState || !this._wantsHashChange || t) {
                e = decodeURI(this.location.pathname + this.location.search);
                var n = this.root.replace(D, "");
                e.indexOf(n) || (e = e.slice(n.length));
            } else e = this.getHash();
            return e.replace(M, "");
        },
        start: function(e) {
            if (N.started) throw new Error("Backbone.history has already been started");
            N.started = !0, this.options = n.extend({
                root: "/"
            }, this.options, e), this.root = this.options.root, this._wantsHashChange = this.options.hashChange !== !1, 
            this._wantsPushState = !!this.options.pushState, this._hasPushState = !!(this.options.pushState && this.history && this.history.pushState);
            var i = this.getFragment(), r = document.documentMode, o = A.exec(navigator.userAgent.toLowerCase()) && (!r || 7 >= r);
            if (this.root = ("/" + this.root + "/").replace(P, "/"), o && this._wantsHashChange) {
                var s = t.$('<iframe src="javascript:0" tabindex="-1">');
                this.iframe = s.hide().appendTo("body")[0].contentWindow, this.navigate(i);
            }
            this._hasPushState ? t.$(window).on("popstate", this.checkUrl) : this._wantsHashChange && "onhashchange" in window && !o ? t.$(window).on("hashchange", this.checkUrl) : this._wantsHashChange && (this._checkUrlInterval = setInterval(this.checkUrl, this.interval)), 
            this.fragment = i;
            var a = this.location;
            if (this._wantsHashChange && this._wantsPushState) {
                if (!this._hasPushState && !this.atRoot()) return this.fragment = this.getFragment(null, !0), 
                this.location.replace(this.root + "#" + this.fragment), !0;
                this._hasPushState && this.atRoot() && a.hash && (this.fragment = this.getHash().replace(M, ""), 
                this.history.replaceState({}, document.title, this.root + this.fragment));
            }
            return this.options.silent ? void 0 : this.loadUrl();
        },
        stop: function() {
            t.$(window).off("popstate", this.checkUrl).off("hashchange", this.checkUrl), this._checkUrlInterval && clearInterval(this._checkUrlInterval), 
            N.started = !1;
        },
        route: function(e, t) {
            this.handlers.unshift({
                route: e,
                callback: t
            });
        },
        checkUrl: function() {
            var e = this.getFragment();
            return e === this.fragment && this.iframe && (e = this.getFragment(this.getHash(this.iframe))), 
            e === this.fragment ? !1 : (this.iframe && this.navigate(e), void this.loadUrl());
        },
        loadUrl: function(e) {
            return e = this.fragment = this.getFragment(e), n.any(this.handlers, function(t) {
                return t.route.test(e) ? (t.callback(e), !0) : void 0;
            });
        },
        navigate: function(e, t) {
            if (!N.started) return !1;
            t && t !== !0 || (t = {
                trigger: !!t
            });
            var n = this.root + (e = this.getFragment(e || ""));
            if (e = e.replace($, ""), this.fragment !== e) {
                if (this.fragment = e, "" === e && "/" !== n && (n = n.slice(0, -1)), this._hasPushState) this.history[t.replace ? "replaceState" : "pushState"]({}, document.title, n); else {
                    if (!this._wantsHashChange) return this.location.assign(n);
                    this._updateHash(this.location, e, t.replace), this.iframe && e !== this.getFragment(this.getHash(this.iframe)) && (t.replace || this.iframe.document.open().close(), 
                    this._updateHash(this.iframe.location, e, t.replace));
                }
                return t.trigger ? this.loadUrl(e) : void 0;
            }
        },
        _updateHash: function(e, t, n) {
            if (n) {
                var i = e.href.replace(/(javascript:|#).*$/, "");
                e.replace(i + "#" + t);
            } else e.hash = "#" + t;
        }
    }), t.history = new N();
    var j = function(e, t) {
        var i, r = this;
        i = e && n.has(e, "constructor") ? e.constructor : function() {
            return r.apply(this, arguments);
        }, n.extend(i, r, t);
        var o = function() {
            this.constructor = i;
        };
        return o.prototype = r.prototype, i.prototype = new o(), e && n.extend(i.prototype, e), 
        i.__super__ = r.prototype, i;
    };
    h.extend = f.extend = T.extend = b.extend = N.extend = j;
    var O = function() {
        throw new Error('A "url" property or function must be specified');
    }, F = function(e, t) {
        var n = t.error;
        t.error = function(i) {
            n && n(e, i, t), e.trigger("error", e, i, t);
        };
    };
    return t;
}), +function(e) {
    var t = '[data-dismiss="alert"]', n = function(n) {
        e(n).on("click", t, this.close);
    };
    n.prototype.close = function(t) {
        function n() {
            o.trigger("closed.bs.alert").remove();
        }
        var i = e(this), r = i.attr("data-target");
        r || (r = i.attr("href"), r = r && r.replace(/.*(?=#[^\s]*$)/, ""));
        var o = e(r);
        t && t.preventDefault(), o.length || (o = i.hasClass("alert") ? i : i.parent()), 
        o.trigger(t = e.Event("close.bs.alert")), t.isDefaultPrevented() || (o.removeClass("in"), 
        e.support.transition && o.hasClass("fade") ? o.one(e.support.transition.end, n).emulateTransitionEnd(150) : n());
    };
    var i = e.fn.alert;
    e.fn.alert = function(t) {
        return this.each(function() {
            var i = e(this), r = i.data("bs.alert");
            r || i.data("bs.alert", r = new n(this)), "string" == typeof t && r[t].call(i);
        });
    }, e.fn.alert.Constructor = n, e.fn.alert.noConflict = function() {
        return e.fn.alert = i, this;
    }, e(document).on("click.bs.alert.data-api", t, n.prototype.close);
}(jQuery), +function(e) {
    var t = function(n, i) {
        this.$element = e(n), this.options = e.extend({}, t.DEFAULTS, i), this.isLoading = !1;
    };
    t.DEFAULTS = {
        loadingText: "loading..."
    }, t.prototype.setState = function(t) {
        var n = "disabled", i = this.$element, r = i.is("input") ? "val" : "html", o = i.data();
        t += "Text", o.resetText || i.data("resetText", i[r]()), i[r](o[t] || this.options[t]), 
        setTimeout(e.proxy(function() {
            "loadingText" == t ? (this.isLoading = !0, i.addClass(n).attr(n, n)) : this.isLoading && (this.isLoading = !1, 
            i.removeClass(n).removeAttr(n));
        }, this), 0);
    }, t.prototype.toggle = function() {
        var e = !0, t = this.$element.closest('[data-toggle="buttons"]');
        if (t.length) {
            var n = this.$element.find("input");
            "radio" == n.prop("type") && (n.prop("checked") && this.$element.hasClass("active") ? e = !1 : t.find(".active").removeClass("active")), 
            e && n.prop("checked", !this.$element.hasClass("active")).trigger("change");
        }
        e && this.$element.toggleClass("active");
    };
    var n = e.fn.button;
    e.fn.button = function(n) {
        return this.each(function() {
            var i = e(this), r = i.data("bs.button"), o = "object" == typeof n && n;
            r || i.data("bs.button", r = new t(this, o)), "toggle" == n ? r.toggle() : n && r.setState(n);
        });
    }, e.fn.button.Constructor = t, e.fn.button.noConflict = function() {
        return e.fn.button = n, this;
    }, e(document).on("click.bs.button.data-api", "[data-toggle^=button]", function(t) {
        var n = e(t.target);
        n.hasClass("btn") || (n = n.closest(".btn")), n.button("toggle"), t.preventDefault();
    });
}(jQuery), +function(e) {
    function t(t) {
        e(i).remove(), e(r).each(function() {
            var i = n(e(this)), r = {
                relatedTarget: this
            };
            i.hasClass("open") && (i.trigger(t = e.Event("hide.bs.dropdown", r)), t.isDefaultPrevented() || i.removeClass("open").trigger("hidden.bs.dropdown", r));
        });
    }
    function n(t) {
        var n = t.attr("data-target");
        n || (n = t.attr("href"), n = n && /#[A-Za-z]/.test(n) && n.replace(/.*(?=#[^\s]*$)/, ""));
        var i = n && e(n);
        return i && i.length ? i : t.parent();
    }
    var i = ".dropdown-backdrop", r = "[data-toggle=dropdown]", o = function(t) {
        e(t).on("click.bs.dropdown", this.toggle);
    };
    o.prototype.toggle = function(i) {
        var r = e(this);
        if (!r.is(".disabled, :disabled")) {
            var o = n(r), s = o.hasClass("open");
            if (t(), !s) {
                "ontouchstart" in document.documentElement && !o.closest(".navbar-nav").length && e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click", t);
                var a = {
                    relatedTarget: this
                };
                if (o.trigger(i = e.Event("show.bs.dropdown", a)), i.isDefaultPrevented()) return;
                o.toggleClass("open").trigger("shown.bs.dropdown", a), r.focus();
            }
            return !1;
        }
    }, o.prototype.keydown = function(t) {
        if (/(38|40|27)/.test(t.keyCode)) {
            var i = e(this);
            if (t.preventDefault(), t.stopPropagation(), !i.is(".disabled, :disabled")) {
                var o = n(i), s = o.hasClass("open");
                if (!s || s && 27 == t.keyCode) return 27 == t.which && o.find(r).focus(), i.click();
                var a = " li:not(.divider):visible a", l = o.find("[role=menu]" + a + ", [role=listbox]" + a);
                if (l.length) {
                    var c = l.index(l.filter(":focus"));
                    38 == t.keyCode && c > 0 && c--, 40 == t.keyCode && c < l.length - 1 && c++, ~c || (c = 0), 
                    l.eq(c).focus();
                }
            }
        }
    };
    var s = e.fn.dropdown;
    e.fn.dropdown = function(t) {
        return this.each(function() {
            var n = e(this), i = n.data("bs.dropdown");
            i || n.data("bs.dropdown", i = new o(this)), "string" == typeof t && i[t].call(n);
        });
    }, e.fn.dropdown.Constructor = o, e.fn.dropdown.noConflict = function() {
        return e.fn.dropdown = s, this;
    }, e(document).on("click.bs.dropdown.data-api", t).on("click.bs.dropdown.data-api", ".dropdown form", function(e) {
        e.stopPropagation();
    }).on("click.bs.dropdown.data-api", r, o.prototype.toggle).on("keydown.bs.dropdown.data-api", r + ", [role=menu], [role=listbox]", o.prototype.keydown);
}(jQuery), +function(e) {
    var t = function(e, t) {
        this.type = this.options = this.enabled = this.timeout = this.hoverState = this.$element = null, 
        this.init("tooltip", e, t);
    };
    t.DEFAULTS = {
        animation: !0,
        placement: "top",
        selector: !1,
        template: '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: !1,
        container: !1
    }, t.prototype.init = function(t, n, i) {
        this.enabled = !0, this.type = t, this.$element = e(n), this.options = this.getOptions(i);
        for (var r = this.options.trigger.split(" "), o = r.length; o--; ) {
            var s = r[o];
            if ("click" == s) this.$element.on("click." + this.type, this.options.selector, e.proxy(this.toggle, this)); else if ("manual" != s) {
                var a = "hover" == s ? "mouseenter" : "focusin", l = "hover" == s ? "mouseleave" : "focusout";
                this.$element.on(a + "." + this.type, this.options.selector, e.proxy(this.enter, this)), 
                this.$element.on(l + "." + this.type, this.options.selector, e.proxy(this.leave, this));
            }
        }
        this.options.selector ? this._options = e.extend({}, this.options, {
            trigger: "manual",
            selector: ""
        }) : this.fixTitle();
    }, t.prototype.getDefaults = function() {
        return t.DEFAULTS;
    }, t.prototype.getOptions = function(t) {
        return t = e.extend({}, this.getDefaults(), this.$element.data(), t), t.delay && "number" == typeof t.delay && (t.delay = {
            show: t.delay,
            hide: t.delay
        }), t;
    }, t.prototype.getDelegateOptions = function() {
        var t = {}, n = this.getDefaults();
        return this._options && e.each(this._options, function(e, i) {
            n[e] != i && (t[e] = i);
        }), t;
    }, t.prototype.enter = function(t) {
        var n = t instanceof this.constructor ? t : e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        return clearTimeout(n.timeout), n.hoverState = "in", n.options.delay && n.options.delay.show ? void (n.timeout = setTimeout(function() {
            "in" == n.hoverState && n.show();
        }, n.options.delay.show)) : n.show();
    }, t.prototype.leave = function(t) {
        var n = t instanceof this.constructor ? t : e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        return clearTimeout(n.timeout), n.hoverState = "out", n.options.delay && n.options.delay.hide ? void (n.timeout = setTimeout(function() {
            "out" == n.hoverState && n.hide();
        }, n.options.delay.hide)) : n.hide();
    }, t.prototype.show = function() {
        var t = e.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
            if (this.$element.trigger(t), t.isDefaultPrevented()) return;
            var n = this, i = this.tip();
            this.setContent(), this.options.animation && i.addClass("fade");
            var r = "function" == typeof this.options.placement ? this.options.placement.call(this, i[0], this.$element[0]) : this.options.placement, o = /\s?auto?\s?/i, s = o.test(r);
            s && (r = r.replace(o, "") || "top"), i.detach().css({
                top: 0,
                left: 0,
                display: "block"
            }).addClass(r), this.options.container ? i.appendTo(this.options.container) : i.insertAfter(this.$element);
            var a = this.getPosition(), l = i[0].offsetWidth, c = i[0].offsetHeight;
            if (s) {
                var u = this.$element.parent(), d = r, h = document.documentElement.scrollTop || document.body.scrollTop, p = "body" == this.options.container ? window.innerWidth : u.outerWidth(), f = "body" == this.options.container ? window.innerHeight : u.outerHeight(), m = "body" == this.options.container ? 0 : u.offset().left;
                r = "bottom" == r && a.top + a.height + c - h > f ? "top" : "top" == r && a.top - h - c < 0 ? "bottom" : "right" == r && a.right + l > p ? "left" : "left" == r && a.left - l < m ? "right" : r, 
                i.removeClass(d).addClass(r);
            }
            var g = this.getCalculatedOffset(r, a, l, c);
            this.applyPlacement(g, r), this.hoverState = null;
            var v = function() {
                n.$element.trigger("shown.bs." + n.type);
            };
            e.support.transition && this.$tip.hasClass("fade") ? i.one(e.support.transition.end, v).emulateTransitionEnd(150) : v();
        }
    }, t.prototype.applyPlacement = function(t, n) {
        var i, r = this.tip(), o = r[0].offsetWidth, s = r[0].offsetHeight, a = parseInt(r.css("margin-top"), 10), l = parseInt(r.css("margin-left"), 10);
        isNaN(a) && (a = 0), isNaN(l) && (l = 0), t.top = t.top + a, t.left = t.left + l, 
        e.offset.setOffset(r[0], e.extend({
            using: function(e) {
                r.css({
                    top: Math.round(e.top),
                    left: Math.round(e.left)
                });
            }
        }, t), 0), r.addClass("in");
        var c = r[0].offsetWidth, u = r[0].offsetHeight;
        if ("top" == n && u != s && (i = !0, t.top = t.top + s - u), /bottom|top/.test(n)) {
            var d = 0;
            t.left < 0 && (d = -2 * t.left, t.left = 0, r.offset(t), c = r[0].offsetWidth, u = r[0].offsetHeight), 
            this.replaceArrow(d - o + c, c, "left");
        } else this.replaceArrow(u - s, u, "top");
        i && r.offset(t);
    }, t.prototype.replaceArrow = function(e, t, n) {
        this.arrow().css(n, e ? 50 * (1 - e / t) + "%" : "");
    }, t.prototype.setContent = function() {
        var e = this.tip(), t = this.getTitle();
        e.find(".tooltip-inner")[this.options.html ? "html" : "text"](t), e.removeClass("fade in top bottom left right");
    }, t.prototype.hide = function() {
        function t() {
            "in" != n.hoverState && i.detach(), n.$element.trigger("hidden.bs." + n.type);
        }
        var n = this, i = this.tip(), r = e.Event("hide.bs." + this.type);
        return this.$element.trigger(r), r.isDefaultPrevented() ? void 0 : (i.removeClass("in"), 
        e.support.transition && this.$tip.hasClass("fade") ? i.one(e.support.transition.end, t).emulateTransitionEnd(150) : t(), 
        this.hoverState = null, this);
    }, t.prototype.fixTitle = function() {
        var e = this.$element;
        (e.attr("title") || "string" != typeof e.attr("data-original-title")) && e.attr("data-original-title", e.attr("title") || "").attr("title", "");
    }, t.prototype.hasContent = function() {
        return this.getTitle();
    }, t.prototype.getPosition = function() {
        var t = this.$element[0];
        return e.extend({}, "function" == typeof t.getBoundingClientRect ? t.getBoundingClientRect() : {
            width: t.offsetWidth,
            height: t.offsetHeight
        }, this.$element.offset());
    }, t.prototype.getCalculatedOffset = function(e, t, n, i) {
        return "bottom" == e ? {
            top: t.top + t.height,
            left: t.left + t.width / 2 - n / 2
        } : "top" == e ? {
            top: t.top - i,
            left: t.left + t.width / 2 - n / 2
        } : "left" == e ? {
            top: t.top + t.height / 2 - i / 2,
            left: t.left - n
        } : {
            top: t.top + t.height / 2 - i / 2,
            left: t.left + t.width
        };
    }, t.prototype.getTitle = function() {
        var e, t = this.$element, n = this.options;
        return e = t.attr("data-original-title") || ("function" == typeof n.title ? n.title.call(t[0]) : n.title);
    }, t.prototype.tip = function() {
        return this.$tip = this.$tip || e(this.options.template);
    }, t.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow");
    }, t.prototype.validate = function() {
        this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null);
    }, t.prototype.enable = function() {
        this.enabled = !0;
    }, t.prototype.disable = function() {
        this.enabled = !1;
    }, t.prototype.toggleEnabled = function() {
        this.enabled = !this.enabled;
    }, t.prototype.toggle = function(t) {
        var n = t ? e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type) : this;
        n.tip().hasClass("in") ? n.leave(n) : n.enter(n);
    }, t.prototype.destroy = function() {
        clearTimeout(this.timeout), this.hide().$element.off("." + this.type).removeData("bs." + this.type);
    };
    var n = e.fn.tooltip;
    e.fn.tooltip = function(n) {
        return this.each(function() {
            var i = e(this), r = i.data("bs.tooltip"), o = "object" == typeof n && n;
            (r || "destroy" != n) && (r || i.data("bs.tooltip", r = new t(this, o)), "string" == typeof n && r[n]());
        });
    }, e.fn.tooltip.Constructor = t, e.fn.tooltip.noConflict = function() {
        return e.fn.tooltip = n, this;
    };
}(jQuery), +function(e) {
    var t = function(e, t) {
        this.init("popover", e, t);
    };
    if (!e.fn.tooltip) throw new Error("Popover requires tooltip.js");
    t.DEFAULTS = e.extend({}, e.fn.tooltip.Constructor.DEFAULTS, {
        placement: "right",
        trigger: "click",
        content: "",
        template: '<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
    }), t.prototype = e.extend({}, e.fn.tooltip.Constructor.prototype), t.prototype.constructor = t, 
    t.prototype.getDefaults = function() {
        return t.DEFAULTS;
    }, t.prototype.setContent = function() {
        var e = this.tip(), t = this.getTitle(), n = this.getContent();
        e.find(".popover-title")[this.options.html ? "html" : "text"](t), e.find(".popover-content")[this.options.html ? "string" == typeof n ? "html" : "append" : "text"](n), 
        e.removeClass("fade top bottom left right in"), e.find(".popover-title").html() || e.find(".popover-title").hide();
    }, t.prototype.hasContent = function() {
        return this.getTitle() || this.getContent();
    }, t.prototype.getContent = function() {
        var e = this.$element, t = this.options;
        return e.attr("data-content") || ("function" == typeof t.content ? t.content.call(e[0]) : t.content);
    }, t.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".arrow");
    }, t.prototype.tip = function() {
        return this.$tip || (this.$tip = e(this.options.template)), this.$tip;
    };
    var n = e.fn.popover;
    e.fn.popover = function(n) {
        return this.each(function() {
            var i = e(this), r = i.data("bs.popover"), o = "object" == typeof n && n;
            (r || "destroy" != n) && (r || i.data("bs.popover", r = new t(this, o)), "string" == typeof n && r[n]());
        });
    }, e.fn.popover.Constructor = t, e.fn.popover.noConflict = function() {
        return e.fn.popover = n, this;
    };
}(jQuery), +function(e) {
    var t = function(t) {
        this.element = e(t);
    };
    t.prototype.show = function() {
        var t = this.element, n = t.closest("ul:not(.dropdown-menu)"), i = t.data("target");
        if (i || (i = t.attr("href"), i = i && i.replace(/.*(?=#[^\s]*$)/, "")), !t.parent("li").hasClass("active")) {
            var r = n.find(".active:last a")[0], o = e.Event("show.bs.tab", {
                relatedTarget: r
            });
            if (t.trigger(o), !o.isDefaultPrevented()) {
                var s = e(i);
                this.activate(t.parent("li"), n), this.activate(s, s.parent(), function() {
                    t.trigger({
                        type: "shown.bs.tab",
                        relatedTarget: r
                    });
                });
            }
        }
    }, t.prototype.activate = function(t, n, i) {
        function r() {
            o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"), 
            t.addClass("active"), s ? (t[0].offsetWidth, t.addClass("in")) : t.removeClass("fade"), 
            t.parent(".dropdown-menu") && t.closest("li.dropdown").addClass("active"), i && i();
        }
        var o = n.find("> .active"), s = i && e.support.transition && o.hasClass("fade");
        s ? o.one(e.support.transition.end, r).emulateTransitionEnd(150) : r(), o.removeClass("in");
    };
    var n = e.fn.tab;
    e.fn.tab = function(n) {
        return this.each(function() {
            var i = e(this), r = i.data("bs.tab");
            r || i.data("bs.tab", r = new t(this)), "string" == typeof n && r[n]();
        });
    }, e.fn.tab.Constructor = t, e.fn.tab.noConflict = function() {
        return e.fn.tab = n, this;
    }, e(document).on("click.bs.tab.data-api", '[data-toggle="tab"], [data-toggle="pill"]', function(t) {
        t.preventDefault(), e(this).tab("show");
    });
}(jQuery), +function(e) {
    var t = function(n, i) {
        this.options = e.extend({}, t.DEFAULTS, i), this.$window = e(window).on("scroll.bs.affix.data-api", e.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", e.proxy(this.checkPositionWithEventLoop, this)), 
        this.$element = e(n), this.affixed = this.unpin = this.pinnedOffset = null, this.checkPosition();
    };
    t.RESET = "affix affix-top affix-bottom", t.DEFAULTS = {
        offset: 0
    }, t.prototype.getPinnedOffset = function() {
        if (this.pinnedOffset) return this.pinnedOffset;
        this.$element.removeClass(t.RESET).addClass("affix");
        var e = this.$window.scrollTop(), n = this.$element.offset();
        return this.pinnedOffset = n.top - e;
    }, t.prototype.checkPositionWithEventLoop = function() {
        setTimeout(e.proxy(this.checkPosition, this), 1);
    }, t.prototype.checkPosition = function() {
        if (this.$element.is(":visible")) {
            var n = e(document).height(), i = this.$window.scrollTop(), r = this.$element.offset(), o = this.options.offset, s = o.top, a = o.bottom;
            "top" == this.affixed && (r.top += i), "object" != typeof o && (a = s = o), "function" == typeof s && (s = o.top(this.$element)), 
            "function" == typeof a && (a = o.bottom(this.$element));
            var l = null != this.unpin && i + this.unpin <= r.top ? !1 : null != a && r.top + this.$element.height() >= n - a ? "bottom" : null != s && s >= i ? "top" : !1;
            if (this.affixed !== l) {
                this.unpin && this.$element.css("top", "");
                var c = "affix" + (l ? "-" + l : ""), u = e.Event(c + ".bs.affix");
                this.$element.trigger(u), u.isDefaultPrevented() || (this.affixed = l, this.unpin = "bottom" == l ? this.getPinnedOffset() : null, 
                this.$element.removeClass(t.RESET).addClass(c).trigger(e.Event(c.replace("affix", "affixed"))), 
                "bottom" == l && this.$element.offset({
                    top: n - a - this.$element.height()
                }));
            }
        }
    };
    var n = e.fn.affix;
    e.fn.affix = function(n) {
        return this.each(function() {
            var i = e(this), r = i.data("bs.affix"), o = "object" == typeof n && n;
            r || i.data("bs.affix", r = new t(this, o)), "string" == typeof n && r[n]();
        });
    }, e.fn.affix.Constructor = t, e.fn.affix.noConflict = function() {
        return e.fn.affix = n, this;
    }, e(window).on("load", function() {
        e('[data-spy="affix"]').each(function() {
            var t = e(this), n = t.data();
            n.offset = n.offset || {}, n.offsetBottom && (n.offset.bottom = n.offsetBottom), 
            n.offsetTop && (n.offset.top = n.offsetTop), t.affix(n);
        });
    });
}(jQuery), +function(e) {
    var t = function(n, i) {
        this.$element = e(n), this.options = e.extend({}, t.DEFAULTS, i), this.transitioning = null, 
        this.options.parent && (this.$parent = e(this.options.parent)), this.options.toggle && this.toggle();
    };
    t.DEFAULTS = {
        toggle: !0
    }, t.prototype.dimension = function() {
        var e = this.$element.hasClass("width");
        return e ? "width" : "height";
    }, t.prototype.show = function() {
        if (!this.transitioning && !this.$element.hasClass("in")) {
            var t = e.Event("show.bs.collapse");
            if (this.$element.trigger(t), !t.isDefaultPrevented()) {
                var n = this.$parent && this.$parent.find("> .panel > .in");
                if (n && n.length) {
                    var i = n.data("bs.collapse");
                    if (i && i.transitioning) return;
                    n.collapse("hide"), i || n.data("bs.collapse", null);
                }
                var r = this.dimension();
                this.$element.removeClass("collapse").addClass("collapsing")[r](0), this.transitioning = 1;
                var o = function() {
                    this.$element.removeClass("collapsing").addClass("collapse in")[r]("auto"), this.transitioning = 0, 
                    this.$element.trigger("shown.bs.collapse");
                };
                if (!e.support.transition) return o.call(this);
                var s = e.camelCase([ "scroll", r ].join("-"));
                this.$element.one(e.support.transition.end, e.proxy(o, this)).emulateTransitionEnd(350)[r](this.$element[0][s]);
            }
        }
    }, t.prototype.hide = function() {
        if (!this.transitioning && this.$element.hasClass("in")) {
            var t = e.Event("hide.bs.collapse");
            if (this.$element.trigger(t), !t.isDefaultPrevented()) {
                var n = this.dimension();
                this.$element[n](this.$element[n]())[0].offsetHeight, this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"), 
                this.transitioning = 1;
                var i = function() {
                    this.transitioning = 0, this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse");
                };
                return e.support.transition ? void this.$element[n](0).one(e.support.transition.end, e.proxy(i, this)).emulateTransitionEnd(350) : i.call(this);
            }
        }
    }, t.prototype.toggle = function() {
        this[this.$element.hasClass("in") ? "hide" : "show"]();
    };
    var n = e.fn.collapse;
    e.fn.collapse = function(n) {
        return this.each(function() {
            var i = e(this), r = i.data("bs.collapse"), o = e.extend({}, t.DEFAULTS, i.data(), "object" == typeof n && n);
            !r && o.toggle && "show" == n && (n = !n), r || i.data("bs.collapse", r = new t(this, o)), 
            "string" == typeof n && r[n]();
        });
    }, e.fn.collapse.Constructor = t, e.fn.collapse.noConflict = function() {
        return e.fn.collapse = n, this;
    }, e(document).on("click.bs.collapse.data-api", "[data-toggle=collapse]", function(t) {
        var n, i = e(this), r = i.attr("data-target") || t.preventDefault() || (n = i.attr("href")) && n.replace(/.*(?=#[^\s]+$)/, ""), o = e(r), s = o.data("bs.collapse"), a = s ? "toggle" : i.data(), l = i.attr("data-parent"), c = l && e(l);
        s && s.transitioning || (c && c.find('[data-toggle=collapse][data-parent="' + l + '"]').not(i).addClass("collapsed"), 
        i[o.hasClass("in") ? "addClass" : "removeClass"]("collapsed")), o.collapse(a);
    });
}(jQuery), +function(e) {
    function t() {
        var e = document.createElement("bootstrap"), t = {
            WebkitTransition: "webkitTransitionEnd",
            MozTransition: "transitionend",
            OTransition: "oTransitionEnd otransitionend",
            transition: "transitionend"
        };
        for (var n in t) if (void 0 !== e.style[n]) return {
            end: t[n]
        };
        return !1;
    }
    e.fn.emulateTransitionEnd = function(t) {
        var n = !1, i = this;
        e(this).one(e.support.transition.end, function() {
            n = !0;
        });
        var r = function() {
            n || e(i).trigger(e.support.transition.end);
        };
        return setTimeout(r, t), this;
    }, e(function() {
        e.support.transition = t();
    });
}(jQuery), define("bootstrap", function() {}), !function(e) {
    if ("object" == typeof exports) module.exports = e(require("underscore"), require("backbone")); else if ("function" == typeof define && define.amd) define("backbone.paginator", [ "underscore", "backbone" ], e); else if ("undefined" != typeof _ && "undefined" != typeof Backbone) {
        var t = Backbone.PageableCollection, n = e(_, Backbone);
        Backbone.PageableCollection.noConflict = function() {
            return Backbone.PageableCollection = t, n;
        };
    }
}(function(e, t) {
    function n(t, n) {
        if (!e.isNumber(t) || e.isNaN(t) || !e.isFinite(t) || ~~t !== t) throw new TypeError("`" + n + "` must be a finite integer");
        return t;
    }
    function i(e) {
        for (var t, n, i, r, o = {}, s = decodeURIComponent, a = e.split("&"), l = 0, c = a.length; c > l; l++) {
            var u = a[l];
            t = u.split("="), n = t[0], i = t[1] || !0, n = s(n), i = s(i), r = o[n], f(r) ? r.push(i) : o[n] = r ? [ r, i ] : i;
        }
        return o;
    }
    function r(e, t, n) {
        var i = e._events[t];
        if (i && i.length) {
            var r = i[i.length - 1], o = r.callback;
            r.callback = function() {
                try {
                    o.apply(this, arguments), n();
                } catch (e) {
                    throw e;
                } finally {
                    r.callback = o;
                }
            };
        } else n();
    }
    var o = e.extend, s = e.omit, a = e.clone, l = e.each, c = e.pick, u = e.contains, d = e.isEmpty, h = e.pairs, p = e.invert, f = e.isArray, m = e.isFunction, g = e.isObject, v = e.keys, y = e.isUndefined, b = e.result, w = Math.ceil, x = Math.floor, C = Math.max, k = t.Collection.prototype, T = /[\s'"]/g, _ = /[<>\s'"]/g, E = t.PageableCollection = t.Collection.extend({
        state: {
            firstPage: 1,
            lastPage: null,
            currentPage: null,
            pageSize: 25,
            totalPages: null,
            totalRecords: null,
            sortKey: null,
            order: -1
        },
        mode: "server",
        queryParams: {
            currentPage: "page",
            pageSize: "per_page",
            totalPages: "total_pages",
            totalRecords: "total_entries",
            sortKey: "sort_by",
            order: "order",
            directions: {
                "-1": "asc",
                1: "desc"
            }
        },
        constructor: function(e, t) {
            k.constructor.apply(this, arguments), t = t || {};
            var n = this.mode = t.mode || this.mode || R.mode, i = o({}, R.queryParams, this.queryParams, t.queryParams || {});
            i.directions = o({}, R.queryParams.directions, this.queryParams.directions, i.directions || {}), 
            this.queryParams = i;
            var r = this.state = o({}, R.state, this.state, t.state || {});
            r.currentPage = null == r.currentPage ? r.firstPage : r.currentPage, f(e) || (e = e ? [ e ] : []), 
            e = e.slice(), "server" == n || null != r.totalRecords || d(e) || (r.totalRecords = e.length), 
            this.switchMode(n, o({
                fetch: !1,
                resetState: !1,
                models: e
            }, t));
            var s = t.comparator;
            if (r.sortKey && !s && this.setSorting(r.sortKey, r.order, t), "server" != n) {
                var l = this.fullCollection;
                s && t.full && (this.comparator = null, l.comparator = s), t.full && l.sort(), e && !d(e) && (this.reset(e, o({
                    silent: !0
                }, t)), this.getPage(r.currentPage), e.splice.apply(e, [ 0, e.length ].concat(this.models)));
            }
            this._initState = a(this.state);
        },
        _makeFullCollection: function(e, n) {
            var i, r, o, s = [ "url", "model", "sync", "comparator" ], a = this.constructor.prototype, l = {};
            for (i = 0, r = s.length; r > i; i++) o = s[i], y(a[o]) || (l[o] = a[o]);
            var c = new (t.Collection.extend(l))(e, n);
            for (i = 0, r = s.length; r > i; i++) o = s[i], this[o] !== a[o] && (c[o] = this[o]);
            return c;
        },
        _makeCollectionEventHandler: function(e, t) {
            return function(n, i, s, c) {
                var u = e._handlers;
                l(v(u), function(n) {
                    var i = u[n];
                    e.off(n, i), t.off(n, i);
                });
                var d = a(e.state), h = d.firstPage, p = 0 === h ? d.currentPage : d.currentPage - 1, f = d.pageSize, m = p * f, g = m + f;
                if ("add" == n) {
                    var b, x, C, k, c = c || {};
                    if (s == t) x = t.indexOf(i), x >= m && g > x && (k = e, b = C = x - m); else {
                        b = e.indexOf(i), x = m + b, k = t;
                        var C = y(c.at) ? x : c.at + m;
                    }
                    if (c.onRemove || (++d.totalRecords, delete c.onRemove), e.state = e._checkState(d), 
                    k) {
                        k.add(i, o({}, c || {}, {
                            at: C
                        }));
                        var T = b >= f ? i : !y(c.at) && g > C && e.length > f ? e.at(f) : null;
                        T && r(s, n, function() {
                            e.remove(T, {
                                onAdd: !0
                            });
                        });
                    }
                }
                if ("remove" == n) if (c.onAdd) delete c.onAdd; else {
                    if (--d.totalRecords) {
                        var _ = d.totalPages = w(d.totalRecords / f);
                        d.lastPage = 0 === h ? _ - 1 : _ || h, d.currentPage > _ && (d.currentPage = d.lastPage);
                    } else d.totalRecords = null, d.totalPages = null;
                    e.state = e._checkState(d);
                    var E, R = c.index;
                    s == e ? ((E = t.at(g)) && r(e, n, function() {
                        e.push(E, {
                            onRemove: !0
                        });
                    }), t.remove(i)) : R >= m && g > R && ((E = t.at(g - 1)) && r(e, n, function() {
                        e.push(E, {
                            onRemove: !0
                        });
                    }), e.remove(i));
                }
                if ("reset" == n) if (c = s, s = i, s == e && null == c.from && null == c.to) {
                    var S = t.models.slice(0, m), N = t.models.slice(m + e.models.length);
                    t.reset(S.concat(e.models).concat(N), c);
                } else s == t && ((d.totalRecords = t.models.length) || (d.totalRecords = null, 
                d.totalPages = null), "client" == e.mode && (d.lastPage = d.currentPage = d.firstPage), 
                e.state = e._checkState(d), e.reset(t.models.slice(m, g), o({}, c, {
                    parse: !1
                })));
                "sort" == n && (c = s, s = i, s === t && e.reset(t.models.slice(m, g), o({}, c, {
                    parse: !1
                }))), l(v(u), function(n) {
                    var i = u[n];
                    l([ e, t ], function(e) {
                        e.on(n, i);
                        var t = e._events[n] || [];
                        t.unshift(t.pop());
                    });
                });
            };
        },
        _checkState: function(e) {
            var t = this.mode, i = this.links, r = e.totalRecords, o = e.pageSize, s = e.currentPage, a = e.firstPage, l = e.totalPages;
            if (null != r && null != o && null != s && null != a && ("infinite" == t ? i : !0)) {
                if (r = n(r, "totalRecords"), o = n(o, "pageSize"), s = n(s, "currentPage"), a = n(a, "firstPage"), 
                1 > o) throw new RangeError("`pageSize` must be >= 1");
                if (l = e.totalPages = w(r / o), 0 > a || a > 1) throw new RangeError("`firstPage must be 0 or 1`");
                if (e.lastPage = 0 === a ? C(0, l - 1) : l || a, "infinite" == t) {
                    if (!i[s + ""]) throw new RangeError("No link found for page " + s);
                } else if (a > s || l > 0 && (a ? s > l : s >= l)) throw new RangeError("`currentPage` must be firstPage <= currentPage " + (a ? ">" : ">=") + " totalPages if " + a + "-based. Got " + s + ".");
            }
            return e;
        },
        setPageSize: function(e, t) {
            e = n(e, "pageSize"), t = t || {
                first: !1
            };
            var i = this.state, r = w(i.totalRecords / e), a = r ? C(i.firstPage, x(r * i.currentPage / i.totalPages)) : i.firstPage;
            return i = this.state = this._checkState(o({}, i, {
                pageSize: e,
                currentPage: t.first ? i.firstPage : a,
                totalPages: r
            })), this.getPage(i.currentPage, s(t, [ "first" ]));
        },
        switchMode: function(t, n) {
            if (!u([ "server", "client", "infinite" ], t)) throw new TypeError('`mode` must be one of "server", "client" or "infinite"');
            n = n || {
                fetch: !0,
                resetState: !0
            };
            var i = this.state = n.resetState ? a(this._initState) : this._checkState(o({}, this.state));
            this.mode = t;
            var r, c = this, d = this.fullCollection, h = this._handlers = this._handlers || {};
            if ("server" == t || d) "server" == t && d && (l(v(h), function(e) {
                r = h[e], c.off(e, r), d.off(e, r);
            }), delete this._handlers, this._fullComparator = d.comparator, delete this.fullCollection); else {
                d = this._makeFullCollection(n.models || [], n), d.pageableCollection = this, this.fullCollection = d;
                var p = this._makeCollectionEventHandler(this, d);
                l([ "add", "remove", "reset", "sort" ], function(t) {
                    h[t] = r = e.bind(p, {}, t), c.on(t, r), d.on(t, r);
                }), d.comparator = this._fullComparator;
            }
            if ("infinite" == t) for (var f = this.links = {}, m = i.firstPage, g = w(i.totalRecords / i.pageSize), y = 0 === m ? C(0, g - 1) : g || m, b = i.firstPage; y >= b; b++) f[b] = this.url; else this.links && delete this.links;
            return n.fetch ? this.fetch(s(n, "fetch", "resetState")) : this;
        },
        hasPreviousPage: function() {
            var e = this.state, t = e.currentPage;
            return "infinite" != this.mode ? t > e.firstPage : !!this.links[t - 1];
        },
        hasNextPage: function() {
            var e = this.state, t = this.state.currentPage;
            return "infinite" != this.mode ? t < e.lastPage : !!this.links[t + 1];
        },
        getFirstPage: function(e) {
            return this.getPage("first", e);
        },
        getPreviousPage: function(e) {
            return this.getPage("prev", e);
        },
        getNextPage: function(e) {
            return this.getPage("next", e);
        },
        getLastPage: function(e) {
            return this.getPage("last", e);
        },
        getPage: function(e, t) {
            var i = this.mode, r = this.fullCollection;
            t = t || {
                fetch: !1
            };
            var a = this.state, l = a.firstPage, c = a.currentPage, u = a.lastPage, h = a.pageSize, p = e;
            switch (e) {
              case "first":
                p = l;
                break;

              case "prev":
                p = c - 1;
                break;

              case "next":
                p = c + 1;
                break;

              case "last":
                p = u;
                break;

              default:
                p = n(e, "index");
            }
            this.state = this._checkState(o({}, a, {
                currentPage: p
            })), t.from = c, t.to = p;
            var f = (0 === l ? p : p - 1) * h, m = r && r.length ? r.models.slice(f, f + h) : [];
            return "client" != i && ("infinite" != i || d(m)) || t.fetch ? ("infinite" == i && (t.url = this.links[p]), 
            this.fetch(s(t, "fetch"))) : (this.reset(m, s(t, "fetch")), this);
        },
        getPageByOffset: function(e, t) {
            if (0 > e) throw new RangeError("`offset must be > 0`");
            e = n(e);
            var i = x(e / this.state.pageSize);
            return 0 !== this.state.firstPage && i++, i > this.state.lastPage && (i = this.state.lastPage), 
            this.getPage(i, t);
        },
        sync: function(e, n, i) {
            var r = this;
            if ("infinite" == r.mode) {
                var s = i.success, a = r.state.currentPage;
                i.success = function(e, t, n) {
                    var l = r.links, c = r.parseLinks(e, o({
                        xhr: n
                    }, i));
                    c.first && (l[r.state.firstPage] = c.first), c.prev && (l[a - 1] = c.prev), c.next && (l[a + 1] = c.next), 
                    s && s(e, t, n);
                };
            }
            return (k.sync || t.sync).call(r, e, n, i);
        },
        parseLinks: function(e, t) {
            var n = {}, i = t.xhr.getResponseHeader("Link");
            if (i) {
                var r = [ "first", "prev", "next" ];
                l(i.split(","), function(e) {
                    var t = e.split(";"), i = t[0].replace(_, ""), o = t.slice(1);
                    l(o, function(e) {
                        var t = e.split("="), o = t[0].replace(T, ""), s = t[1].replace(T, "");
                        "rel" == o && u(r, s) && (n[s] = i);
                    });
                });
            }
            return n;
        },
        parse: function(e, t) {
            var n = this.parseState(e, a(this.queryParams), a(this.state), t);
            return n && (this.state = this._checkState(o({}, this.state, n))), this.parseRecords(e, t);
        },
        parseState: function(t, n, i) {
            if (t && 2 === t.length && g(t[0]) && f(t[1])) {
                var r = a(i), o = t[0];
                return l(h(s(n, "directions")), function(t) {
                    var n = t[0], i = t[1], s = o[i];
                    y(s) || e.isNull(s) || (r[n] = o[i]);
                }), o.order && (r.order = 1 * p(n.directions)[o.order]), r;
            }
        },
        parseRecords: function(e) {
            return e && 2 === e.length && g(e[0]) && f(e[1]) ? e[1] : e;
        },
        fetch: function(e) {
            e = e || {};
            var t = this._checkState(this.state), n = this.mode;
            "infinite" != n || e.url || (e.url = this.links[t.currentPage]);
            var r = e.data || {}, l = b(e, "url") || b(this, "url") || "", u = l.indexOf("?");
            -1 != u && (o(r, i(l.slice(u + 1))), l = l.slice(0, u)), e.url = l, e.data = r;
            var d, p, f, g, w = "client" == this.mode ? c(this.queryParams, "sortKey", "order") : s(c(this.queryParams, v(R.queryParams)), "directions"), x = h(w), C = a(this);
            for (d = 0; d < x.length; d++) p = x[d], f = p[0], g = p[1], g = m(g) ? g.call(C) : g, 
            null != t[f] && null != g && (r[g] = t[f]);
            t.sortKey && t.order ? r[w.order] = this.queryParams.directions[t.order + ""] : t.sortKey || delete r[w.order];
            var T = h(s(this.queryParams, v(R.queryParams)));
            for (d = 0; d < T.length; d++) p = T[d], g = p[1], g = m(g) ? g.call(C) : g, null != g && (r[p[0]] = g);
            if ("server" != n) {
                var _ = this, E = this.fullCollection, S = e.success;
                return e.success = function(t, i, r) {
                    r = r || {}, y(e.silent) ? delete r.silent : r.silent = e.silent;
                    var s = t.models;
                    "client" == n ? E.reset(s, r) : (E.add(s, o({
                        at: E.length
                    }, o(r, {
                        parse: !1
                    }))), _.trigger("reset", _, r)), S && S(t, i, r);
                }, k.fetch.call(this, o({}, e, {
                    silent: !0
                }));
            }
            return k.fetch.call(this, e);
        },
        _makeComparator: function(e, t, n) {
            var i = this.state;
            return e = e || i.sortKey, t = t || i.order, e && t ? (n || (n = function(e, t) {
                return e.get(t);
            }), function(i, r) {
                var o, s = n(i, e), a = n(r, e);
                return 1 === t && (o = s, s = a, a = o), s === a ? 0 : a > s ? -1 : 1;
            }) : void 0;
        },
        setSorting: function(e, t, n) {
            var i = this.state;
            i.sortKey = e, i.order = t = t || i.order;
            var r = this.fullCollection, s = !1, a = !1;
            e || (s = a = !0);
            var l = this.mode;
            n = o({
                side: "client" == l ? l : "server",
                full: !0
            }, n);
            var c = this._makeComparator(e, t, n.sortValue), u = n.full, d = n.side;
            return "client" == d ? u ? (r && (r.comparator = c), s = !0) : (this.comparator = c, 
            a = !0) : "server" != d || u || (this.comparator = c), s && (this.comparator = null), 
            a && r && (r.comparator = null), this;
        }
    }), R = E.prototype;
    return E;
}), function(e, t) {
    "function" == typeof define && define.amd ? define("backbone-relational", [ "exports", "backbone", "underscore" ], t) : "undefined" != typeof exports ? t(exports, require("backbone"), require("underscore")) : t(e, e.Backbone, e._);
}(this, function(e, t, n) {
    t.Relational = {
        showWarnings: !0
    }, t.Semaphore = {
        _permitsAvailable: null,
        _permitsUsed: 0,
        acquire: function() {
            if (this._permitsAvailable && this._permitsUsed >= this._permitsAvailable) throw new Error("Max permits acquired");
            this._permitsUsed++;
        },
        release: function() {
            if (0 === this._permitsUsed) throw new Error("All permits released");
            this._permitsUsed--;
        },
        isLocked: function() {
            return this._permitsUsed > 0;
        },
        setAvailablePermits: function(e) {
            if (this._permitsUsed > e) throw new Error("Available permits cannot be less than used permits");
            this._permitsAvailable = e;
        }
    }, t.BlockingQueue = function() {
        this._queue = [];
    }, n.extend(t.BlockingQueue.prototype, t.Semaphore, {
        _queue: null,
        add: function(e) {
            this.isBlocked() ? this._queue.push(e) : e();
        },
        process: function() {
            var e = this._queue;
            for (this._queue = []; e && e.length; ) e.shift()();
        },
        block: function() {
            this.acquire();
        },
        unblock: function() {
            this.release(), this.isBlocked() || this.process();
        },
        isBlocked: function() {
            return this.isLocked();
        }
    }), t.Relational.eventQueue = new t.BlockingQueue(), t.Store = function() {
        this._collections = [], this._reverseRelations = [], this._orphanRelations = [], 
        this._subModels = [], this._modelScopes = [ e ];
    }, n.extend(t.Store.prototype, t.Events, {
        initializeRelation: function(e, i, r) {
            var o = n.isString(i.type) ? t[i.type] || this.getObjectByName(i.type) : i.type;
            if (o && o.prototype instanceof t.Relation) {
                new o(e, i, r);
            } else t.Relational.showWarnings && "undefined" != typeof console && console.warn("Relation=%o; missing or invalid relation type!", i);
        },
        addModelScope: function(e) {
            this._modelScopes.push(e);
        },
        removeModelScope: function(e) {
            this._modelScopes = n.without(this._modelScopes, e);
        },
        addSubModels: function(e, t) {
            this._subModels.push({
                superModelType: t,
                subModels: e
            });
        },
        setupSuperModel: function(e) {
            n.find(this._subModels, function(t) {
                return n.filter(t.subModels || [], function(n, i) {
                    var r = this.getObjectByName(n);
                    return e === r ? (t.superModelType._subModels[i] = e, e._superModel = t.superModelType, 
                    e._subModelTypeValue = i, e._subModelTypeAttribute = t.superModelType.prototype.subModelTypeAttribute, 
                    !0) : void 0;
                }, this).length;
            }, this);
        },
        addReverseRelation: function(e) {
            var t = n.any(this._reverseRelations, function(t) {
                return n.all(e || [], function(e, n) {
                    return e === t[n];
                });
            });
            !t && e.model && e.type && (this._reverseRelations.push(e), this._addRelation(e.model, e), 
            this.retroFitRelation(e));
        },
        addOrphanRelation: function(e) {
            var t = n.any(this._orphanRelations, function(t) {
                return n.all(e || [], function(e, n) {
                    return e === t[n];
                });
            });
            !t && e.model && e.type && this._orphanRelations.push(e);
        },
        processOrphanRelations: function() {
            n.each(this._orphanRelations.slice(0), function(e) {
                var i = t.Relational.store.getObjectByName(e.relatedModel);
                i && (this.initializeRelation(null, e), this._orphanRelations = n.without(this._orphanRelations, e));
            }, this);
        },
        _addRelation: function(e, t) {
            e.prototype.relations || (e.prototype.relations = []), e.prototype.relations.push(t), 
            n.each(e._subModels || [], function(e) {
                this._addRelation(e, t);
            }, this);
        },
        retroFitRelation: function(e) {
            var t = this.getCollection(e.model, !1);
            t && t.each(function(t) {
                if (t instanceof e.model) {
                    new e.type(t, e);
                }
            }, this);
        },
        getCollection: function(e, i) {
            e instanceof t.RelationalModel && (e = e.constructor);
            for (var r = e; r._superModel; ) r = r._superModel;
            var o = n.find(this._collections, function(e) {
                return e.model === r;
            });
            return o || i === !1 || (o = this._createCollection(r)), o;
        },
        getObjectByName: function(e) {
            var t = e.split("."), i = null;
            return n.find(this._modelScopes, function(e) {
                return i = n.reduce(t || [], function(e, t) {
                    return e ? e[t] : void 0;
                }, e), i && i !== e ? !0 : void 0;
            }, this), i;
        },
        _createCollection: function(e) {
            var n;
            return e instanceof t.RelationalModel && (e = e.constructor), e.prototype instanceof t.RelationalModel && (n = new t.Collection(), 
            n.model = e, this._collections.push(n)), n;
        },
        resolveIdForItem: function(e, i) {
            var r = n.isString(i) || n.isNumber(i) ? i : null;
            return null === r && (i instanceof t.RelationalModel ? r = i.id : n.isObject(i) && (r = i[e.prototype.idAttribute])), 
            r || 0 === r || (r = null), r;
        },
        find: function(e, t) {
            var n = this.resolveIdForItem(e, t), i = this.getCollection(e);
            if (i) {
                var r = i.get(n);
                if (r instanceof e) return r;
            }
            return null;
        },
        register: function(e) {
            var t = this.getCollection(e);
            if (t) {
                var n = e.collection;
                t.add(e), e.collection = n;
            }
        },
        checkId: function(e, n) {
            var i = this.getCollection(e), r = i && i.get(n);
            if (r && e !== r) throw t.Relational.showWarnings && "undefined" != typeof console && console.warn("Duplicate id! Old RelationalModel=%o, new RelationalModel=%o", r, e), 
            new Error("Cannot instantiate more than one Backbone.RelationalModel with the same id per type!");
        },
        update: function(e) {
            var t = this.getCollection(e);
            t.contains(e) || this.register(e), t._onModelEvent("change:" + e.idAttribute, e, t), 
            e.trigger("relational:change:id", e, t);
        },
        unregister: function(e) {
            var i, r;
            e instanceof t.Model ? (i = this.getCollection(e), r = [ e ]) : e instanceof t.Collection ? (i = this.getCollection(e.model), 
            r = n.clone(e.models)) : (i = this.getCollection(e), r = n.clone(i.models)), n.each(r, function(e) {
                this.stopListening(e), n.invoke(e.getRelations(), "stopListening");
            }, this), n.contains(this._collections, e) ? i.reset([]) : n.each(r, function(e) {
                i.get(e) ? i.remove(e) : i.trigger("relational:remove", e, i);
            }, this);
        },
        reset: function() {
            this.stopListening(), n.each(this._collections, function(e) {
                this.unregister(e);
            }, this), this._collections = [], this._subModels = [], this._modelScopes = [ e ];
        }
    }), t.Relational.store = new t.Store(), t.Relation = function(e, i, r) {
        if (this.instance = e, i = n.isObject(i) ? i : {}, this.reverseRelation = n.defaults(i.reverseRelation || {}, this.options.reverseRelation), 
        this.options = n.defaults(i, this.options, t.Relation.prototype.options), this.reverseRelation.type = n.isString(this.reverseRelation.type) ? t[this.reverseRelation.type] || t.Relational.store.getObjectByName(this.reverseRelation.type) : this.reverseRelation.type, 
        this.key = this.options.key, this.keySource = this.options.keySource || this.key, 
        this.keyDestination = this.options.keyDestination || this.keySource || this.key, 
        this.model = this.options.model || this.instance.constructor, this.relatedModel = this.options.relatedModel, 
        !n.isFunction(this.relatedModel) || this.relatedModel.prototype instanceof t.RelationalModel || (this.relatedModel = n.result(this, "relatedModel")), 
        n.isString(this.relatedModel) && (this.relatedModel = t.Relational.store.getObjectByName(this.relatedModel)), 
        this.checkPreconditions() && (!this.options.isAutoRelation && this.reverseRelation.type && this.reverseRelation.key && t.Relational.store.addReverseRelation(n.defaults({
            isAutoRelation: !0,
            model: this.relatedModel,
            relatedModel: this.model,
            reverseRelation: this.options
        }, this.reverseRelation)), e)) {
            var o = this.keySource;
            o !== this.key && n.isObject(this.instance.get(this.key)) && (o = this.key), this.setKeyContents(this.instance.get(o)), 
            this.relatedCollection = t.Relational.store.getCollection(this.relatedModel), this.keySource !== this.key && delete this.instance.attributes[this.keySource], 
            this.instance._relations[this.key] = this, this.initialize(r), this.options.autoFetch && this.instance.fetchRelated(this.key, n.isObject(this.options.autoFetch) ? this.options.autoFetch : {}), 
            this.listenTo(this.instance, "destroy", this.destroy).listenTo(this.relatedCollection, "relational:add relational:change:id", this.tryAddRelated).listenTo(this.relatedCollection, "relational:remove", this.removeRelated);
        }
    }, t.Relation.extend = t.Model.extend, n.extend(t.Relation.prototype, t.Events, t.Semaphore, {
        options: {
            createModels: !0,
            includeInJSON: !0,
            isAutoRelation: !1,
            autoFetch: !1,
            parse: !1
        },
        instance: null,
        key: null,
        keyContents: null,
        relatedModel: null,
        relatedCollection: null,
        reverseRelation: null,
        related: null,
        checkPreconditions: function() {
            var e = this.instance, i = this.key, r = this.model, o = this.relatedModel, s = t.Relational.showWarnings && "undefined" != typeof console;
            if (!r || !i || !o) return s && console.warn("Relation=%o: missing model, key or relatedModel (%o, %o, %o).", this, r, i, o), 
            !1;
            if (!(r.prototype instanceof t.RelationalModel)) return s && console.warn("Relation=%o: model does not inherit from Backbone.RelationalModel (%o).", this, e), 
            !1;
            if (!(o.prototype instanceof t.RelationalModel)) return s && console.warn("Relation=%o: relatedModel does not inherit from Backbone.RelationalModel (%o).", this, o), 
            !1;
            if (this instanceof t.HasMany && this.reverseRelation.type === t.HasMany) return s && console.warn("Relation=%o: relation is a HasMany, and the reverseRelation is HasMany as well.", this), 
            !1;
            if (e && n.keys(e._relations).length) {
                var a = n.find(e._relations, function(e) {
                    return e.key === i;
                }, this);
                if (a) return s && console.warn("Cannot create relation=%o on %o for model=%o: already taken by relation=%o.", this, i, e, a), 
                !1;
            }
            return !0;
        },
        setRelated: function(e) {
            this.related = e, this.instance.attributes[this.key] = e;
        },
        _isReverseRelation: function(e) {
            return e.instance instanceof this.relatedModel && this.reverseRelation.key === e.key && this.key === e.reverseRelation.key;
        },
        getReverseRelations: function(e) {
            var t = [], i = n.isUndefined(e) ? this.related && (this.related.models || [ this.related ]) : [ e ];
            return n.each(i || [], function(e) {
                n.each(e.getRelations() || [], function(e) {
                    this._isReverseRelation(e) && t.push(e);
                }, this);
            }, this), t;
        },
        destroy: function() {
            this.stopListening(), this instanceof t.HasOne ? this.setRelated(null) : this instanceof t.HasMany && this.setRelated(this._prepareCollection()), 
            n.each(this.getReverseRelations(), function(e) {
                e.removeRelated(this.instance);
            }, this);
        }
    }), t.HasOne = t.Relation.extend({
        options: {
            reverseRelation: {
                type: "HasMany"
            }
        },
        initialize: function(e) {
            this.listenTo(this.instance, "relational:change:" + this.key, this.onChange);
            var t = this.findRelated(e);
            this.setRelated(t), n.each(this.getReverseRelations(), function(t) {
                t.addRelated(this.instance, e);
            }, this);
        },
        findRelated: function(e) {
            var t = null;
            if (e = n.defaults({
                parse: this.options.parse
            }, e), this.keyContents instanceof this.relatedModel) t = this.keyContents; else if (this.keyContents || 0 === this.keyContents) {
                var i = n.defaults({
                    create: this.options.createModels
                }, e);
                t = this.relatedModel.findOrCreate(this.keyContents, i);
            }
            return t && (this.keyId = null), t;
        },
        setKeyContents: function(e) {
            this.keyContents = e, this.keyId = t.Relational.store.resolveIdForItem(this.relatedModel, this.keyContents);
        },
        onChange: function(e, i, r) {
            if (!this.isLocked()) {
                this.acquire(), r = r ? n.clone(r) : {};
                var o = n.isUndefined(r.__related), s = o ? this.related : r.__related;
                if (o) {
                    this.setKeyContents(i);
                    var a = this.findRelated(r);
                    this.setRelated(a);
                }
                if (s && this.related !== s && n.each(this.getReverseRelations(s), function(e) {
                    e.removeRelated(this.instance, null, r);
                }, this), n.each(this.getReverseRelations(), function(e) {
                    e.addRelated(this.instance, r);
                }, this), !r.silent && this.related !== s) {
                    var l = this;
                    this.changed = !0, t.Relational.eventQueue.add(function() {
                        l.instance.trigger("change:" + l.key, l.instance, l.related, r, !0), l.changed = !1;
                    });
                }
                this.release();
            }
        },
        tryAddRelated: function(e, t, n) {
            !this.keyId && 0 !== this.keyId || e.id !== this.keyId || (this.addRelated(e, n), 
            this.keyId = null);
        },
        addRelated: function(e, t) {
            var i = this;
            e.queue(function() {
                if (e !== i.related) {
                    var r = i.related || null;
                    i.setRelated(e), i.onChange(i.instance, e, n.defaults({
                        __related: r
                    }, t));
                }
            });
        },
        removeRelated: function(e, t, i) {
            if (this.related && e === this.related) {
                var r = this.related || null;
                this.setRelated(null), this.onChange(this.instance, e, n.defaults({
                    __related: r
                }, i));
            }
        }
    }), t.HasMany = t.Relation.extend({
        collectionType: null,
        options: {
            reverseRelation: {
                type: "HasOne"
            },
            collectionType: t.Collection,
            collectionKey: !0,
            collectionOptions: {}
        },
        initialize: function(e) {
            if (this.listenTo(this.instance, "relational:change:" + this.key, this.onChange), 
            this.collectionType = this.options.collectionType, !n.isFunction(this.collectionType) || this.collectionType === t.Collection || this.collectionType.prototype instanceof t.Collection || (this.collectionType = n.result(this, "collectionType")), 
            n.isString(this.collectionType) && (this.collectionType = t.Relational.store.getObjectByName(this.collectionType)), 
            this.collectionType !== t.Collection && !(this.collectionType.prototype instanceof t.Collection)) throw new Error("`collectionType` must inherit from Backbone.Collection");
            var i = this.findRelated(e);
            this.setRelated(i);
        },
        _prepareCollection: function(e) {
            if (this.related && this.stopListening(this.related), !(e && e instanceof t.Collection)) {
                var i = n.isFunction(this.options.collectionOptions) ? this.options.collectionOptions(this.instance) : this.options.collectionOptions;
                e = new this.collectionType(null, i);
            }
            if (e.model = this.relatedModel, this.options.collectionKey) {
                var r = this.options.collectionKey === !0 ? this.options.reverseRelation.key : this.options.collectionKey;
                e[r] && e[r] !== this.instance ? t.Relational.showWarnings && "undefined" != typeof console && console.warn("Relation=%o; collectionKey=%s already exists on collection=%o", this, r, this.options.collectionKey) : r && (e[r] = this.instance);
            }
            return this.listenTo(e, "relational:add", this.handleAddition).listenTo(e, "relational:remove", this.handleRemoval).listenTo(e, "relational:reset", this.handleReset), 
            e;
        },
        findRelated: function(e) {
            var i = null;
            if (e = n.defaults({
                parse: this.options.parse
            }, e), this.keyContents instanceof t.Collection) this._prepareCollection(this.keyContents), 
            i = this.keyContents; else {
                var r = [];
                n.each(this.keyContents, function(t) {
                    var i = null;
                    i = t instanceof this.relatedModel ? t : this.relatedModel.findOrCreate(t, n.extend({
                        merge: !0
                    }, e, {
                        create: this.options.createModels
                    })), i && r.push(i);
                }, this), i = this.related instanceof t.Collection ? this.related : this._prepareCollection(), 
                i.set(r, n.defaults({
                    merge: !1,
                    parse: !1
                }, e));
            }
            return this.keyIds = n.difference(this.keyIds, n.pluck(i.models, "id")), i;
        },
        setKeyContents: function(e) {
            this.keyContents = e instanceof t.Collection ? e : null, this.keyIds = [], this.keyContents || !e && 0 !== e || (this.keyContents = n.isArray(e) ? e : [ e ], 
            n.each(this.keyContents, function(e) {
                var n = t.Relational.store.resolveIdForItem(this.relatedModel, e);
                (n || 0 === n) && this.keyIds.push(n);
            }, this));
        },
        onChange: function(e, i, r) {
            r = r ? n.clone(r) : {}, this.setKeyContents(i), this.changed = !1;
            var o = this.findRelated(r);
            if (this.setRelated(o), !r.silent) {
                var s = this;
                t.Relational.eventQueue.add(function() {
                    s.changed && (s.instance.trigger("change:" + s.key, s.instance, s.related, r, !0), 
                    s.changed = !1);
                });
            }
        },
        handleAddition: function(e, i, r) {
            r = r ? n.clone(r) : {}, this.changed = !0, n.each(this.getReverseRelations(e), function(e) {
                e.addRelated(this.instance, r);
            }, this);
            var o = this;
            !r.silent && t.Relational.eventQueue.add(function() {
                o.instance.trigger("add:" + o.key, e, o.related, r);
            });
        },
        handleRemoval: function(e, i, r) {
            r = r ? n.clone(r) : {}, this.changed = !0, n.each(this.getReverseRelations(e), function(e) {
                e.removeRelated(this.instance, null, r);
            }, this);
            var o = this;
            !r.silent && t.Relational.eventQueue.add(function() {
                o.instance.trigger("remove:" + o.key, e, o.related, r);
            });
        },
        handleReset: function(e, i) {
            var r = this;
            i = i ? n.clone(i) : {}, !i.silent && t.Relational.eventQueue.add(function() {
                r.instance.trigger("reset:" + r.key, r.related, i);
            });
        },
        tryAddRelated: function(e, t, i) {
            var r = n.contains(this.keyIds, e.id);
            r && (this.addRelated(e, i), this.keyIds = n.without(this.keyIds, e.id));
        },
        addRelated: function(e, t) {
            var i = this;
            e.queue(function() {
                i.related && !i.related.get(e) && i.related.add(e, n.defaults({
                    parse: !1
                }, t));
            });
        },
        removeRelated: function(e, t, n) {
            this.related.get(e) && this.related.remove(e, n);
        }
    }), t.RelationalModel = t.Model.extend({
        relations: null,
        _relations: null,
        _isInitialized: !1,
        _deferProcessing: !1,
        _queue: null,
        _attributeChangeFired: !1,
        subModelTypeAttribute: "type",
        subModelTypes: null,
        constructor: function(e, i) {
            if (i && i.collection) {
                var r = this, o = this.collection = i.collection;
                delete i.collection, this._deferProcessing = !0;
                var s = function(e) {
                    e === r && (r._deferProcessing = !1, r.processQueue(), o.off("relational:add", s));
                };
                o.on("relational:add", s), n.defer(function() {
                    s(r);
                });
            }
            t.Relational.store.processOrphanRelations(), t.Relational.store.listenTo(this, "relational:unregister", t.Relational.store.unregister), 
            this._queue = new t.BlockingQueue(), this._queue.block(), t.Relational.eventQueue.block();
            try {
                t.Model.apply(this, arguments);
            } finally {
                t.Relational.eventQueue.unblock();
            }
        },
        trigger: function(e) {
            if (e.length > 5 && 0 === e.indexOf("change")) {
                var n = this, i = arguments;
                t.Relational.eventQueue.isLocked() ? t.Relational.eventQueue.add(function() {
                    var r = !0;
                    if ("change" === e) r = n.hasChanged() || n._attributeChangeFired, n._attributeChangeFired = !1; else {
                        var o = e.slice(7), s = n.getRelation(o);
                        s ? (r = i[4] === !0, r ? n.changed[o] = i[2] : s.changed || delete n.changed[o]) : r && (n._attributeChangeFired = !0);
                    }
                    r && t.Model.prototype.trigger.apply(n, i);
                }) : t.Model.prototype.trigger.apply(n, i);
            } else "destroy" === e ? (t.Model.prototype.trigger.apply(this, arguments), t.Relational.store.unregister(this)) : t.Model.prototype.trigger.apply(this, arguments);
            return this;
        },
        initializeRelations: function(e) {
            this.acquire(), this._relations = {}, n.each(this.relations || [], function(n) {
                t.Relational.store.initializeRelation(this, n, e);
            }, this), this._isInitialized = !0, this.release(), this.processQueue();
        },
        updateRelations: function(e, t) {
            this._isInitialized && !this.isLocked() && n.each(this._relations, function(n) {
                if (!e || n.keySource in e || n.key in e) {
                    var i = this.attributes[n.keySource] || this.attributes[n.key], r = e && (e[n.keySource] || e[n.key]);
                    (n.related !== i || null === i && null === r) && this.trigger("relational:change:" + n.key, this, i, t || {});
                }
                n.keySource !== n.key && delete this.attributes[n.keySource];
            }, this);
        },
        queue: function(e) {
            this._queue.add(e);
        },
        processQueue: function() {
            this._isInitialized && !this._deferProcessing && this._queue.isBlocked() && this._queue.unblock();
        },
        getRelation: function(e) {
            return this._relations[e];
        },
        getRelations: function() {
            return n.values(this._relations);
        },
        fetchRelated: function(e, i, r) {
            i = n.extend({
                update: !0,
                remove: !1
            }, i);
            var o, s, a = [], l = this.getRelation(e), c = l && (l.keyIds && l.keyIds.slice(0) || (l.keyId || 0 === l.keyId ? [ l.keyId ] : []));
            if (r && (o = l.related instanceof t.Collection ? l.related.models : [ l.related ], 
            n.each(o, function(e) {
                (e.id || 0 === e.id) && c.push(e.id);
            })), c && c.length) {
                var u = [];
                if (o = n.map(c, function(e) {
                    var t = l.relatedModel.findModel(e);
                    if (!t) {
                        var n = {};
                        n[l.relatedModel.prototype.idAttribute] = e, t = l.relatedModel.findOrCreate(n, i), 
                        u.push(t);
                    }
                    return t;
                }, this), l.related instanceof t.Collection && n.isFunction(l.related.url) && (s = l.related.url(o)), 
                s && s !== l.related.url()) {
                    var d = n.defaults({
                        error: function() {
                            var e = arguments;
                            n.each(u, function(t) {
                                t.trigger("destroy", t, t.collection, i), i.error && i.error.apply(t, e);
                            });
                        },
                        url: s
                    }, i);
                    a = [ l.related.fetch(d) ];
                } else a = n.map(o, function(e) {
                    var t = n.defaults({
                        error: function() {
                            n.contains(u, e) && (e.trigger("destroy", e, e.collection, i), i.error && i.error.apply(e, arguments));
                        }
                    }, i);
                    return e.fetch(t);
                }, this);
            }
            return a;
        },
        get: function(e) {
            var i = t.Model.prototype.get.call(this, e);
            if (!this.dotNotation || -1 === e.indexOf(".")) return i;
            var r = e.split("."), o = n.reduce(r, function(e, i) {
                if (n.isNull(e) || n.isUndefined(e)) return void 0;
                if (e instanceof t.Model) return t.Model.prototype.get.call(e, i);
                if (e instanceof t.Collection) return t.Collection.prototype.at.call(e, i);
                throw new Error("Attribute must be an instanceof Backbone.Model or Backbone.Collection. Is: " + e + ", currentSplit: " + i);
            }, this);
            if (void 0 !== i && void 0 !== o) throw new Error("Ambiguous result for '" + e + "'. direct result: " + i + ", dotNotation: " + o);
            return i || o;
        },
        set: function(e, i, r) {
            t.Relational.eventQueue.block();
            var o, s;
            n.isObject(e) || null == e ? (o = e, r = i) : (o = {}, o[e] = i);
            try {
                var a = this.id, l = o && this.idAttribute in o && o[this.idAttribute];
                t.Relational.store.checkId(this, l), s = t.Model.prototype.set.apply(this, arguments), 
                this._isInitialized || this.isLocked() ? l && l !== a && t.Relational.store.update(this) : (this.constructor.initializeModelHierarchy(), 
                (l || 0 === l) && t.Relational.store.register(this), this.initializeRelations(r)), 
                o && this.updateRelations(o, r);
            } finally {
                t.Relational.eventQueue.unblock();
            }
            return s;
        },
        clone: function() {
            var e = n.clone(this.attributes);
            return n.isUndefined(e[this.idAttribute]) || (e[this.idAttribute] = null), n.each(this.getRelations(), function(t) {
                delete e[t.key];
            }), new this.constructor(e);
        },
        toJSON: function(e) {
            if (this.isLocked()) return this.id;
            this.acquire();
            var i = t.Model.prototype.toJSON.call(this, e);
            return !this.constructor._superModel || this.constructor._subModelTypeAttribute in i || (i[this.constructor._subModelTypeAttribute] = this.constructor._subModelTypeValue), 
            n.each(this._relations, function(r) {
                var o = i[r.key], s = r.options.includeInJSON, a = null;
                s === !0 ? o && n.isFunction(o.toJSON) && (a = o.toJSON(e)) : n.isString(s) ? (o instanceof t.Collection ? a = o.pluck(s) : o instanceof t.Model && (a = o.get(s)), 
                s === r.relatedModel.prototype.idAttribute && (r instanceof t.HasMany ? a = a.concat(r.keyIds) : r instanceof t.HasOne && (a = a || r.keyId, 
                a || n.isObject(r.keyContents) || (a = r.keyContents || null)))) : n.isArray(s) ? o instanceof t.Collection ? (a = [], 
                o.each(function(e) {
                    var t = {};
                    n.each(s, function(n) {
                        t[n] = e.get(n);
                    }), a.push(t);
                })) : o instanceof t.Model && (a = {}, n.each(s, function(e) {
                    a[e] = o.get(e);
                })) : delete i[r.key], null === a && e && e.wait && (a = o), s && (i[r.keyDestination] = a), 
                r.keyDestination !== r.key && delete i[r.key];
            }), this.release(), i;
        }
    }, {
        setup: function() {
            return this.prototype.relations = (this.prototype.relations || []).slice(0), this._subModels = {}, 
            this._superModel = null, this.prototype.hasOwnProperty("subModelTypes") ? t.Relational.store.addSubModels(this.prototype.subModelTypes, this) : this.prototype.subModelTypes = null, 
            n.each(this.prototype.relations || [], function(e) {
                if (e.model || (e.model = this), e.reverseRelation && e.model === this) {
                    var i = !0;
                    if (n.isString(e.relatedModel)) {
                        var r = t.Relational.store.getObjectByName(e.relatedModel);
                        i = r && r.prototype instanceof t.RelationalModel;
                    }
                    i ? t.Relational.store.initializeRelation(null, e) : n.isString(e.relatedModel) && t.Relational.store.addOrphanRelation(e);
                }
            }, this), this;
        },
        build: function(e, t) {
            this.initializeModelHierarchy();
            var n = this._findSubModelType(this, e) || this;
            return new n(e, t);
        },
        _findSubModelType: function(e, t) {
            if (e._subModels && e.prototype.subModelTypeAttribute in t) {
                var n = t[e.prototype.subModelTypeAttribute], i = e._subModels[n];
                if (i) return i;
                for (n in e._subModels) if (i = this._findSubModelType(e._subModels[n], t)) return i;
            }
            return null;
        },
        initializeModelHierarchy: function() {
            if (this.inheritRelations(), this.prototype.subModelTypes) {
                var e = n.keys(this._subModels), i = n.omit(this.prototype.subModelTypes, e);
                n.each(i, function(e) {
                    var n = t.Relational.store.getObjectByName(e);
                    n && n.initializeModelHierarchy();
                });
            }
        },
        inheritRelations: function() {
            if (n.isUndefined(this._superModel) || n.isNull(this._superModel)) if (t.Relational.store.setupSuperModel(this), 
            this._superModel) {
                if (this._superModel.inheritRelations(), this._superModel.prototype.relations) {
                    var e = n.filter(this._superModel.prototype.relations || [], function(e) {
                        return !n.any(this.prototype.relations || [], function(t) {
                            return e.relatedModel === t.relatedModel && e.key === t.key;
                        }, this);
                    }, this);
                    this.prototype.relations = e.concat(this.prototype.relations);
                }
            } else this._superModel = !1;
        },
        findOrCreate: function(e, t) {
            t || (t = {});
            var i = n.isObject(e) && t.parse && this.prototype.parse ? this.prototype.parse(n.clone(e)) : e, r = this.findModel(i);
            return n.isObject(e) && (r && t.merge !== !1 ? (delete t.collection, delete t.url, 
            r.set(i, t)) : r || t.create === !1 || (r = this.build(i, n.defaults({
                parse: !1
            }, t)))), r;
        },
        find: function(e, t) {
            return t || (t = {}), t.create = !1, this.findOrCreate(e, t);
        },
        findModel: function(e) {
            return t.Relational.store.find(this, e);
        }
    }), n.extend(t.RelationalModel.prototype, t.Semaphore), t.Collection.prototype.__prepareModel = t.Collection.prototype._prepareModel, 
    t.Collection.prototype._prepareModel = function(e, i) {
        var r;
        return e instanceof t.Model ? (e.collection || (e.collection = this), r = e) : (i = i ? n.clone(i) : {}, 
        i.collection = this, r = "undefined" != typeof this.model.findOrCreate ? this.model.findOrCreate(e, i) : new this.model(e, i), 
        r && r.validationError && (this.trigger("invalid", this, e, i), r = !1)), r;
    };
    var i = t.Collection.prototype.__set = t.Collection.prototype.set;
    t.Collection.prototype.set = function(e, r) {
        if (!(this.model.prototype instanceof t.RelationalModel)) return i.apply(this, arguments);
        r && r.parse && (e = this.parse(e, r));
        var o = !n.isArray(e), s = [], a = [];
        e = o ? e ? [ e ] : [] : n.clone(e), n.each(e, function(e) {
            e instanceof t.Model || (e = t.Collection.prototype._prepareModel.call(this, e, r)), 
            e && (a.push(e), this.get(e) || this.get(e.cid) ? null != e.id && (this._byId[e.id] = e) : s.push(e));
        }, this), a = o ? a.length ? a[0] : null : a;
        var l = i.call(this, a, n.defaults({
            parse: !1
        }, r));
        return n.each(s, function(e) {
            (this.get(e) || this.get(e.cid)) && this.trigger("relational:add", e, this, r);
        }, this), l;
    };
    var r = t.Collection.prototype.__remove = t.Collection.prototype.remove;
    t.Collection.prototype.remove = function(e, i) {
        if (!(this.model.prototype instanceof t.RelationalModel)) return r.apply(this, arguments);
        var o = !n.isArray(e), s = [];
        e = o ? e ? [ e ] : [] : n.clone(e), i || (i = {}), n.each(e, function(e) {
            e = this.get(e) || e && this.get(e.cid), e && s.push(e);
        }, this);
        var a = r.call(this, o ? s.length ? s[0] : null : s, i);
        return n.each(s, function(e) {
            this.trigger("relational:remove", e, this, i);
        }, this), a;
    };
    var o = t.Collection.prototype.__reset = t.Collection.prototype.reset;
    t.Collection.prototype.reset = function(e, i) {
        i = n.extend({
            merge: !0
        }, i);
        var r = o.call(this, e, i);
        return this.model.prototype instanceof t.RelationalModel && this.trigger("relational:reset", this, i), 
        r;
    };
    var s = t.Collection.prototype.__sort = t.Collection.prototype.sort;
    t.Collection.prototype.sort = function(e) {
        var n = s.call(this, e);
        return this.model.prototype instanceof t.RelationalModel && this.trigger("relational:reset", this, e), 
        n;
    };
    var a = t.Collection.prototype.__trigger = t.Collection.prototype.trigger;
    t.Collection.prototype.trigger = function(e) {
        if (!(this.model.prototype instanceof t.RelationalModel)) return a.apply(this, arguments);
        if ("add" === e || "remove" === e || "reset" === e || "sort" === e) {
            var i = this, r = arguments;
            n.isObject(r[3]) && (r = n.toArray(r), r[3] = n.clone(r[3])), t.Relational.eventQueue.add(function() {
                a.apply(i, r);
            });
        } else a.apply(this, arguments);
        return this;
    }, t.RelationalModel.extend = function() {
        var e = t.Model.extend.apply(this, arguments);
        return e.setup(this), e;
    };
}), function(e, t) {
    "function" == typeof define && define.amd ? define("backgrid", [ "underscore", "backbone" ], function(n, i) {
        return e.Backgrid = t(n, i);
    }) : "object" == typeof exports ? module.exports = t(require("underscore"), require("backbone")) : e.Backgrid = t(e._, e.Backbone);
}(this, function(e, t) {
    function n(e, t, n) {
        var i = t - (e + "").length;
        i = 0 > i ? 0 : i;
        for (var r = "", o = 0; i > o; o++) r += n;
        return r + e;
    }
    var i = "	\n\f\r   ᠎             　\u2028\u2029﻿";
    if (!String.prototype.trim || i.trim()) {
        i = "[" + i + "]";
        var r = new RegExp("^" + i + i + "*"), o = new RegExp(i + i + "*$");
        String.prototype.trim = function() {
            if (void 0 === this || null === this) throw new TypeError("can't convert " + this + " to object");
            return String(this).replace(r, "").replace(o, "");
        };
    }
    var s = t.$, a = {
        Extension: {},
        resolveNameToClass: function(t, n) {
            if (e.isString(t)) {
                var i = e.map(t.split("-"), function(e) {
                    return e.slice(0, 1).toUpperCase() + e.slice(1);
                }).join("") + n, r = a[i] || a.Extension[i];
                if (e.isUndefined(r)) throw new ReferenceError("Class '" + i + "' not found");
                return r;
            }
            return t;
        },
        callByNeed: function() {
            var t = arguments[0];
            if (!e.isFunction(t)) return t;
            var n = arguments[1], i = [].slice.call(arguments, 2);
            return t.apply(n, i + "" ? i : []);
        }
    };
    e.extend(a, t.Events);
    var l = a.Command = function(t) {
        e.extend(this, {
            altKey: !!t.altKey,
            "char": t["char"],
            charCode: t.charCode,
            ctrlKey: !!t.ctrlKey,
            key: t.key,
            keyCode: t.keyCode,
            locale: t.locale,
            location: t.location,
            metaKey: !!t.metaKey,
            repeat: !!t.repeat,
            shiftKey: !!t.shiftKey,
            which: t.which
        });
    };
    e.extend(l.prototype, {
        moveUp: function() {
            return 38 == this.keyCode;
        },
        moveDown: function() {
            return 40 === this.keyCode;
        },
        moveLeft: function() {
            return this.shiftKey && 9 === this.keyCode;
        },
        moveRight: function() {
            return !this.shiftKey && 9 === this.keyCode;
        },
        save: function() {
            return 13 === this.keyCode;
        },
        cancel: function() {
            return 27 === this.keyCode;
        },
        passThru: function() {
            return !(this.moveUp() || this.moveDown() || this.moveLeft() || this.moveRight() || this.save() || this.cancel());
        }
    });
    var c = a.CellFormatter = function() {};
    e.extend(c.prototype, {
        fromRaw: function(e) {
            return e;
        },
        toRaw: function(e) {
            return e;
        }
    });
    var u = a.NumberFormatter = function(t) {
        if (e.extend(this, this.defaults, t || {}), this.decimals < 0 || this.decimals > 20) throw new RangeError("decimals must be between 0 and 20");
    };
    u.prototype = new c(), e.extend(u.prototype, {
        defaults: {
            decimals: 2,
            decimalSeparator: ".",
            orderSeparator: ","
        },
        HUMANIZED_NUM_RE: /(\d)(?=(?:\d{3})+$)/g,
        fromRaw: function(t) {
            if (e.isNull(t) || e.isUndefined(t)) return "";
            t = t.toFixed(~~this.decimals);
            var n = t.split("."), i = n[0], r = n[1] ? (this.decimalSeparator || ".") + n[1] : "";
            return i.replace(this.HUMANIZED_NUM_RE, "$1" + this.orderSeparator) + r;
        },
        toRaw: function(t) {
            if (t = t.trim(), "" === t) return null;
            for (var n = "", i = t.split(this.orderSeparator), r = 0; r < i.length; r++) n += i[r];
            var o = n.split(this.decimalSeparator);
            n = "";
            for (var r = 0; r < o.length; r++) n = n + o[r] + ".";
            "." === n[n.length - 1] && (n = n.slice(0, n.length - 1));
            var s = 1 * (1 * n).toFixed(~~this.decimals);
            return e.isNumber(s) && !e.isNaN(s) ? s : void 0;
        }
    });
    var d = a.PercentFormatter = function() {
        a.NumberFormatter.apply(this, arguments);
    };
    d.prototype = new a.NumberFormatter(), e.extend(d.prototype, {
        defaults: e.extend({}, u.prototype.defaults, {
            multiplier: 1,
            symbol: "%"
        }),
        fromRaw: function(e) {
            var t = [].slice.call(arguments, 1);
            return t.unshift(e * this.multiplier), (u.prototype.fromRaw.apply(this, t) || "0") + this.symbol;
        },
        toRaw: function(t) {
            var n = t.split(this.symbol);
            if (n && n[0] && "" === n[1] || null == n[1]) {
                var i = u.prototype.toRaw.call(this, n[0]);
                return e.isUndefined(i) ? i : i / this.multiplier;
            }
        }
    });
    var h = a.DatetimeFormatter = function(t) {
        if (e.extend(this, this.defaults, t || {}), !this.includeDate && !this.includeTime) throw new Error("Either includeDate or includeTime must be true");
    };
    h.prototype = new c(), e.extend(h.prototype, {
        defaults: {
            includeDate: !0,
            includeTime: !0,
            includeMilli: !1
        },
        DATE_RE: /^([+\-]?\d{4})-(\d{2})-(\d{2})$/,
        TIME_RE: /^(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?$/,
        ISO_SPLITTER_RE: /T|Z| +/,
        _convert: function(t, i) {
            if ("" === (t + "").trim()) return null;
            var r, o = null;
            if (e.isNumber(t)) {
                var s = new Date(t);
                r = n(s.getUTCFullYear(), 4, 0) + "-" + n(s.getUTCMonth() + 1, 2, 0) + "-" + n(s.getUTCDate(), 2, 0), 
                o = n(s.getUTCHours(), 2, 0) + ":" + n(s.getUTCMinutes(), 2, 0) + ":" + n(s.getUTCSeconds(), 2, 0);
            } else {
                t = t.trim();
                var a = t.split(this.ISO_SPLITTER_RE) || [];
                r = this.DATE_RE.test(a[0]) ? a[0] : "", o = r && a[1] ? a[1] : this.TIME_RE.test(a[0]) ? a[0] : "";
            }
            var l = this.DATE_RE.exec(r) || [], c = this.TIME_RE.exec(o) || [];
            if (i) {
                if (this.includeDate && e.isUndefined(l[0])) return;
                if (this.includeTime && e.isUndefined(c[0])) return;
                if (!this.includeDate && r) return;
                if (!this.includeTime && o) return;
            }
            var s = new Date(Date.UTC(1 * l[1] || 0, 1 * l[2] - 1 || 0, 1 * l[3] || 0, 1 * c[1] || null, 1 * c[2] || null, 1 * c[3] || null, 1 * c[5] || null)), u = "";
            return this.includeDate && (u = n(s.getUTCFullYear(), 4, 0) + "-" + n(s.getUTCMonth() + 1, 2, 0) + "-" + n(s.getUTCDate(), 2, 0)), 
            this.includeTime && (u = u + (this.includeDate ? "T" : "") + n(s.getUTCHours(), 2, 0) + ":" + n(s.getUTCMinutes(), 2, 0) + ":" + n(s.getUTCSeconds(), 2, 0), 
            this.includeMilli && (u = u + "." + n(s.getUTCMilliseconds(), 3, 0))), this.includeDate && this.includeTime && (u += "Z"), 
            u;
        },
        fromRaw: function(t) {
            return e.isNull(t) || e.isUndefined(t) ? "" : this._convert(t);
        },
        toRaw: function(e) {
            return this._convert(e, !0);
        }
    });
    var p = a.StringFormatter = function() {};
    p.prototype = new c(), e.extend(p.prototype, {
        fromRaw: function(t) {
            return e.isUndefined(t) || e.isNull(t) ? "" : t + "";
        }
    });
    var f = a.EmailFormatter = function() {};
    f.prototype = new c(), e.extend(f.prototype, {
        toRaw: function(t) {
            var n = t.trim().split("@");
            return 2 === n.length && e.all(n) ? t : void 0;
        }
    });
    var m = a.SelectFormatter = function() {};
    m.prototype = new c(), e.extend(m.prototype, {
        fromRaw: function(t) {
            return e.isArray(t) ? t : null != t ? [ t ] : [];
        }
    });
    var g = a.CellEditor = t.View.extend({
        initialize: function(e) {
            this.formatter = e.formatter, this.column = e.column, this.column instanceof R || (this.column = new R(this.column)), 
            this.listenTo(this.model, "backgrid:editing", this.postRender);
        },
        postRender: function(e, t) {
            return (null == t || t.get("name") == this.column.get("name")) && this.$el.focus(), 
            this;
        }
    }), v = a.InputCellEditor = g.extend({
        tagName: "input",
        attributes: {
            type: "text"
        },
        events: {
            blur: "saveOrCancel",
            keydown: "saveOrCancel"
        },
        initialize: function(e) {
            v.__super__.initialize.apply(this, arguments), e.placeholder && this.$el.attr("placeholder", e.placeholder);
        },
        render: function() {
            var e = this.model;
            return this.$el.val(this.formatter.fromRaw(e.get(this.column.get("name")), e)), 
            this;
        },
        saveOrCancel: function(t) {
            var n = this.formatter, i = this.model, r = this.column, o = new l(t), s = "blur" === t.type;
            if (o.moveUp() || o.moveDown() || o.moveLeft() || o.moveRight() || o.save() || s) {
                t.preventDefault(), t.stopPropagation();
                var a = this.$el.val(), c = n.toRaw(a, i);
                e.isUndefined(c) ? i.trigger("backgrid:error", i, r, a) : (i.set(r.get("name"), c), 
                i.trigger("backgrid:edited", i, r, o));
            } else o.cancel() && (t.stopPropagation(), i.trigger("backgrid:edited", i, r, o));
        },
        postRender: function(e, t) {
            if (null == t || t.get("name") == this.column.get("name")) if ("right" === this.$el.css("text-align")) {
                var n = this.$el.val();
                this.$el.focus().val(null).val(n);
            } else this.$el.focus();
            return this;
        }
    }), y = a.Cell = t.View.extend({
        tagName: "td",
        formatter: c,
        editor: v,
        events: {
            click: "enterEditMode"
        },
        initialize: function(t) {
            this.column = t.column, this.column instanceof R || (this.column = new R(this.column));
            var n = this.column, i = this.model, r = this.$el, o = a.resolveNameToClass(n.get("formatter") || this.formatter, "Formatter");
            e.isFunction(o.fromRaw) || e.isFunction(o.toRaw) || (o = new o()), this.formatter = o, 
            this.editor = a.resolveNameToClass(this.editor, "CellEditor"), this.listenTo(i, "change:" + n.get("name"), function() {
                r.hasClass("editor") || this.render();
            }), this.listenTo(i, "backgrid:error", this.renderError), this.listenTo(n, "change:editable change:sortable change:renderable", function(e) {
                var t = e.changedAttributes();
                for (var n in t) t.hasOwnProperty(n) && r.toggleClass(n, t[n]);
            }), a.callByNeed(n.editable(), n, i) && r.addClass("editable"), a.callByNeed(n.sortable(), n, i) && r.addClass("sortable"), 
            a.callByNeed(n.renderable(), n, i) && r.addClass("renderable");
        },
        render: function() {
            this.$el.empty();
            var e = this.model;
            return this.$el.text(this.formatter.fromRaw(e.get(this.column.get("name")), e)), 
            this.delegateEvents(), this;
        },
        enterEditMode: function() {
            var e = this.model, t = this.column, n = a.callByNeed(t.editable(), t, e);
            n && (this.currentEditor = new this.editor({
                column: this.column,
                model: this.model,
                formatter: this.formatter
            }), e.trigger("backgrid:edit", e, t, this, this.currentEditor), this.undelegateEvents(), 
            this.$el.empty(), this.$el.append(this.currentEditor.$el), this.currentEditor.render(), 
            this.$el.addClass("editor"), e.trigger("backgrid:editing", e, t, this, this.currentEditor));
        },
        renderError: function(e, t) {
            (null == t || t.get("name") == this.column.get("name")) && this.$el.addClass("error");
        },
        exitEditMode: function() {
            this.$el.removeClass("error"), this.currentEditor.remove(), this.stopListening(this.currentEditor), 
            delete this.currentEditor, this.$el.removeClass("editor"), this.render();
        },
        remove: function() {
            return this.currentEditor && (this.currentEditor.remove.apply(this.currentEditor, arguments), 
            delete this.currentEditor), y.__super__.remove.apply(this, arguments);
        }
    }), b = a.StringCell = y.extend({
        className: "string-cell",
        formatter: p
    }), w = a.UriCell = y.extend({
        className: "uri-cell",
        title: null,
        target: "_blank",
        initialize: function(e) {
            w.__super__.initialize.apply(this, arguments), this.title = e.title || this.title, 
            this.target = e.target || this.target;
        },
        render: function() {
            this.$el.empty();
            var e = this.model.get(this.column.get("name")), t = this.formatter.fromRaw(e, this.model);
            return this.$el.append(s("<a>", {
                tabIndex: -1,
                href: e,
                title: this.title || t,
                target: this.target
            }).text(t)), this.delegateEvents(), this;
        }
    }), x = (a.EmailCell = b.extend({
        className: "email-cell",
        formatter: f,
        render: function() {
            this.$el.empty();
            var e = this.model, t = this.formatter.fromRaw(e.get(this.column.get("name")), e);
            return this.$el.append(s("<a>", {
                tabIndex: -1,
                href: "mailto:" + t,
                title: t
            }).text(t)), this.delegateEvents(), this;
        }
    }), a.NumberCell = y.extend({
        className: "number-cell",
        decimals: u.prototype.defaults.decimals,
        decimalSeparator: u.prototype.defaults.decimalSeparator,
        orderSeparator: u.prototype.defaults.orderSeparator,
        formatter: u,
        initialize: function() {
            x.__super__.initialize.apply(this, arguments);
            var e = this.formatter;
            e.decimals = this.decimals, e.decimalSeparator = this.decimalSeparator, e.orderSeparator = this.orderSeparator;
        }
    })), C = (a.IntegerCell = x.extend({
        className: "integer-cell",
        decimals: 0
    }), a.PercentCell = x.extend({
        className: "percent-cell",
        multiplier: d.prototype.defaults.multiplier,
        symbol: d.prototype.defaults.symbol,
        formatter: d,
        initialize: function() {
            C.__super__.initialize.apply(this, arguments);
            var e = this.formatter;
            e.multiplier = this.multiplier, e.symbol = this.symbol;
        }
    })), k = a.DatetimeCell = y.extend({
        className: "datetime-cell",
        includeDate: h.prototype.defaults.includeDate,
        includeTime: h.prototype.defaults.includeTime,
        includeMilli: h.prototype.defaults.includeMilli,
        formatter: h,
        initialize: function() {
            k.__super__.initialize.apply(this, arguments);
            var t = this.formatter;
            t.includeDate = this.includeDate, t.includeTime = this.includeTime, t.includeMilli = this.includeMilli;
            var n = this.includeDate ? "YYYY-MM-DD" : "";
            n += this.includeDate && this.includeTime ? "T" : "", n += this.includeTime ? "HH:mm:ss" : "", 
            n += this.includeTime && this.includeMilli ? ".SSS" : "", this.editor = this.editor.extend({
                attributes: e.extend({}, this.editor.prototype.attributes, this.editor.attributes, {
                    placeholder: n
                })
            });
        }
    }), T = (a.DateCell = k.extend({
        className: "date-cell",
        includeTime: !1
    }), a.TimeCell = k.extend({
        className: "time-cell",
        includeDate: !1
    }), a.BooleanCellEditor = g.extend({
        tagName: "input",
        attributes: {
            tabIndex: -1,
            type: "checkbox"
        },
        events: {
            mousedown: function() {
                this.mouseDown = !0;
            },
            blur: "enterOrExitEditMode",
            mouseup: function() {
                this.mouseDown = !1;
            },
            change: "saveOrCancel",
            keydown: "saveOrCancel"
        },
        render: function() {
            var e = this.model, t = this.formatter.fromRaw(e.get(this.column.get("name")), e);
            return this.$el.prop("checked", t), this;
        },
        enterOrExitEditMode: function(e) {
            if (!this.mouseDown) {
                var t = this.model;
                t.trigger("backgrid:edited", t, this.column, new l(e));
            }
        },
        saveOrCancel: function(e) {
            var t = this.model, n = this.column, i = this.formatter, r = new l(e);
            if (r.passThru() && "change" != e.type) return !0;
            r.cancel() && (e.stopPropagation(), t.trigger("backgrid:edited", t, n, r));
            var o = this.$el;
            if (r.save() || r.moveLeft() || r.moveRight() || r.moveUp() || r.moveDown()) {
                e.preventDefault(), e.stopPropagation();
                var s = i.toRaw(o.prop("checked"), t);
                t.set(n.get("name"), s), t.trigger("backgrid:edited", t, n, r);
            } else if ("change" == e.type) {
                var s = i.toRaw(o.prop("checked"), t);
                t.set(n.get("name"), s), o.focus();
            }
        }
    })), _ = (a.BooleanCell = y.extend({
        className: "boolean-cell",
        editor: T,
        events: {
            click: "enterEditMode"
        },
        render: function() {
            this.$el.empty();
            var e = this.model, t = this.column, n = a.callByNeed(t.editable(), t, e);
            return this.$el.append(s("<input>", {
                tabIndex: -1,
                type: "checkbox",
                checked: this.formatter.fromRaw(e.get(t.get("name")), e),
                disabled: !n
            })), this.delegateEvents(), this;
        }
    }), a.SelectCellEditor = g.extend({
        tagName: "select",
        events: {
            change: "save",
            blur: "close",
            keydown: "close"
        },
        template: e.template('<option value="<%- value %>" <%= selected ? \'selected="selected"\' : "" %>><%- text %></option>', null, {
            variable: null
        }),
        setOptionValues: function(t) {
            this.optionValues = t, this.optionValues = e.result(this, "optionValues");
        },
        setMultiple: function(e) {
            this.multiple = e, this.$el.prop("multiple", e);
        },
        _renderOptions: function(t, n) {
            for (var i = "", r = 0; r < t.length; r++) i += this.template({
                text: t[r][0],
                value: t[r][1],
                selected: e.indexOf(n, t[r][1]) > -1
            });
            return i;
        },
        render: function() {
            this.$el.empty();
            var t = e.result(this, "optionValues"), n = this.model, i = this.formatter.fromRaw(n.get(this.column.get("name")), n);
            if (!e.isArray(t)) throw new TypeError("optionValues must be an array");
            for (var r = null, o = null, r = null, a = null, l = null, c = 0; c < t.length; c++) {
                var r = t[c];
                if (e.isArray(r)) o = r[0], r = r[1], this.$el.append(this.template({
                    text: o,
                    value: r,
                    selected: e.indexOf(i, r) > -1
                })); else {
                    if (!e.isObject(r)) throw new TypeError("optionValues elements must be a name-value pair or an object hash of { name: 'optgroup label', value: [option name-value pairs] }");
                    a = r.name, l = s("<optgroup></optgroup>", {
                        label: a
                    }), l.append(this._renderOptions.call(this, r.values, i)), this.$el.append(l);
                }
            }
            return this.delegateEvents(), this;
        },
        save: function() {
            var e = this.model, t = this.column;
            e.set(t.get("name"), this.formatter.toRaw(this.$el.val(), e));
        },
        close: function(e) {
            var t = this.model, n = this.column, i = new l(e);
            i.cancel() ? (e.stopPropagation(), t.trigger("backgrid:edited", t, n, new l(e))) : (i.save() || i.moveLeft() || i.moveRight() || i.moveUp() || i.moveDown() || "blur" == e.type) && (e.preventDefault(), 
            e.stopPropagation(), this.save(e), t.trigger("backgrid:edited", t, n, new l(e)));
        }
    })), E = a.SelectCell = y.extend({
        className: "select-cell",
        editor: _,
        multiple: !1,
        formatter: m,
        optionValues: void 0,
        delimiter: ", ",
        initialize: function() {
            E.__super__.initialize.apply(this, arguments), this.listenTo(this.model, "backgrid:edit", function(e, t, n, i) {
                t.get("name") == this.column.get("name") && (i.setOptionValues(this.optionValues), 
                i.setMultiple(this.multiple));
            });
        },
        render: function() {
            this.$el.empty();
            var t = e.result(this, "optionValues"), n = this.model, i = this.formatter.fromRaw(n.get(this.column.get("name")), n), r = [];
            try {
                if (!e.isArray(t) || e.isEmpty(t)) throw new TypeError();
                for (var o = 0; o < i.length; o++) for (var s = i[o], a = 0; a < t.length; a++) {
                    var l = t[a];
                    if (e.isArray(l)) {
                        var c = l[0], l = l[1];
                        l == s && r.push(c);
                    } else {
                        if (!e.isObject(l)) throw new TypeError();
                        for (var u = l.values, d = 0; d < u.length; d++) {
                            var h = u[d];
                            h[1] == s && r.push(h[0]);
                        }
                    }
                }
                this.$el.append(r.join(this.delimiter));
            } catch (p) {
                if (p instanceof TypeError) throw new TypeError("'optionValues' must be of type {Array.<Array>|Array.<{name: string, values: Array.<Array>}>}");
                throw p;
            }
            return this.delegateEvents(), this;
        }
    }), R = a.Column = t.Model.extend({
        defaults: {
            name: void 0,
            label: void 0,
            sortable: !0,
            editable: !0,
            renderable: !0,
            formatter: void 0,
            sortType: "cycle",
            sortValue: void 0,
            direction: null,
            cell: void 0,
            headerCell: void 0
        },
        initialize: function() {
            this.has("label") || this.set({
                label: this.get("name")
            }, {
                silent: !0
            });
            var e = a.resolveNameToClass(this.get("headerCell"), "HeaderCell"), t = a.resolveNameToClass(this.get("cell"), "Cell");
            this.set({
                cell: t,
                headerCell: e
            }, {
                silent: !0
            });
        },
        sortValue: function() {
            var t = this.get("sortValue");
            return e.isString(t) ? this[t] : e.isFunction(t) ? t : function(e, t) {
                return e.get(t);
            };
        }
    });
    e.each([ "sortable", "renderable", "editable" ], function(t) {
        R.prototype[t] = function() {
            var n = this.get(t);
            return e.isString(n) ? this[n] : e.isFunction(n) ? n : !!n;
        };
    });
    {
        var S = a.Columns = t.Collection.extend({
            model: R
        }), N = a.Row = t.View.extend({
            tagName: "tr",
            initialize: function(e) {
                var n = this.columns = e.columns;
                n instanceof t.Collection || (n = this.columns = new S(n));
                for (var i = this.cells = [], r = 0; r < n.length; r++) i.push(this.makeCell(n.at(r), e));
                this.listenTo(n, "add", function(t, n) {
                    var r = n.indexOf(t), o = this.makeCell(t, e);
                    i.splice(r, 0, o);
                    var s = this.$el;
                    0 === r ? s.prepend(o.render().$el) : r === n.length - 1 ? s.append(o.render().$el) : s.children().eq(r).before(o.render().$el);
                }), this.listenTo(n, "remove", function(e, t, n) {
                    i[n.index].remove(), i.splice(n.index, 1);
                });
            },
            makeCell: function(e) {
                return new (e.get("cell"))({
                    column: e,
                    model: this.model
                });
            },
            render: function() {
                this.$el.empty();
                for (var e = document.createDocumentFragment(), t = 0; t < this.cells.length; t++) e.appendChild(this.cells[t].render().el);
                return this.el.appendChild(e), this.delegateEvents(), this;
            },
            remove: function() {
                for (var e = 0; e < this.cells.length; e++) {
                    var n = this.cells[e];
                    n.remove.apply(n, arguments);
                }
                return t.View.prototype.remove.apply(this, arguments);
            }
        }), M = a.EmptyRow = t.View.extend({
            tagName: "tr",
            emptyText: null,
            initialize: function(e) {
                this.emptyText = e.emptyText, this.columns = e.columns;
            },
            render: function() {
                this.$el.empty();
                var t = document.createElement("td");
                return t.setAttribute("colspan", this.columns.length), t.appendChild(document.createTextNode(e.result(this, "emptyText"))), 
                this.el.className = "empty", this.el.appendChild(t), this;
            }
        }), P = a.HeaderCell = t.View.extend({
            tagName: "th",
            events: {
                "click a": "onClick"
            },
            initialize: function(e) {
                this.column = e.column, this.column instanceof R || (this.column = new R(this.column));
                var t = this.column, n = this.collection, i = this.$el;
                this.listenTo(t, "change:editable change:sortable change:renderable", function(e) {
                    var t = e.changedAttributes();
                    for (var n in t) t.hasOwnProperty(n) && i.toggleClass(n, t[n]);
                }), this.listenTo(t, "change:direction", this.setCellDirection), this.listenTo(t, "change:name change:label", this.render), 
                a.callByNeed(t.editable(), t, n) && i.addClass("editable"), a.callByNeed(t.sortable(), t, n) && i.addClass("sortable"), 
                a.callByNeed(t.renderable(), t, n) && i.addClass("renderable"), this.listenTo(n.fullCollection || n, "sort", this.removeCellDirection);
            },
            removeCellDirection: function() {
                this.$el.removeClass("ascending").removeClass("descending"), this.column.set("direction", null);
            },
            setCellDirection: function(e, t) {
                this.$el.removeClass("ascending").removeClass("descending"), e.cid == this.column.cid && this.$el.addClass(t);
            },
            onClick: function(e) {
                function t(e, t) {
                    "ascending" === i.get("direction") ? r.trigger(o, t, "descending") : "descending" === i.get("direction") ? r.trigger(o, t, null) : r.trigger(o, t, "ascending");
                }
                function n(e, t) {
                    "ascending" === i.get("direction") ? r.trigger(o, t, "descending") : r.trigger(o, t, "ascending");
                }
                e.preventDefault();
                var i = this.column, r = this.collection, o = "backgrid:sort", s = a.callByNeed(i.sortable(), i, this.collection);
                if (s) {
                    var l = i.get("sortType");
                    "toggle" === l ? n(this, i) : t(this, i);
                }
            },
            render: function() {
                this.$el.empty();
                var e, t = this.column, n = a.callByNeed(t.sortable(), t, this.collection);
                return e = n ? s("<a>").text(t.get("label")).append("<b class='sort-caret'></b>") : document.createTextNode(t.get("label")), 
                this.$el.append(e), this.$el.addClass(t.get("name")), this.$el.addClass(t.get("direction")), 
                this.delegateEvents(), this;
            }
        }), A = (a.HeaderRow = a.Row.extend({
            initialize: function() {
                a.Row.prototype.initialize.apply(this, arguments);
            },
            makeCell: function(e, t) {
                var n = e.get("headerCell") || t.headerCell || P;
                return n = new n({
                    column: e,
                    collection: this.collection
                });
            }
        }), a.Header = t.View.extend({
            tagName: "thead",
            initialize: function(e) {
                this.columns = e.columns, this.columns instanceof t.Collection || (this.columns = new S(this.columns)), 
                this.row = new a.HeaderRow({
                    columns: this.columns,
                    collection: this.collection
                });
            },
            render: function() {
                return this.$el.append(this.row.render().$el), this.delegateEvents(), this;
            },
            remove: function() {
                return this.row.remove.apply(this.row, arguments), t.View.prototype.remove.apply(this, arguments);
            }
        })), D = a.Body = t.View.extend({
            tagName: "tbody",
            initialize: function(e) {
                this.columns = e.columns, this.columns instanceof t.Collection || (this.columns = new S(this.columns)), 
                this.row = e.row || N, this.rows = this.collection.map(function(e) {
                    var t = new this.row({
                        columns: this.columns,
                        model: e
                    });
                    return t;
                }, this), this.emptyText = e.emptyText, this._unshiftEmptyRowMayBe();
                var n = this.collection;
                this.listenTo(n, "add", this.insertRow), this.listenTo(n, "remove", this.removeRow), 
                this.listenTo(n, "sort", this.refresh), this.listenTo(n, "reset", this.refresh), 
                this.listenTo(n, "backgrid:sort", this.sort), this.listenTo(n, "backgrid:edited", this.moveToNextCell);
            },
            _unshiftEmptyRowMayBe: function() {
                0 === this.rows.length && null != this.emptyText && this.rows.unshift(new M({
                    emptyText: this.emptyText,
                    columns: this.columns
                }));
            },
            insertRow: function(e, n, i) {
                if (this.rows[0] instanceof M && this.rows.pop().remove(), !(n instanceof t.Collection || i)) return void this.collection.add(e, i = n);
                var r = new this.row({
                    columns: this.columns,
                    model: e
                }), o = n.indexOf(e);
                this.rows.splice(o, 0, r);
                var s = this.$el, a = s.children(), l = r.render().$el;
                return o >= a.length ? s.append(l) : a.eq(o).before(l), this;
            },
            removeRow: function(t, n, i) {
                return i ? ((e.isUndefined(i.render) || i.render) && this.rows[i.index].remove(), 
                this.rows.splice(i.index, 1), this._unshiftEmptyRowMayBe(), this) : (this.collection.remove(t, i = n), 
                void this._unshiftEmptyRowMayBe());
            },
            refresh: function() {
                for (var e = 0; e < this.rows.length; e++) this.rows[e].remove();
                return this.rows = this.collection.map(function(e) {
                    var t = new this.row({
                        columns: this.columns,
                        model: e
                    });
                    return t;
                }, this), this._unshiftEmptyRowMayBe(), this.render(), this.collection.trigger("backgrid:refresh", this), 
                this;
            },
            render: function() {
                this.$el.empty();
                for (var e = document.createDocumentFragment(), t = 0; t < this.rows.length; t++) {
                    var n = this.rows[t];
                    e.appendChild(n.render().el);
                }
                return this.el.appendChild(e), this.delegateEvents(), this;
            },
            remove: function() {
                for (var e = 0; e < this.rows.length; e++) {
                    var n = this.rows[e];
                    n.remove.apply(n, arguments);
                }
                return t.View.prototype.remove.apply(this, arguments);
            },
            sort: function(n, i) {
                if (!e.contains([ "ascending", "descending", null ], i)) throw new RangeError('direction must be one of "ascending", "descending" or `null`');
                e.isString(n) && (n = this.columns.findWhere({
                    name: n
                }));
                var r, o = this.collection;
                r = "ascending" === i ? -1 : "descending" === i ? 1 : null;
                var s = this.makeComparator(n.get("name"), r, r ? n.sortValue() : function(e) {
                    return 1 * e.cid.replace("c", "");
                });
                return t.PageableCollection && o instanceof t.PageableCollection ? (o.setSorting(r && n.get("name"), r, {
                    sortValue: n.sortValue()
                }), o.fullCollection ? (null == o.fullCollection.comparator && (o.fullCollection.comparator = s), 
                o.fullCollection.sort(), o.trigger("backgrid:sorted", n, i, o)) : o.fetch({
                    reset: !0,
                    success: function() {
                        o.trigger("backgrid:sorted", n, i, o);
                    }
                })) : (o.comparator = s, o.sort(), o.trigger("backgrid:sorted", n, i, o)), n.set("direction", i), 
                this;
            },
            makeComparator: function(e, t, n) {
                return function(i, r) {
                    var o, s = n(i, e), a = n(r, e);
                    return 1 === t && (o = s, s = a, a = o), s === a ? 0 : a > s ? -1 : 1;
                };
            },
            moveToNextCell: function(e, t, n) {
                var i, r, o, s, l, c = this.collection.indexOf(e), u = this.columns.indexOf(t);
                if (this.rows[c].cells[u].exitEditMode(), n.moveUp() || n.moveDown() || n.moveLeft() || n.moveRight() || n.save()) {
                    var d = this.columns.length, h = d * this.collection.length;
                    if (n.moveUp() || n.moveDown()) {
                        s = c + (n.moveUp() ? -1 : 1);
                        var p = this.rows[s];
                        p ? (i = p.cells[u], a.callByNeed(i.column.editable(), i.column, e) && (i.enterEditMode(), 
                        e.trigger("backgrid:next", s, u, !1))) : e.trigger("backgrid:next", s, u, !0);
                    } else if (n.moveLeft() || n.moveRight()) {
                        for (var f = n.moveRight(), m = c * d + u + (f ? 1 : -1); m >= 0 && h > m; f ? m++ : m--) if (s = ~~(m / d), 
                        l = m - s * d, i = this.rows[s].cells[l], r = a.callByNeed(i.column.renderable(), i.column, i.model), 
                        o = a.callByNeed(i.column.editable(), i.column, e), r && o) {
                            i.enterEditMode(), e.trigger("backgrid:next", s, l, !1);
                            break;
                        }
                        m == h && e.trigger("backgrid:next", ~~(m / d), m - s * d, !0);
                    }
                }
                return this;
            }
        });
        a.Footer = t.View.extend({
            tagName: "tfoot",
            initialize: function(e) {
                this.columns = e.columns, this.columns instanceof t.Collection || (this.columns = new a.Columns(this.columns));
            }
        }), a.Grid = t.View.extend({
            tagName: "table",
            className: "backgrid",
            header: A,
            body: D,
            footer: null,
            initialize: function(n) {
                n.columns instanceof t.Collection || (n.columns = new S(n.columns || this.columns)), 
                this.columns = n.columns;
                var i = e.omit(n, [ "el", "id", "attributes", "className", "tagName", "events" ]);
                this.body = n.body || this.body, this.body = new this.body(i), this.header = n.header || this.header, 
                this.header && (this.header = new this.header(i)), this.footer = n.footer || this.footer, 
                this.footer && (this.footer = new this.footer(i)), this.listenTo(this.columns, "reset", function() {
                    this.header && (this.header = new (this.header.remove().constructor)(i)), this.body = new (this.body.remove().constructor)(i), 
                    this.footer && (this.footer = new (this.footer.remove().constructor)(i)), this.render();
                });
            },
            insertRow: function() {
                return this.body.insertRow.apply(this.body, arguments), this;
            },
            removeRow: function() {
                return this.body.removeRow.apply(this.body, arguments), this;
            },
            insertColumn: function() {
                return this.columns.add.apply(this.columns, arguments), this;
            },
            removeColumn: function() {
                return this.columns.remove.apply(this.columns, arguments), this;
            },
            sort: function() {
                return this.body.sort.apply(this.body, arguments), this;
            },
            render: function() {
                return this.$el.empty(), this.header && this.$el.append(this.header.render().$el), 
                this.footer && this.$el.append(this.footer.render().$el), this.$el.append(this.body.render().$el), 
                this.delegateEvents(), this.trigger("backgrid:rendered", this), this;
            },
            remove: function() {
                return this.header && this.header.remove.apply(this.header, arguments), this.body.remove.apply(this.body, arguments), 
                this.footer && this.footer.remove.apply(this.footer, arguments), t.View.prototype.remove.apply(this, arguments);
            }
        });
    }
    return a;
}), function(e, t) {
    "object" == typeof exports && (module.exports = t(require("underscore"), require("backbone"), require("backgrid"), require("backbone.paginator"))), 
    "function" == typeof define && define.amd ? define("backgrid-paginator", [ "underscore", "backbone", "backgrid", "backbone.paginator" ], t) : t(e._, e.Backbone, e.Backgrid);
}(this, function(e, t, n) {
    var i = n.Extension.PageHandle = t.View.extend({
        tagName: "li",
        events: {
            "click a": "changePage"
        },
        title: function(e) {
            return "Page " + e.label;
        },
        isRewind: !1,
        isBack: !1,
        isForward: !1,
        isFastForward: !1,
        initialize: function(t) {
            var n = this.collection, i = n.state, r = i.currentPage, o = i.firstPage, s = i.lastPage;
            e.extend(this, e.pick(t, [ "isRewind", "isBack", "isForward", "isFastForward" ]));
            var a;
            this.isRewind ? a = o : this.isBack ? a = Math.max(o, r - 1) : this.isForward ? a = Math.min(s, r + 1) : this.isFastForward ? a = s : (a = +t.pageIndex, 
            a = o ? a + 1 : a), this.pageIndex = a, this.label = (t.label || (o ? a : a + 1)) + "";
            var l = t.title || this.title;
            this.title = e.isFunction(l) ? l({
                label: this.label
            }) : l;
        },
        render: function() {
            this.$el.empty();
            var e = document.createElement("a");
            e.href = "#", this.title && (e.title = this.title), e.innerHTML = this.label, this.el.appendChild(e);
            var t = this.collection, n = t.state, i = n.currentPage, r = this.pageIndex;
            return this.isRewind && i == n.firstPage || this.isBack && !t.hasPreviousPage() || this.isForward && !t.hasNextPage() || this.isFastForward && (i == n.lastPage || n.totalPages < 1) ? this.$el.addClass("disabled") : this.isRewind || this.isBack || this.isForward || this.isFastForward || n.currentPage != r || this.$el.addClass("active"), 
            this.delegateEvents(), this;
        },
        changePage: function(e) {
            e.preventDefault();
            var t = this.$el, n = this.collection;
            return t.hasClass("active") || t.hasClass("disabled") || (this.isRewind ? n.getFirstPage() : this.isBack ? n.getPreviousPage() : this.isForward ? n.getNextPage() : this.isFastForward ? n.getLastPage() : n.getPage(this.pageIndex, {
                reset: !0
            })), this;
        }
    }), r = n.Extension.Paginator = t.View.extend({
        className: "backgrid-paginator",
        windowSize: 10,
        slideScale: .5,
        controls: {
            rewind: {
                label: "《",
                title: "First"
            },
            back: {
                label: "〈",
                title: "Previous"
            },
            forward: {
                label: "〉",
                title: "Next"
            },
            fastForward: {
                label: "》",
                title: "Last"
            }
        },
        renderIndexedPageHandles: !0,
        pageHandle: i,
        goBackFirstOnSort: !0,
        initialize: function(t) {
            var n = this;
            n.controls = e.defaults(t.controls || {}, n.controls, r.prototype.controls), e.extend(n, e.pick(t || {}, "windowSize", "pageHandle", "slideScale", "goBackFirstOnSort", "renderIndexedPageHandles"));
            var i = n.collection;
            n.listenTo(i, "add", n.render), n.listenTo(i, "remove", n.render), n.listenTo(i, "reset", n.render), 
            n.listenTo(i, "backgrid:sorted", function() {
                n.goBackFirstOnSort && i.getFirstPage({
                    reset: !0
                });
            });
        },
        slideMaybe: function(e, t, n, i) {
            return Math.round(n % i / i);
        },
        slideThisMuch: function(e, t, n, i, r) {
            return ~~(i * r);
        },
        _calculateWindow: function() {
            var e = this.collection, t = e.state, n = t.firstPage, i = +t.lastPage;
            i = Math.max(0, n ? i - 1 : i);
            var r = Math.max(t.currentPage, t.firstPage);
            r = n ? r - 1 : r;
            var o = this.windowSize, s = this.slideScale, a = Math.floor(r / o) * o;
            r <= i - this.slideThisMuch() && (a += this.slideMaybe(n, i, r, o, s) * this.slideThisMuch(n, i, r, o, s));
            var l = Math.min(i + 1, a + o);
            return [ a, l ];
        },
        makeHandles: function() {
            var t = [], n = this.collection, i = this._calculateWindow(), r = i[0], o = i[1];
            if (this.renderIndexedPageHandles) for (var s = r; o > s; s++) t.push(new this.pageHandle({
                collection: n,
                pageIndex: s
            }));
            var a = this.controls;
            return e.each([ "back", "rewind", "forward", "fastForward" ], function(e) {
                var i = a[e];
                if (i) {
                    var r = {
                        collection: n,
                        title: i.title,
                        label: i.label
                    };
                    r["is" + e.slice(0, 1).toUpperCase() + e.slice(1)] = !0;
                    var o = new this.pageHandle(r);
                    "rewind" == e || "back" == e ? t.unshift(o) : t.push(o);
                }
            }, this), t;
        },
        render: function() {
            if (this.$el.empty(), this.handles) for (var e = 0, t = this.handles.length; t > e; e++) this.handles[e].remove();
            for (var n = this.handles = this.makeHandles(), i = document.createElement("ul"), e = 0; e < n.length; e++) i.appendChild(n[e].render().el);
            return this.el.appendChild(i), this;
        }
    });
}), define("text", {
    load: function(e) {
        throw new Error("Dynamic load not allowed: " + e);
    }
}), define("text!../templates/search.html.tpl", [], function() {
    return '  <h1><i class="fa fa-search"></i>People Search</h1>\n<form id="search-form" class="form-horizontal" role="form">\n  <div class="form-group">\n    <label  class="col-sm-2 control-label col-xs-3" for="surname">Surname(s)</label>\n    <div class="col-sm-3 col-xs-9">\n    <input type="text" class="form-control " id="surname" name="surname"  placeholder="accepts multiple names"></div>\n    <label class="col-sm-2 col-xs-3 control-label" for="fornames">Forename(s)</label>\n    <div class="col-sm-3 col-xs-9">\n    <input type="text" class="form-control" id="forenames" name="forenames"  placeholder="accepts multiple names"></div>\n\n  </div>  \n\n\n  <div class="form-group" >    <label class="col-sm-2 col-xs-3 control-label" for="sex" >Gender</label>\n    <div class="btn-group col-sm-10" data-toggle="buttons">\n\n    <label class="btn btn-default" >\n      <input type="checkbox" name="sex" value="m"/>M\n    </label>\n    <label class="  btn btn-default">\n      <input type="checkbox" name="sex" value="f"/>F\n    </label></div>\n  </div>\n    <div class="form-group">\n  <label class="col-sm-2 control-label col-xs-3" for="occupation">Occupation</label>\n  <div class="col-sm-3 col-xs-9"><select class="form-control" name="occupation-category" id="occupation-category"><option value="">-- select occupation type --</option></select></div>\n  </div>\n    <hr/>\n\n    <div class="form-group">\n      <label class="col-sm-2 control-label" for="birth-death">Dates</label>\n      <div class="col-sm-10" id="search-dates">\n        <div class="inline-block">\n          <div class="">\n           <div class="btn-group btn-group" data-toggle="buttons">\n            <label class="btn btn-default" id="birth-include">\n              <input type="radio" name="birth-death" value="birth"/>Birth\n            </label>\n            <label class="  btn btn-default" id="death-include">\n              <input type="radio" name="birth-death" value="death"/>Death\n            </label>\n          </div>\n        </div>\n      </div>\n\n        <div class="inline-block">\n          <div class="btn-group" data-toggle="buttons">\n            <label class="btn btn-default disabled" id="exactly">\n              <input type="radio" name="date-type" value="exactly"/>Precice\n            </label>\n            <label class="  btn btn-default disabled" id="before">\n              <input type="radio" name="date-type" value="before"/>Before\n            </label>\n            <label class="  btn btn-default disabled" id="after">\n              <input type="radio" name="date-type" value="after"/>After\n            </label>\n            <label class="  btn btn-default disabled" id="between">\n              <input type="radio" name="date-type" value="between"/>Between\n            </label>\n          </div>\n        \n        </div>\n      </div>\n    </div>\n    <div class="form-group">\n      <div class="col-sm-10 col-sm-offset-2">\n        <div class="inline-block">\n          <label class="sr-only control-label">Start Date</label>\n          <input type="text" class="form-control" id="birth-start" name="birth-start"  placeholder="YYYY" style="display:none" size="5" >\n        </div>\n        <div class="inline-block">\n          <label class="control-label" for="birth-end" id="birth-and" style="display:none">and</label>\n        </div>\n        <div class="inline-block">\n          <input type="text" class="form-control" id="birth-end" name="birth-end" placeholder="YYYY" style="display:none" size="5">\n        </div>\n        <div class="inline-block">\n          <label class="sr-only control-label">Start Date</label>\n          <input type="text" class="form-control" id="death-start" name="death-start"  placeholder="YYYY" style="display:none" size="5" >\n        </div>\n        <div class="inline-block">\n          <label class="control-label" for="birth-end" id="death-and" style="display:none">and</label>\n          <input type="text" class="form-control" id="death-end" name="death-end" placeholder="YYYY" style="display:none" size="5">\n        </div>\n      </div>\n    </div>\n\n    <div class="form-group">\n      <label class="col-sm-2 control-label col-xs-3" for="birthCountry">Country</label>\n      <div class="btn-group col-sm-6 col-xs-9" >\n        <select placeholder="select a birth country" class="form-control" name="birthCountry" id="birthCountry">\n                    <option value=""> -- select a country -- </option>\n        </select>\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-sm-2 control-label col-xs-3" for="birthPlace" >Place</label>\n      <div class="btn-group col-sm-6 col-xs-9" >\n        <select class="form-control" name="birthPlace" disabled="true">\n        </select>\n      </div>\n    </div>\n    </div>\n    </div>\n    </div>\n    </div>\n\n\n    </div></div>\n      <div class="form-group form-options">\n    <div class="col-sm-offset-2 col-sm-10">\n  <button type="submit" class="btn btn-primary"><i class="fa fa-search"></i>  Search</button>\n  <button type="reset" class="btn btn-danger" data-dismiss="modal" value="reset">Clear</button>\n\n  </div>\n</form>';
}), define("text!../templates/view.html.tpl", [], function() {
    return '  <div class="row">\n    <div class="col-sm-12">\n      <h3><i class="icon-user"></i> Individual</h3>\n      <div class="lifted card drop-shadow" id="person-details">\n        <i class="icon-spin"></i>\n      </div>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-sm-12">\n      <h3 class="muted"><i class="icon-list-alt"></i> Records</h3>\n      <div class="lifted card drop-shadow"  id="bibliographical-details">\n        <div class="loading">            <i class="icon-spin"></i>\n        <p class="muted">Here youll be able to see biographical records, occupations etc, in chronological order.\n      </p>\n    </div>\n        <div class="row">\n          <div class="col-sm-1"><strong>Date</strong></div>\n          <div class="col-sm-2"><strong>Source</strong></div>\n          <div class="col-sm-3"><strong>Record</strong></div>\n          <div class="col-sm-6"><strong>Contents</strong></div>\n   \n        </div>\n        \n      </div>\n      </div>\n    </div>\n    <div class="row">\n    <div class="col-sm-12">\n    <h3 class="muted"><i class="icon-resize-horizontal"></i> Relations</h3>\n    <div class="lifted card drop-shadow" id="relationships">\n    <p class="muted">Here youll be able to see the relations for this individual</p>\n          <i class="icon-spin"></i>\n    </div>\n  </div>';
}), define("text!../templates/view_details.html.tpl", [], function() {
    return "    <div class=\"row\">\n      <div class=\"col-sm-6\">\n        <p>Name: <%- person.get('forenames') %> <%- person.get('surname') %></p>\n        <p>Gender: <%- person.get('gender') %></p>\n      </div>\n            <div class=\"col-sm-6\">\n        <p>Birth Year: <%- person.get('birthdate') %></p>\n        <p>Birth Place: <%- person.get('birthplace') %> <%- person.get('birthcountry') %></p>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-sm-6\">\n        <% if (person.get('notes')) { %>\n        <h4>Notes</h4>\n        <p> \n          <%- person.get('notes') %></p>\n        <% }; %>\n      </div>\n\n      <div class=\"col-sm-6\">\n        <p>Death Year: <%- person.get('deathdate') %></p>\n        <p>Death Place: <%- person.get('deathplace') %> <%- person.get('deathcountry') %></p>\n      </div>\n    </div>\n";
}), define("text!../templates/view_relationships.html.tpl", [], function() {
    return '  <div class="">\n      <div class="row">\n        <div class="col-sm-1"><strong>Date</strong></div>\n        <div class="col-sm-3"><strong>Surname</strong></div>\n        <div class="col-sm-3"><strong>Forenames</strong></div>\n        <div class="col-sm-3"><strong>Relationship</strong></div>\n        <div class="col-sm-2"></div>\n      </div>\n    <% _.each(relationships, function(relationship) { %>\n      <div class="row">\n        <div class="col-sm-1"><%- relationship.get(\'infodate\') %></div>\n        <div class="col-sm-3"><%- relationship.get(\'surname\') %></div>\n        <div class="col-sm-3"><%- relationship.get(\'forenames\') %></div>\n        <div class="col-sm-3"><%- relationship.get(\'relationship\') %></div>\n        <div class="col-sm-2"><a class="btn btn-primary btn-xs" href="#view/<%- relationship.get(\'id\') %>">View Record</a></div>\n      </div>\n    <% }); %>\n    </div>';
}), define("text!../templates/view_occupation.html.tpl", [], function() {
    return '  <div class="">\n    <% _.each(occupations, function(occupation) { %>\n      <div class="row">\n        <div class="col-sm-1"><%- occupation.get(\'recorddate\') %></div>\n        <div class="col-sm-2"><%- occupation.get(\'recordtype\') %></div>\n        <div class="col-sm-3">Occupation</div>\n        <div class="col-sm-6"><%- occupation.get(\'detail\') %>, category: <a href="#search/results?occupation-category=<%- occupation.get(\'category\') %>"><%- occupation.get(\'category\') %></a></div>\n      </div>\n    <% }); %>\n  </div>';
}), define("text!../templates/view_address.html.tpl", [], function() {
    return '  <div class="">\n    <% _.each(addresses, function(address) { %>\n      <div class="row">\n        <div class="col-sm-1"><%- address.get(\'recorddate\') %></div>\n        <div class="col-sm-2"><%- address.get(\'recordtype\') %></div>\n        <div class="col-sm-3">Address</div>\n        <div class="col-sm-6"><%- address.get(\'query\') %></div>\n      </div>\n    <% }); %>\n  </div>\n  <br />\n  <div id="address-map" style="height: 250px; width: 100%;">\n  </div>';
}), function() {
    require([ "jquery", "underscore", "backbone", "bootstrap", "backbone.paginator", "backbone-relational" ], function(e, t, n, i, r) {
        var o, s, a, l, c, u, d, h, p, f, m, g, v, y, b, w, x, C, k, T, _, E, R, S, N;
        S = function(t) {
            return e("<div/>").text(t).html();
        }, e.fn.serializeObject = function() {
            var t, n;
            return n = {}, t = this.serializeArray(), e.each(t, function() {
                void 0 !== n[this.name] ? (n[this.name].push || (n[this.name] = [ n[this.name] ]), 
                n[this.name].push(this.value || "")) : n[this.name] = this.value || "";
            }), n;
        }, e.ajaxPrefilter(function(e) {
            "http" !== e.url.split(":")[0] && (e.url = "http://researchdb.warwick.ac.uk/liverpool/api" + e.url);
        }), R = this, o = n.RelationalModel.extend(), s = n.Collection.extend({
            model: o
        }), h = n.RelationalModel.extend(), p = n.Collection.extend({
            url: "/occupations",
            model: h
        }), k = n.RelationalModel.extend(), T = n.Collection.extend({
            url: function() {
                return "/relationships/" + this.models[0].id;
            },
            model: k
        }), c = n.Model.extend(), b = n.RelationalModel.extend({
            urlRoot: "/people",
            relations: [ {
                type: n.HasMany,
                key: "relationships",
                relatedModel: k,
                collectionType: p,
                reverseRelation: {
                    key: "person",
                    includeInJSON: "id"
                }
            }, {
                type: n.HasMany,
                key: "occupations",
                relatedModel: h,
                collectionType: p,
                reverseRelation: {
                    key: "person",
                    includeInJSON: "id"
                }
            }, {
                type: n.HasMany,
                key: "addresses",
                relatedModel: o,
                collectionType: s,
                reverseRelation: {
                    key: "person",
                    includeInJSON: "id"
                }
            } ],
            parse: function(e) {
                return e.birthdate = this.fuzzyDateMaker(e.birthtype, e.birthdate1, e.birthdate2), 
                e.deathdate = this.fuzzyDateMaker(e.deathtype, e.deathdate1, e.deathdate2), e.gender = this.genderMaker(e.sex), 
                t.each(e.addresses, function(e) {
                    var t;
                    return t = [], t.push(e.address.split(",")[1].trim() + " " + e.address.split(",")[0].trim()), 
                    t.push("Liverpool"), "" !== e.region && t.push(e.region), "" !== e.country && t.push(e.country), 
                    e.query = t.join(", ");
                }), e;
            },
            fuzzyDateMaker: function(e, t, n) {
                switch (e) {
                  case "exactly":
                    return t;

                  case "between":
                    return "between " + (isset(t) ? t : "unknown") + " and " + (isset(n) ? n : "unknown");

                  case "unknown":
                  case null:
                    return "unknown";
                }
            },
            genderMaker: function(e) {
                switch (e) {
                  case "m":
                    return "Male";

                  case "f":
                    return "Female";

                  case "":
                  case "unknown":
                  case null:
                    return "Unknown";
                }
            }
        }), m = n.Collection.extend({
            url: "/people",
            model: c,
            parse: function(e) {
                return e;
            }
        }), v = n.Collection.extend({
            url: function() {
                return console.log(options), "/peoplesearch?" + options.querystring;
            },
            model: c,
            parse: function(e) {
                return e;
            }
        }), n.PageableCollection = r, f = n.PageableCollection.extend({
            model: c,
            url: "/peoplepaginated",
            state: {
                firstPage: 1,
                sortKey: "surname",
                pageSize: 20
            },
            parse: function(e) {
                return this.state.totalRecords = parseInt(e.total), this.state.lastPage = Math.ceil(e.total / this.state.pageSize), 
                e.data;
            },
            parseRecords: function(e) {
                return e.data;
            },
            parseState: function(e) {
                return this.state.totalRecords = parseInt(e.total), this.state.lastPage = Math.ceil(e.total / this.state.pageSize), 
                this.state;
            }
        }), x = n.RelationalModel.extend({
            idAttribute: "place"
        }), C = n.Collection.extend({
            model: x,
            parse: function(e) {
                return console.log(this, e, "parsing place"), e;
            }
        }), l = n.RelationalModel.extend({
            relations: [ {
                type: n.HasMany,
                key: "places",
                relatedModel: x,
                reverseRelation: {
                    key: "country"
                }
            } ],
            parse: function(e) {
                return e;
            }
        }), a = n.Collection.extend({
            url: "/countriesfull",
            model: l
        }), g = n.View.extend({
            el: "#page",
            initialize: function() {
                return this.listenTo(R.paginatedPeople, "sync", this.render), this.$el.html(e("#view-loading").html());
            },
            breadcrumb: function(n) {
                var i;
                return i = t.template(e("#breadcrumb-template").html(), {
                    breadcrumbs: [ {
                        url: "",
                        title: "Page " + n.state.currentPage.toString() + " of " + n.state.lastPage
                    } ]
                }), e("#breadcrumb").html(i);
            },
            render: function() {
                var t;
                t = this, this.breadcrumb(paginatedPeople), this.$el.empty(), paginatedPeople ? paginatedPeople ? (require([ "backgrid", "backgrid-paginator" ], function(n) {
                    var i, r, o, s, a, l, c, u;
                    a = n.Cell.extend({
                        className: "results col-sm-1",
                        viewingPerson: function(e) {
                            return e.preventDefault(), N.navigate("view/" + this.model.get("id"), {
                                trigger: !0
                            });
                        },
                        render: function() {
                            return this.$el.html("<button class='btn btn-primary btn-xs'>Records</button>"), 
                            this;
                        },
                        events: {
                            click: "viewingPerson"
                        }
                    }), r = n.Row.extend({
                        events: {
                            click: "rowClicked"
                        },
                        rowClicked: function() {
                            return N.navigate("view/" + this.model.get("id"), {
                                trigger: !0
                            });
                        }
                    }), s = n.Cell.extend({
                        className: "gender-cell col-sm-5"
                    }), o = n.Cell.extend({
                        className: "forenames-cell col-sm-3"
                    }), u = n.Cell.extend({
                        className: "surname-cell col-sm-3"
                    }), c = new n.Grid({
                        className: "table table-striped table-condensed",
                        row: r,
                        columns: [ {
                            name: "surname",
                            label: "Surname",
                            cell: "string",
                            sortable: !0,
                            editable: !1
                        }, {
                            name: "forenames",
                            label: "Forename(s)",
                            cell: o,
                            sortable: !0,
                            editable: !1
                        }, {
                            name: "sex",
                            label: "Gender",
                            cell: s,
                            sortable: !0,
                            editable: !1
                        }, {
                            cell: a
                        } ],
                        collection: paginatedPeople
                    }), i = e("#page"), i.append(c.render().el), l = new n.Extension.Paginator({
                        collection: paginatedPeople
                    }), i.append(l.render().el), l.listenTo(paginatedPeople, "reset", function() {
                        N.navigate("list/page/" + this.collection.state.currentPage.toString(), {
                            trigger: !1
                        }), t.breadcrumb(this.collection);
                    });
                }), this.$el.show()) : this.$el.show() : this.$el.html(e("#view-loading").html());
            }
        }), E = n.View.extend({
            el: "#page",
            render: function() {
                var n, i, r;
                r = this, i = t.template(e("#breadcrumb-template").html(), {
                    breadcrumbs: [ {
                        title: "Search",
                        url: "/search"
                    } ]
                }), e("#breadcrumb").html(i), require([ "text!../templates/search.html.tpl" ], function(e) {
                    r.$el.html(t.template(e));
                }), this.countries = new a(), this.countries.fetch({
                    dataType: "jsonp",
                    success: function(t) {
                        e(t.models).each(function(t, n) {
                            e("select[name=birthCountry]").append(e("<option></option>").attr("value", n.get("country")).text(n.get("country")));
                        });
                    }
                }), n = new p(), n.fetch({
                    dataType: "jsonp",
                    success: function(t) {
                        e(t.models).each(function(t, n) {
                            e("#occupation-category").append(e("<option></option>").attr("value", n.get("category")).attr("data-id", n.get("id")).text(n.get("category")));
                        });
                    }
                });
            },
            events: {
                "click div[id^=search-] label.btn": "visualDateUpdate",
                "change input[id$=-start], input[id$=-end]": "valueDateUpdate",
                "click label[id$=-include]": "dateSelectorUpdate",
                "submit #search-form": "searchResults",
                "change select[name=birthCountry]": "placesUpdate"
            },
            searchResults: function(t) {
                var n, i;
                return t.preventDefault(), this.$el.html(e("#view-loading").html()), n = new y(), 
                i = e(t.currentTarget).serialize(), console.log(i), N.navigate("search/results?" + i, {
                    trigger: !0
                }), n.search(i), !1;
            },
            dateSelectorUpdate: function() {
                return e("#birth-start, #birth-and, #death-start, #death-and").hide(), e("input[name^=date-type]:checked").each(function() {
                    return this.checked = !1;
                }), e("label.disabled").removeClass("disabled"), !0;
            },
            visualDateUpdate: function(t) {
                var n, i, r;
                switch (n = e(t.currentTarget)[0].firstElementChild, i = e("input[name='birth-death']:checked").val(), 
                r = e("input[name='birth-death']:not(:checked)").val(), n.value) {
                  case "exactly":
                    e("#" + i + "-end, #" + i + "-and").hide(), e("#" + i + "-start").show();
                    break;

                  case "before":
                    e("#" + i + "-start, #" + i + "-and").hide(), e("#" + i + "-end").show();
                    break;

                  case "after":
                    e("#" + i + "-end, #" + i + "-and").hide(), e("#" + i + "-start").show();
                    break;

                  case "between":
                    e("#" + i + "-end, #" + i + "-and, #" + i + "-start").show();
                }
                this.valueDateUpdate(t);
            },
            valueDateUpdate: function(t) {
                var n, i;
                switch (i = t.currentTarget.id.split("-")[0], "click" === t.type && (n = parseInt(t.currentTarget.id.split("-")[2])), 
                "change" === t.type && (n = parseInt(e("input[name=" + i + "type]:checked").val())), 
                n) {
                  case "excatly":
                    "0000" === e("#" + i + "-start").val() && e("#" + i + "-start").val(""), e("#" + i + "-end").val(e("#" + i + "-start").val());
                    break;

                  case "before":
                    e("#" + i + "-start").val("0000"), "9999" === e("#" + i + "-end").val() && e("#" + i + "-end").val("");
                    break;

                  case "after":
                    e("#" + i + "-end").val("9999"), "0000" === e("#" + i + "-start").val() && e("#" + i + "-start").val("");
                    break;

                  case "between":
                    console.log("evaluating: ", e("#" + i + "-start").val(), e("#" + i + "-end").val()), 
                    "0000" === e("#" + i + "-start").val() && e("#" + i + "-start").val(""), "9999" === e("#" + i + "-end").val() && e("#" + i + "-end").val("");
                }
            },
            placesUpdate: function(n) {
                var i;
                switch (i = this, this.country = this.countries.findWhere({
                    country: e(n.currentTarget).children("option:selected")[0].value
                }), this.country.get("places").models.length) {
                  case 1:
                    e("select[name=birthPlace]").empty().attr("disabled", !0), e.each(this.country.get("places").models, function(t, n) {
                        return e("select[name=birthPlace]").append(e("<option></option>").attr("value", n.get("place")).text(n.get("place")));
                    });
                    break;

                  case 0:
                    e("select[name=birthPlace]").empty().attr("disabled", !0);
                    break;

                  default:
                    e("select[name=birthPlace]").empty().attr("disabled", !1).append(e("<option></option>").attr("value", "").text("-- " + this.country.get("places").models.length + " places within " + this.country.get("country") + " --")), 
                    e.each(this.country.get("places").models, function(t, n) {
                        return e("select[name=birthPlace]").append(e("<option></option>").attr("value", n.get("place")).text(n.get("place")));
                    });
                }
                return {
                    initialize: function() {
                        return t.bindAll(this, "render", "placesLookup"), this.model.bind("change:places", this.placesLookup);
                    }
                };
            }
        }), y = n.View.extend({
            el: "#page",
            initialize: function() {
                return this.$el.html(e("#view-loading").html()), this.peopleResults = new v(), this.createBackGrid();
            },
            createBackGrid: function() {
                var e;
                return e = this, require([ "backgrid" ], function(t) {
                    var n, i, r, o, s;
                    return o = t.Cell.extend({
                        viewingPerson: function(e) {
                            return e.preventDefault(), N.navigate("view/" + this.model.get("id"), {
                                trigger: !0
                            });
                        },
                        render: function() {
                            return this.$el.html("<button class='btn btn-primary btn-xs'>Records</button>"), 
                            this;
                        },
                        events: {
                            click: "viewingPerson"
                        }
                    }), n = t.Row.extend({
                        events: {
                            click: "rowClicked"
                        },
                        rowClicked: function() {
                            return N.navigate("view/" + this.model.get("id"), {
                                trigger: !0
                            });
                        }
                    }), r = t.Cell.extend({
                        className: "gender-cell col-sm-5"
                    }), i = t.Cell.extend({
                        className: "forenames-cell col-sm-3"
                    }), s = t.Cell.extend({
                        className: "surname-cell col-sm-3"
                    }), e.peopleGrid = new t.Grid({
                        className: "table table-condensed table-striped",
                        row: n,
                        columns: [ {
                            name: "surname",
                            label: "Surname",
                            cell: "string",
                            sortable: !0,
                            editable: !1
                        }, {
                            name: "forenames",
                            label: "Forename(s)",
                            cell: "string",
                            sortable: !0,
                            editable: !1
                        }, {
                            name: "sex",
                            label: "Gender",
                            className: "gender",
                            cell: "string",
                            sortable: !0,
                            editable: !1
                        }, {
                            className: "button",
                            cell: o,
                            editable: !1
                        } ],
                        collection: e.peopleResults
                    });
                });
            },
            search: function(t) {
                var n;
                return n = this, e.when(this.peopleResults.fetch({
                    dataType: "jsonp",
                    url: "/peoplesearch?" + t
                })).done(function() {
                    return n.render();
                });
            },
            render: function() {
                var n, i;
                return i = this, n = t.template(e("#breadcrumb-template").html(), {
                    breadcrumbs: [ {
                        url: "#search",
                        title: "People Search"
                    } ]
                }), n = t.template(e("#breadcrumb-template").html(), {
                    breadcrumbs: [ {
                        url: "#search",
                        title: "People Search"
                    }, {
                        url: "",
                        title: "Showing search results (" + i.peopleResults.length + ")"
                    } ]
                }), e("#breadcrumb").html(n), this.$el.empty(), this.$el.append(this.peopleGrid.render().el);
            }
        }), w = n.View.extend({
            el: "#page",
            initialize: function() {
                return this.listenTo(this.model, "change", this.render), this.model.fetch({
                    dataType: "jsonp"
                });
            },
            render: function() {
                var n, i;
                return i = this, require([ "text!../templates/view.html.tpl" ], function(e) {
                    i.$el.html(t.template(e));
                }), require([ "text!../templates/view_details.html.tpl" ], function(n) {
                    e("#person-details").html(t.template(n, {
                        person: i.model
                    }));
                }), n = t.template(e("#breadcrumb-template").html(), {
                    breadcrumbs: [ {
                        url: "#view/" + this.model.get("id"),
                        title: this.model.get("forenames") + " " + this.model.get("surname")
                    } ]
                }), e("#breadcrumb").html(n), this.model.get("relationships").models.length > 0 && require([ "text!../templates/view_relationships.html.tpl" ], function(n) {
                    return e("#relationships").empty().html(t.template(n, {
                        relationships: i.model.get("relationships").models
                    }));
                }), this.model.get("occupations").models.length > 0 && require([ "text!../templates/view_occupation.html.tpl" ], function(n) {
                    return e("#bibliographical-details .loading").remove(), e("#bibliographical-details").append(t.template(n, {
                        occupations: i.model.get("occupations").models
                    }));
                }), this.model.get("addresses").models.length > 0 ? require([ "text!../templates/view_address.html.tpl" ], function(n) {
                    return e("#bibliographical-details").append(t.template(n, {
                        addresses: i.model.get("addresses").models
                    }, i.mapView = new d(), i.mapView.render(), t.each(i.model.get("addresses").models, function(e) {
                        var t;
                        return e.get("latitude") && e.get("longitude") ? i.mapView.addMarker(e.get("latitude"), e.get("longitude")) : (t = new u({
                            id: e.get("query")
                        }), t.fetchFind({
                            dataType: "jsonp"
                        }), i.listenTo(t, "change", i.addMarker));
                    })));
                }) : void 0;
            },
            addMarker: function(e) {
                return this.mapView.addMarker(e.get("latitude"), e.get("longitude"), e.get("id"));
            }
        }), d = n.View.extend({
            el: "#address-map",
            initialize: function() {
                return require([ "leaflet" ], function() {
                    return this.map = L.map("address-map").setView([ 0, 0 ], 10);
                });
            },
            render: function() {
                var t;
                return t = this, require([ "leaflet" ], function() {
                    return L.tileLayer("http://{s}.tiles.mapbox.com/v3/steveranford.icifhpgl/{z}/{x}/{y}.png", {
                        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',
                        maxZoom: 18
                    }).addTo(this.map), e(t.el).hide();
                });
            },
            addMarker: function(t, n, i) {
                var r;
                return r = this, require([ "leaflet" ], function() {
                    var o;
                    return o = L.latLng(t, n), L.marker(o).addTo(this.map).bindPopup(i).openPopup(), 
                    this.map.setView([ t, n ], 15), e(r.el).show();
                });
            }
        }), u = n.Model.extend({
            urlRoot: "http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/",
            parse: function(e) {
                var t;
                return t = {}, e.locations.length > 0 && (t.longitude = e.locations[0].feature.geometry.x || "", 
                t.latitude = e.locations[0].feature.geometry.y || ""), t;
            },
            fetchFind: function(e) {
                return e = e || {}, void 0 === e.url && (e.url = this.urlRoot + "find?f=pjson&text=" + this.id), 
                n.Model.prototype.fetch.call(this, e);
            }
        }), _ = n.Router.extend({
            routes: {
                "": "home",
                "view/:id": "viewPerson",
                "new": "editPerson",
                "list/page/:page": "listPage",
                list: "home",
                search: "searchForm",
                "search/results?:querystring": "viewPersonResults",
                "search/results": "searchForm"
            }
        }), N = new _(), N.on("route:home", function() {
            var e;
            R.paginatedPeople = new f(), e = new g(), R.paginatedPeople.getFirstPage({
                dataType: "jsonp"
            });
        }), N.on("route:listPage", function(e) {
            var t;
            R.paginatedPeople = new f(), t = new g(), R.paginatedPeople.getPage(parseInt(e), {
                dataType: "jsonp"
            });
        }), N.on("route:searchForm", function() {
            var e;
            e = new E(), e.render();
        }), N.on("route:viewPerson", function(e) {
            var t, n;
            (t = b.findModel({
                id: e
            })) || (t = new b({
                id: e
            })), n = new w({
                model: t
            });
        }), N.on("route:viewPersonResults", function(e) {
            var t;
            t = new y(), t.search(e);
        }), n.history.start();
    });
}.call(this), define("app", function() {}), function() {
    require.config({
        baseUrl: "src",
        deps: [ "main" ],
        defnine: {
            underscore: "lib/underscore"
        },
        paths: {
            tpl: "../templates",
            lib: "../assets/lib",
            text: "../assets/lib/requirejs-text/text",
            jquery: "../assets/lib/jquery/dist/jquery.min",
            underscore: "../assets/lib/underscore/underscore-min",
            backbone: "../assets/lib/backbone/backbone-min",
            bootstrap: "../assets/lib/bootstrap/bootstrap.min",
            "backbone.paginator": "../assets/lib/backbone-paginator/lib/backbone.paginator.min",
            backgrid: "../assets/lib/backgrid/lib/backgrid",
            "backgrid-paginator": "../assets/lib/backgrid-paginator/backgrid-paginator",
            "backbone-relational": "../assets/lib/backbone-relational/backbone-relational",
            leaflet: "http://cdn.leafletjs.com/leaflet-0.4/leaflet"
        },
        shim: {
            bootstrap: [ "jquery" ]
        }
    }), require([ "app" ], function() {});
}.call(this), define("main", function() {});